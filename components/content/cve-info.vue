<template>
  <a :href="to" target="_blank" class="cve-layout">
    <div class="cve-box">
      <div class="cve-num">
        <p>{{ cve }}</p>
        <a :href="`https://cwe.mitre.org/data/definitions/${cwe}.html`" target="_blank">
          <span>CWE-{{ cwe }}</span>
        </a>
      </div>

      <svg width="21" height="20" viewBox="0 0 21 20" :style="{ filter: 'drop-shadow(0px 2px 2px rgba(0,0,0,0.25))' }"
        xmlns="http://www.w3.org/2000/svg">
        <path d="M2 0H9.36437L19 16H11.6356L2 0Z" :fill="svgColor" />
      </svg>
    </div>
    <div class="cve-info">
      <slot></slot>
    </div>
  </a>
</template>

<script setup>
import { ref, onMounted, defineProps } from 'vue';
const colorMode = useColorMode();

const props = defineProps({
  cve: {
    type: String,
    default: '',
  },
  cwe: {
    type: String,
    default: '',
  },
  to: {
    type: String,
    default: '',
  },
  type: {
    type: Number,
    default: '',
  },
});
const svgColor = computed(() => {
  const t = String(props.type).trim();
  switch (t) {
    case '3':
      return '#FF0000'; 
    case '2':
      return '#FFA500'; 
    case '1':
      return '#808080'; 
    default:
      return '#808080'; 
  }
});
</script>

<style lang="scss" scoped>
a {
  text-decoration: none;
}

.dark-mode .cve-layout {
  border: 1px solid #ffffff2e;
  box-shadow: none;
}

.dark-mode .cve-box .cve-num p {
  color: #fff !important;
}

.cve-layout {
  text-decoration: none;
  box-shadow: 0px 4px 4px rgb(175 175 175 / 25%);

  .cve-box {
    padding: 12px;

    cursor: pointer;

    .cve-num {
      display: flex;
      gap: 12px;
      align-items: center;

      p {
        margin: 0;
        font-weight: bold;
        color: #000;
      }

      span {
        color: #cecece;
      }
    }

    .cvss {
      display: block;
      background-image: url("data:image/svg+xml,%3Csvg width='11' height='10' viewBox='0 0 11 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0H4.76518L11 10H6.23482L0 0Z' fill='%23FF0000'/%3E%3C/svg%3E%0A");
      width: 11px;
      height: 10px;
    }

    justify-content: space-between;
    align-items: center;
    display: flex;
  }

}
</style>
