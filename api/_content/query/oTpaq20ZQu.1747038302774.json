{"_path":"/book/unicode-explained","_dir":"book","_draft":false,"_partial":false,"_locale":"","title":"Unicode Explained","description":"","director":"Jukka K. Korpela","time":"2025","img":"11/1.png","plan":"0,71","body":{"type":"root","children":[{"type":"element","tag":"book-content","props":{":by":"director",":img":"img",":plan":"plan",":title":"title"},"children":[{"type":"element","tag":"text-title","props":{"t":"为什么要看这本书？"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"起因是在 neovim 群中看到了群友的名字是 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"panic!(\"⁧;(\""}]},{"type":"text","value":" 每次 @ 他的时候文字都会被 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]},{"type":"text","value":" 包裹起来。类似你看到的这个情况，这个问题不仅是在群组，就算在浏览器、终端环境下都是存在的。实际上我并没有将文字写在 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"\""}]},{"type":"text","value":" 中，而是默认这样的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不过 unicode 在日常生活中是经常应用的, 比如在 bilibili 就经常有用 Unicode 字符来弄一些标题，例如: 𝑾𝒆 𝑨𝒓𝒆 𝑳𝒐𝒔𝒆𝒓、𝓦𝓮 𝓐𝓻𝓮 𝓛𝓸𝓼𝓮𝓻 显得与众不同，有时候也会有歌名用 unicode 字符显得比较独特。这些都可以通过 "},{"type":"element","tag":"a","props":{"href":"https://qaz.wtf/u/convert.cgi?text=We+Are+Loser","rel":["nofollow"]},"children":[{"type":"text","value":"Unicode Text Converter"}]},{"type":"text","value":" 来进行生成和转换。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h1","props":{"id":"trojan-source-1"},"children":[{"type":"text","value":"Trojan Source 1"}]},{"type":"element","tag":"text-title","props":{"t":"Trojan Source"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所以我尝试 Google 了很多次，但都是搜索不到相关的，更多的是 rust 和 go 相关的结果。之后一位群友说这是 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"utf-8的奇妙魔力"}]},{"type":"text","value":"，我才详细的了解了 unicode。并且找到了一个非常有趣的 CVE 编号，即 "},{"type":"element","tag":"a","props":{"href":"https://nvd.nist.gov/vuln/detail/CVE-2021-42574","rel":["nofollow"]},"children":[{"type":"text","value":"CVE-2021-42574"}]},{"type":"text","value":" 这种类似的缺陷叫作 "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Trojan_Source","rel":["nofollow"]},"children":[{"type":"text","value":"\"Trojan Source\""}]},{"type":"text","value":"，中文直译就是 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"木马来源"}]},{"type":"text","value":"，泛指 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"不可见的漏洞"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"维基百科的解释是：\"它滥用 Unicode 的双向字符来显示源代码 ，而不是源代码的实际执行。"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"该漏洞利用了不同阅读方向的书写脚本在计算机上的显示和编码方式。"}]},{"type":"text","value":"\" 根据维基百科提供的详细信息，貌似可以快速入门 unicode。但我的计划是先阅读这本书，了解 unicode 做什么，有什么用在进一步学习。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有趣的是，这一 CVE 影响了类似所有使用 Unicode 规范的环境，例如 Github。如果提交的信息包含 unicode code，那么会有一个警告："}]},{"type":"element","tag":"text-tip","props":{"type":"big"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This diff contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. "},{"type":"element","tag":"a","props":{"href":"https://github.blog/changelog/2021-10-31-warning-about-bidirectional-unicode-text/","rel":["nofollow"]},"children":[{"type":"text","value":"Learn more about bidirectional Unicode characters"}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h1","props":{"id":"转义-3"},"children":[{"type":"text","value":"转义 3"}]},{"type":"element","tag":"text-title","props":{"t":"Unicode 转义序列"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unicode 转义序列又称之为 Escaped Unicode characters, 可以参考 "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Escape_character","rel":["nofollow"]},"children":[{"type":"text","value":"Escape character "}]},{"type":"text","value":" "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"。就是说将一个字符转义成另一个编码"}]},{"type":"text","value":" 的过程, 基于 Unicode 的各种编码，可以做很多事情。这也意味着需要做很多类似转义的操作，可以用在线工具或 code lang 来完成这个过程，如使用 PY 的 "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/howto/unicode.html","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"s.encode"}]}]},{"type":"text","value":" 对象方法："}]},{"type":"element","tag":"pre","props":{"code":"s = '你好'\nunicode_str = s.encode('unicode_escape').decode()\nprint(unicode_str)  # 输出: \\u4f60\\u597d\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"s = '你好'\nunicode_str = s.encode('unicode_escape').decode()\nprint(unicode_str)  # 输出: \\u4f60\\u597d\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"之后，我们拿到 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\\u4f60\\u597d"}]},{"type":"text","value":" 到 "},{"type":"element","tag":"a","props":{"href":"https://gchq.github.io/CyberChef/","rel":["nofollow"]},"children":[{"type":"text","value":"CyberChef"}]},{"type":"text","value":" 来进行添加 Unicode 字符，之后将 output 结果 copy 到剪贴板中即可使用（需要添加 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Unescape string"}]},{"type":"text","value":" 模块）例如："}]},{"type":"element","tag":"pre","props":{"code":"\\u5b87\\u5b99\\u65e0\\u654c\\u67e0\\u6aac\\u738b\\u2067\\uD83C\\uDF4B\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"\\u5b87\\u5b99\\u65e0\\u654c\\u67e0\\u6aac\\u738b\\u2067\\uD83C\\uDF4B\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这是是一串 Unicode 字符，转义成字符串就是："}]},{"type":"element","tag":"pre","props":{"code":"宇宙无敌柠檬王⁧🍋\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"宇宙无敌柠檬王⁧🍋\n"}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"字符"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"名称"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"类型"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Bidi 类别"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"简介说明"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+200E"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"LEFT-TO-RIGHT MARK (LRM)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Cf"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"L"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"插入一个不可见的 LTR 方向提示符"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+202A"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"LEFT-TO-RIGHT EMBEDDING (LRE)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Cf"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"LRE"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"开始一个嵌入式 LTR 片段，需 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PDF"}]},{"type":"text","value":" 结束"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+202D"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"LEFT-TO-RIGHT OVERRIDE (LRO)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Cf"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"LRO"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"强制后续文本以 LTR 显示，需 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PDF"}]},{"type":"text","value":" 结束"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+2066"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"LEFT-TO-RIGHT ISOLATE (LRI)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Cf"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"LRI"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"开始 LTR 隔离段，推荐用法，需 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PDI"}]},{"type":"text","value":" 结束"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+2067"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RIGHT-TO-LEFT ISOLATE (RLI)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Cf"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RLI"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"开始 RTL 隔离段，推荐用法，需 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PDI"}]},{"type":"text","value":" 结束"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+200F"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RIGHT-TO-LEFT MARK (RLM)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Cf"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"R"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"插入一个不可见的 RTL 方向提示符"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+202B"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RIGHT-TO-LEFT EMBEDDING (RLE)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Cf"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RLE"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"开始一个嵌入式 RTL 片段，需 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PDF"}]},{"type":"text","value":" 结束"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+202E"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RIGHT-TO-LEFT OVERRIDE (RLO)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Cf"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RLO"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"强制后续文本以 RTL 显示，需 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PDF"}]},{"type":"text","value":" 结束"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"U+1BC77"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"DUPLOYAN AFFIX ATTACHED... (略)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Lo"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"L"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"杜波洛扬速记字符，天然 LTR，可显示"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"像是 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\\u5b87"}]},{"type":"text","value":" 这种的，一般称之为 "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/UTF-16","rel":["nofollow"]},"children":[{"type":"text","value":"UTF-16"}]},{"type":"text","value":",在上面的 Unicode 字符中，"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"u2066"}]},{"type":"text","value":" 这个系 "},{"type":"element","tag":"a","props":{"href":"https://www.compart.com/en/unicode/U+2066#UNC_DB","rel":["nofollow"]},"children":[{"type":"text","value":"LEFT-TO-RIGHT"}]},{"type":"text","value":" 这个序列的，根据维基百科 "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Bidirectional_text","rel":["nofollow"]},"children":[{"type":"text","value":"Bidirectional text"}]},{"type":"text","value":" 的介绍，这种被称之为 “双向文本”, 用于波斯语和阿拉伯语甚至是数学表达式。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于用了 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"u2067"}]},{"type":"text","value":", 这会导致渲染的时候会隔断 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"🍋"}]},{"type":"text","value":"，别人 @ 我的时候就会夹着消息，比如 @ 我的时候输入 Hello 就会变成："}]},{"type":"element","tag":"pre","props":{"code":"@宇宙无敌柠檬王 Hello 🍋\n---如果是正常的\n@宇宙无敌柠檬王🍋 Hello\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"@宇宙无敌柠檬王 Hello 🍋\n---如果是正常的\n@宇宙无敌柠檬王🍋 Hello\n"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:book:unicode-explained.md","_source":"content","_file":"book/unicode-explained.md","_extension":"md"}