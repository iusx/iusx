import{_ as F}from"./Bqb-K9Oq.js";import{_ as E}from"./CATm3bSX.js";import{u as M}from"./CvNFYNmv.js";import{u as S,q as W}from"./lS0xO5Uc.js";import{_ as $}from"./5_KzTqZy.js";import{y as k,k as V,A as u,O as o,P as v,G as x,R as B,Y as b,X as C,u as L,z as g,H as i,B as h,C as w,Z as I,_ as q}from"./Dh2Oq3Os.js";import"./DidxTbZU.js";const z=_=>(I("data-v-f5406bee"),_=_(),q(),_),U={class:"hi"},Y=z(()=>o("span",null,"MY plan",-1)),j={class:"layout-box"},G={class:"title-box"},H={class:"title-box_name"},Q={class:"title"},R={class:"plan-box"},X=["href"],Z={class:"title"},J={class:"plan-box"},K={__name:"plan",async setup(_){let d,f;M({title:"PLAN"});const{data:T}=([d,f]=k(()=>S("equalLink",()=>W("plan/").find())),d=await d,f(),d),p=s=>s.toLocaleString(),y=s=>(s<0?"-":"")+Math.abs(s)+"%";function N(s,n){if(s<0)return"progress-negative"}const D=V(()=>{const s=T.value||[],n=new Map;s.forEach(t=>{const r=String(t._path||"").split("/").filter(Boolean);if(r.length<2)return;const e="/"+r.slice(0,2).join("/");if(r.length===2)n.set(e,{...t,_path:e,subPlans:[]});else{if(!n.has(e)){const l=r[1].replace(/[-_]/g," ").replace(/\b\w/g,A=>A.toUpperCase());n.set(e,{title:l,_path:e,target:0,current:0,progress:0,barClass:"",displayType:t.displayType||"percent",time:null,subPlans:[]})}n.get(e).subPlans.push({...t})}});for(const t of n.values()){if((!t.target||t.target===0)&&t.subPlans.length&&(t.target=t.subPlans.reduce((e,a)=>e+(Number(a.target)||0),0)),t.current=t.current?Number(t.current):t.subPlans.reduce((e,a)=>e+(Number(a.current)||0),0),!t.displayType&&t.subPlans.length&&(t.displayType=t.subPlans[0].displayType||"percent"),!t.time&&t.subPlans.length){let e=0;t.subPlans.forEach(a=>{const l=new Date(a.time).getTime();!isNaN(l)&&l>e&&(e=l)}),t.time=e?new Date(e).toISOString():null}t.target=Number(t.target)||0,t.current=Number(t.current)||0;let r=t.target>0?t.current/t.target*100:0;t.displayType==="percent"&&r>100&&(r=100),t.progress=parseFloat(r.toFixed(2)),t._progressForWidth=Math.max(0,t.progress),t.barClass=N(t.current,t.target),(t.subPlans||[]).forEach(e=>{e.target=Number(e.target)||0,e.current=Number(e.current)||0;let a=e.target>0?e.current/e.target*100:0;e.progress=parseFloat(a.toFixed(2)),e._progressForWidth=Math.max(0,e.progress),e.barClass=N(e.current,e.target)})}const c=Array.from(n.values());return c.sort((t,r)=>{const e=t.time?new Date(t.time).getTime():0;return(r.time?new Date(r.time).getTime():0)-e}),c}),m=(s,n=null)=>{const c=n?n.displayType:s.displayType;return!n&&c==="percent"?{target:`SAVE ${Math.min(100,s.target)}%`,current:`NOW: ${Math.min(100,s.current)}%`}:c==="usd"?{target:`SAVE ${p(s.target)} USD`,current:`NOW: ${p(s.current)} USD`}:c==="percent"?{target:`SAVE ${p(s.target)}%`,current:`NOW: ${p(s.current)}%`}:{target:`SAVE ${p(s.target)}`,current:`NOW: ${p(s.current)}`}};return(s,n)=>{const c=F,t=E;return g(),u("main",null,[o("div",U,[o("h1",null,[v(c),x(),v(t,null,{default:B(()=>[x("PLAN")]),_:1})]),Y]),o("div",j,[(g(!0),u(b,null,C(L(D),(r,e)=>(g(),u("div",{key:e,class:"layout"},[o("div",G,[o("p",H,i(r.title),1),o("div",Q,[o("p",null,i(m(r).target),1),o("span",{class:h({"negative-color":r.barClass==="progress-negative"})},i(m(r).current),3)])]),o("div",R,[o("div",{class:h(["progress-bar",r.barClass]),style:w({width:r._progressForWidth+"%"})},[o("p",null,i(y(r.progress)),1)],6)]),(g(!0),u(b,null,C(r.subPlans,(a,l)=>(g(),u("a",{href:a._path,key:l,class:"sub-plan"},[o("div",Z,[o("p",null,i(m(a,r).target)+" - "+i(a.title),1),o("span",{class:h({"negative-color":a.barClass==="progress-negative"})},i(m(a,r).current),3)]),o("div",J,[o("div",{class:h(["progress-bar",a.barClass]),style:w({width:a._progressForWidth+"%"})},[o("p",null,i(y(a.progress)),1)],6)])],8,X))),128))]))),128))])])}}},nt=$(K,[["__scopeId","data-v-f5406bee"]]);export{nt as default};
