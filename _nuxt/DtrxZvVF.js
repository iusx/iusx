import{_ as w}from"./DEvv4Id_.js";import{u as E}from"./BTJrZvpP.js";import{u as I,q as x}from"./_YpdDahQ.js";import{g as d,S as A}from"./AT3FAtMz.js";import{j as C,z as L,k as T,a as B,X as D,A as u,B as f,M as e,I as n,u as k,N as O,O as N,E as W,Y as q,H as h,S as F,T as M}from"./D9-5eGkO.js";import{_ as P}from"./DKAWXULe.js";import"./ZpqpLtCg.js";const r=c=>(F("data-v-8a03eb05"),c=c(),M(),c),R={class:"archive-header"},V={class:"header-meta"},z=r(()=>e("span",null,"// KNOWLEDGE_BASE",-1)),H=r(()=>e("h1",{class:"title"},[h("LEARN"),e("br"),h("FOR COOL"),e("span",{class:"dot"},".")],-1)),K=r(()=>e("div",{class:"divider"},null,-1)),U={class:"library-content"},j={class:"book-grid"},G={class:"cover-wrapper"},Q=r(()=>e("div",{class:"skeleton-loader"},null,-1)),X=r(()=>e("div",{class:"error-msg"},"NOT FOUND",-1)),Y=["src","alt"],$=r(()=>e("div",{class:"sheen"},null,-1)),J={class:"book-info"},Z={class:"info-header"},ee={class:"status-tag"},te=r(()=>e("span",{class:"status-dot"},null,-1)),se={class:"year"},oe={class:"book-title"},ae={class:"book-author"},re=C({__name:"book",async setup(c){let i,m;d.registerPlugin(A),E({title:"Library Archive",description:"Input Source & Knowledge Base"});const{data:p}=([i,m]=L(()=>I("equalBook",()=>x("book/").find())),i=await i,m(),i),g=T(()=>p.value?[...p.value].sort((t,s)=>new Date(s.time).getTime()-new Date(t.time).getTime()):[]),l=B(null),y=t=>t?t.startsWith("/img/book/")||t.startsWith("http")?t:`/img/book/${t.startsWith("/")?t.slice(1):t}`:"",_=(t,s)=>{const o=t.closest(".cover-wrapper");o&&(o.classList.add("is-loaded"),s==="error"&&o.classList.add("has-error"))},S=t=>{_(t.target,"success")},b=t=>{const s=t.target;console.error("âŒ Image Failed:",s.src),_(s,"error")};return D(()=>{l.value&&l.value.querySelectorAll("img.cover-img").forEach(o=>{o.complete&&o.naturalWidth>0&&_(o,"success")});const t=d.context(()=>{d.from(".archive-header",{y:50,opacity:0,duration:1,ease:"power3.out"}),d.from(".book-card",{y:60,opacity:0,duration:.8,stagger:.05,ease:"back.out(1.7)",scrollTrigger:{trigger:".book-grid",start:"top 85%"}})},l.value);return()=>t.revert()}),(t,s)=>{const o=w;return u(),f("main",{ref_key:"mainContainer",ref:l,class:"library-container"},[e("header",R,[e("div",V,[z,e("span",null,"TOTAL_ITEMS: "+n(k(g).length),1)]),H,K]),e("div",U,[e("div",j,[(u(!0),f(O,null,N(k(g),a=>(u(),W(o,{key:a._path,to:a._path,class:"book-card"},{default:q(()=>{var v;return[e("div",G,[Q,X,e("img",{src:y(a.img),alt:a.title,class:"cover-img",loading:"lazy",onLoad:S,onError:b},null,40,Y),$]),e("div",J,[e("div",Z,[e("span",ee,[te,h(" "+n(a.status||"ARCHIVED"),1)]),e("span",se,n((v=a.time)==null?void 0:v.slice(0,4)),1)]),e("h3",oe,n(a.title),1),e("p",ae,n(a.author||"Unknown Author"),1)])]}),_:2},1032,["to"]))),128))])])],512)}}}),he=P(re,[["__scopeId","data-v-8a03eb05"]]);export{he as default};
