import{_ as D}from"./Djf8_lhW.js";import{_ as B}from"./CfgzQjZj.js";import{u as E}from"./2k4afZw6.js";import{u as F,q as L}from"./zYep0Fm5.js";import{_ as S}from"./Cs-kbV1q.js";import{y as V,k as $,N as I,A as u,O as e,P as f,G as v,R as T,Y as y,X as x,u as q,z as _,H as a,B as C,C as N,Z as M,_ as z}from"./Dh2Oq3Os.js";import"./BlmcZdHF.js";const W=d=>(M("data-v-a72780ed"),d=d(),z(),d),b={class:"hi"},U=W(()=>e("span",null,"MY plan",-1)),Y={class:"layout-box"},G=["href"],H={class:"title-box"},Q={class:"title-box_name"},R={class:"title"},X={class:"plan-box"},Z={class:"title"},j={class:"plan-box"},J={__name:"plan",async setup(d){let l,m;E({title:"PLAN"});const{data:g}=([l,m]=V(()=>F("equalLink",()=>L("plan/").find())),l=await l,m(),l);g.value&&g.value.sort((t,o)=>{const s=new Date(t.time).getTime();return new Date(o.time).getTime()-s});const h=$(()=>g.value);console.log("fuck",h);const c=t=>t.toLocaleString(),p=(t,o=null)=>{const s=o?o.displayType:t.displayType;return s==="usd"?{target:`SAVE ${c(t.target)} USD`,current:`NOW: ${c(t.current)} USD`}:s==="percent"?{target:`SAVE ${c(t.target)}%`,current:`NOW: ${c(t.current)}%`}:{target:`SAVE ${c(t.target)}`,current:`NOW: ${c(t.current)}`}},A=()=>{plans.value.forEach(t=>{let o=(t.current/t.target*100).toFixed(2);t.progress=parseFloat(o),t.barClass=t.current<t.target?"progress-positive":"progress-negative",t.subPlans.forEach(s=>{let i=0;s.current>t.current?(i=((s.current-t.current)/t.current*100).toFixed(2),t.barClass="progress-negative",s.barClass="progress-negative"):(i=(s.current/t.target*100).toFixed(2),s.barClass=s.current<t.target?"progress-positive":"progress-negative"),s.progress=Math.min(100,parseFloat(i))})})};return I(()=>{A()}),(t,o)=>{const s=D,i=B;return _(),u("main",null,[e("div",b,[e("h1",null,[f(s),v(),f(i,null,{default:T(()=>[v("PLAN")]),_:1})]),U]),e("div",Y,[(_(!0),u(y,null,x(q(h),(r,k)=>(_(),u("a",{href:r._path,key:k,class:"layout"},[e("div",H,[e("p",Q,a(r.title),1),e("div",R,[e("p",null,a(p(r).target),1),e("span",null,a(p(r).current),1)])]),e("div",X,[e("div",{class:C(["progress-bar",r.barClass]),style:N({width:r.progress+"%"})},[e("p",null,a(r.progress)+"%",1)],6)]),(_(!0),u(y,null,x(r.subPlans,(n,w)=>(_(),u("div",{key:w,class:"sub-plan"},[e("div",Z,[e("p",null,a(p(n,r).target)+" (Inherited from Parent) ",1),e("span",null,a(p(n,r).current),1)]),e("div",j,[e("div",{class:C(["progress-bar",n.barClass]),style:N({width:n.progress+"%"})},[e("p",null,a(n.progress)+"%",1)],6)])]))),128))],8,G))),128))])])}}},ot=S(J,[["__scopeId","data-v-a72780ed"]]);export{ot as default};
