import{_ as S}from"./CD7nsetb.js";import{_ as W}from"./CSmW744J.js";import{u as $}from"./BU8pGh3N.js";import{u as k,q as L}from"./XXvrgUuH.js";import{_ as B}from"./BJF43XSc.js";import{z as E,k as I,B as u,P as o,Q as x,H as T,U as V,Z as N,Y as C,u as q,A as i,I as l,C as h,D as w,a0 as U,a1 as z}from"./BSTJsFqN.js";import"./BACzFMHD.js";const j=d=>(U("data-v-677b77db"),d=d(),z(),d),Q={class:"hi"},Y=j(()=>o("span",null,"MY plan",-1)),H={class:"layout-box"},Z={class:"title-box"},G={class:"title-box_name"},J={class:"title"},K={class:"plan-box"},O=["href"],R={class:"title"},X={class:"plan-box"},tt={__name:"plan",async setup(d){let g,m;$({title:"PLAN"});const{data:M}=([g,m]=E(()=>k("equalLink",()=>L("plan/").find())),g=await g,m(),g),c=s=>s.toLocaleString(),v=s=>(s<0?"-":"")+Math.abs(s)+"%",y=(s,a)=>s<0?"progress-negative":"",A=I(()=>{const s=M.value||[],a=new Map;s.forEach(t=>{const r=String(t._path||"").split("/").filter(Boolean);if(r.length<2)return;const e="/"+r.slice(0,2).join("/");if(r.length===2)a.has(e)||a.set(e,{...t,_path:e,subPlans:[],target:t.target||(t.displayType==="usd"?0:100),current:t.current||0,displayType:t.displayType||"percent"});else{if(!a.has(e)){const F=r[1].replace(/[-_]/g," ").replace(/\b\w/g,P=>P.toUpperCase());a.set(e,{title:F,target:t.displayType==="usd"?0:100,target:100,current:0,progress:0,barClass:"",displayType:t.displayType||"percent",time:null,subPlans:[]})}const p=a.get(e),n="/"+r.slice(0,3).join("/"),b={...t,_path:n,target:Number(t.target)||100,current:Number(t.current)||0,displayType:t.displayType||p.displayType};p.subPlans.push(b)}});for(const t of a.values()){if(t.subPlans.forEach(r=>{f(r)}),t.subPlans.length>0)if(t.displayType==="usd")t.target=t.subPlans.reduce((r,e)=>r+e.target,0),t.current=t.subPlans.reduce((r,e)=>r+e.current,0),f(t);else{const r=t.subPlans.reduce((e,p)=>e+p.progress,0);t.current=r/t.subPlans.length,t.progress=parseFloat(t.current.toFixed(2)),t._progressForWidth=Math.max(0,Math.min(t.progress,100)),t.barClass=y(t.current,t.target)}else f(t);t._progressForWidth=Math.max(0,Math.min(t.progress,100)),t.barClass=y(t.current,t.target)}return Array.from(a.values()).sort((t,r)=>{const e=t.time?new Date(t.time).getTime():0;return(r.time?new Date(r.time).getTime():0)-e})});function f(s){s.target=Number(s.target)||(s.displayType==="usd"?0:100),s.current=Number(s.current)||0;let a=0;s.target>0&&(a=s.current/s.target*100,s.displayType==="percent"&&(a=Math.min(a,100))),s.progress=parseFloat(a.toFixed(2)),s._progressForWidth=Math.max(0,Math.min(s.progress,100)),s.barClass=y(s.current,s.target)}const D=A,_=(s,a=null)=>{const t=a?a.displayType:s.displayType,r=s.target,e=s.current;return t==="usd"?{target:`SAVE ${c(r)} USD`,current:`NOW: ${c(e)} USD`}:t==="percent"?!a&&s.subPlans&&s.subPlans.length>0?{target:`PLAN ${c(r)}%`,current:`NOW: ${c(e)}%`}:{target:`SAVE ${c(r)}%`,current:`NOW: ${c(e)}%`}:{target:`SAVE ${c(r)}`,current:`NOW: ${c(e)}`}};return(s,a)=>{const t=S,r=W;return i(),u("main",null,[o("div",Q,[o("h1",null,[x(t),T(),x(r,null,{default:V(()=>[T("PLAN")]),_:1})]),Y]),o("div",H,[(i(!0),u(N,null,C(q(D),(e,p)=>(i(),u("div",{key:p,class:"layout"},[o("div",Z,[o("p",G,l(e.title),1),o("div",J,[o("p",null,l(_(e).target),1),o("span",{class:h({"negative-color":e.barClass==="progress-negative"})},l(_(e).current),3)])]),o("div",K,[o("div",{class:h(["progress-bar",e.barClass]),style:w({width:e._progressForWidth+"%"})},[o("p",null,l(v(e.progress)),1)],6)]),(i(!0),u(N,null,C(e.subPlans,(n,b)=>(i(),u("a",{href:n._path,key:b,class:"sub-plan"},[o("div",R,[o("p",null,l(_(n,e).target)+" - "+l(n.title),1),o("span",{class:h({"negative-color":n.barClass==="progress-negative"})},l(_(n,e).current),3)]),o("div",X,[o("div",{class:h(["progress-bar",n.barClass]),style:w({width:n._progressForWidth+"%"})},[o("p",null,l(v(n.progress)),1)],6)])],8,O))),128))]))),128))])])}}},pt=B(tt,[["__scopeId","data-v-677b77db"]]);export{pt as default};
