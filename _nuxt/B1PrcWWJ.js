import{_ as N,u as b}from"./Dr80XzYK.js";import{a as c,I as w,c as E,q as d,J as a,a0 as y,a1 as p,D as f,_ as S,X as x,W as P,o as g,U as F,V as K}from"./CZxr-oIr.js";const i=m=>(F("data-v-a0f2e45c"),m=m(),K(),m),V={class:"calculator"},C=i(()=>a("h1",null,"能量计算器",-1)),J=i(()=>a("label",{for:"foodName"},"食物名称: ",-1)),$=i(()=>a("label",{for:"energyPer100g"},"每100克食物的能量 (kJ): ",-1)),T=i(()=>a("label",{for:"weight"},"输入食物重量 (克): ",-1)),U={key:0},B=i(()=>a("h2",null,"今日计算结果",-1)),M={key:1},O={__name:"kcal",setup(m){b();const l=c(""),r=c(870),v=c(0),n=c(null),s=c([]);w(()=>{const o=localStorage.getItem("energyResult");o&&(n.value=o);const t=localStorage.getItem("foodName");t&&(l.value=t);const e=localStorage.getItem("energyPer100g");e&&(r.value=parseFloat(e)),k()});function I(){if(v.value>0&&r.value>0&&l.value.trim()!==""){const t=r.value/100*v.value*.239,e=`${l.value} - 能量为: ${t.toFixed(3)} kcal`;n.value=e,localStorage.setItem("energyResult",n.value),localStorage.setItem("foodName",l.value),localStorage.setItem("energyPer100g",r.value),h(e)}else alert("请确保输入了有效的食物名称、能量值和重量！")}function h(o){const e=`todayResults_${new Date().toDateString()}`;let u=JSON.parse(localStorage.getItem(e))||[];u.push(o),s.value=u,localStorage.setItem(e,JSON.stringify(u))}function k(){const t=`todayResults_${new Date().toDateString()}`,e=JSON.parse(localStorage.getItem(t))||[];s.value=e}const _=E(()=>s.value.reduce((o,t)=>{const e=t.match(/能量为: ([\d.]+) kcal/);return e?o+parseFloat(e[1]):o},0).toFixed(3));function D(){localStorage.removeItem("energyResult"),localStorage.removeItem("foodName"),localStorage.removeItem("energyPer100g"),n.value=null,l.value="",r.value=870}function R(){const t=`todayResults_${new Date().toDateString()}`;localStorage.removeItem(t),s.value=[]}return(o,t)=>(g(),d("div",V,[C,a("div",null,[J,y(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),type:"text",id:"foodName",placeholder:"请输入食物名称"},null,512),[[p,l.value]])]),a("div",null,[$,y(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),type:"number",id:"energyPer100g"},null,512),[[p,r.value]])]),a("div",null,[T,y(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),type:"number",id:"weight"},null,512),[[p,v.value]])]),a("button",{onClick:I},"计算能量 (kcal)"),n.value?(g(),d("p",U,f(n.value),1)):S("",!0),a("button",{onClick:D},"清除缓存"),B,a("ul",null,[(g(!0),d(x,null,P(s.value,(e,u)=>(g(),d("li",{key:u},f(e),1))),128))]),_.value?(g(),d("p",M,"今日总能量: "+f(_.value)+" kcal",1)):S("",!0),a("button",{onClick:R},"清除今日结果")]))}},L=N(O,[["__scopeId","data-v-a0f2e45c"]]);export{L as default};
