import{_ as E}from"./DOvKjdBd.js";import{_ as S}from"./BTDpl4Pn.js";import{u as $}from"./oCia40pb.js";import{u as k,q as V}from"./B-a9KTH2.js";import{_ as B}from"./4acN9A9Y.js";import{y as L,k as M,A as u,O as o,P as v,G as b,R as F,Y as x,X as C,u as I,z as g,H as i,B as h,C as w,Z as q,_ as W}from"./Dh2Oq3Os.js";import"./p2Vt5Jlr.js";const z=_=>(q("data-v-e3339885"),_=_(),W(),_),U={class:"hi"},Y=z(()=>o("span",null,"MY plan",-1)),j={class:"layout-box"},G={class:"title-box"},H={class:"title-box_name"},Q={class:"title"},R={class:"plan-box"},X=["href"],Z={class:"title"},J={class:"plan-box"},K={__name:"plan",async setup(_){let d,f;$({title:"PLAN"});const{data:T}=([d,f]=L(()=>k("equalLink",()=>V("plan/").find())),d=await d,f(),d),p=r=>r.toLocaleString(),y=r=>(r<0?"-":"")+Math.abs(r)+"%";function N(r,n){return r=Number(r)||0,n=Number(n)||0,r<0?"progress-negative":r<n?"progress-positive":"progress-negative"}const D=M(()=>{const r=T.value||[],n=new Map;r.forEach(t=>{const s=String(t._path||"").split("/").filter(Boolean);if(s.length<2)return;const e="/"+s.slice(0,2).join("/");if(s.length===2)n.set(e,{...t,_path:e,subPlans:[]});else{if(!n.has(e)){const l=s[1].replace(/[-_]/g," ").replace(/\b\w/g,A=>A.toUpperCase());n.set(e,{title:l,_path:e,target:0,current:0,progress:0,barClass:"",displayType:t.displayType||"percent",time:null,subPlans:[]})}n.get(e).subPlans.push({...t})}});for(const t of n.values()){if((!t.target||t.target===0)&&t.subPlans.length&&(t.target=t.subPlans.reduce((e,a)=>e+(Number(a.target)||0),0)),t.current=t.current?Number(t.current):t.subPlans.reduce((e,a)=>e+(Number(a.current)||0),0),!t.displayType&&t.subPlans.length&&(t.displayType=t.subPlans[0].displayType||"percent"),!t.time&&t.subPlans.length){let e=0;t.subPlans.forEach(a=>{const l=new Date(a.time).getTime();!isNaN(l)&&l>e&&(e=l)}),t.time=e?new Date(e).toISOString():null}t.target=Number(t.target)||0,t.current=Number(t.current)||0;let s=t.target>0?t.current/t.target*100:0;t.displayType==="percent"&&s>100&&(s=100),t.progress=parseFloat(s.toFixed(2)),t.barClass=N(t.current,t.target),(t.subPlans||[]).forEach(e=>{e.target=Number(e.target)||0,e.current=Number(e.current)||0;let a=e.target>0?e.current/e.target*100:0;e.progress=parseFloat(a.toFixed(2)),e.barClass=N(e.current,e.target)})}const c=Array.from(n.values());return c.sort((t,s)=>{const e=t.time?new Date(t.time).getTime():0;return(s.time?new Date(s.time).getTime():0)-e}),c}),m=(r,n=null)=>{const c=n?n.displayType:r.displayType;return!n&&c==="percent"?{target:`SAVE ${Math.min(100,r.target)}%`,current:`NOW: ${Math.min(100,r.current)}%`}:c==="usd"?{target:`SAVE ${p(r.target)} USD`,current:`NOW: ${p(r.current)} USD`}:c==="percent"?{target:`SAVE ${p(r.target)}%`,current:`NOW: ${p(r.current)}%`}:{target:`SAVE ${p(r.target)}`,current:`NOW: ${p(r.current)}`}};return(r,n)=>{const c=E,t=S;return g(),u("main",null,[o("div",U,[o("h1",null,[v(c),b(),v(t,null,{default:F(()=>[b("PLAN")]),_:1})]),Y]),o("div",j,[(g(!0),u(x,null,C(I(D),(s,e)=>(g(),u("div",{key:e,class:"layout"},[o("div",G,[o("p",H,i(s.title),1),o("div",Q,[o("p",null,i(m(s).target),1),o("span",{class:h({"negative-color":s.barClass==="progress-negative"})},i(m(s).current),3)])]),o("div",R,[o("div",{class:h(["progress-bar",s.barClass]),style:w({width:s.progress+"%"})},[o("p",null,i(y(s.progress)),1)],6)]),(g(!0),u(x,null,C(s.subPlans,(a,l)=>(g(),u("a",{href:a._path,key:l,class:"sub-plan"},[o("div",Z,[o("p",null,i(m(a,s).target)+" - "+i(a.title),1),o("span",{class:h({"negative-color":a.barClass==="progress-negative"})},i(m(a,s).current),3)]),o("div",J,[o("div",{class:h(["progress-bar",a.barClass]),style:w({width:a.progress+"%"})},[o("p",null,i(y(a.progress)),1)],6)])],8,X))),128))]))),128))])])}}},nt=B(K,[["__scopeId","data-v-e3339885"]]);export{nt as default};
