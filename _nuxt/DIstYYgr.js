import{_ as N,u as b}from"./TP2Jmhax.js";import{a as c,I as w,c as x,q as d,J as a,a0 as y,a1 as _,D as p,_ as S,X as P,W as E,o as g,U as F,V}from"./CZxr-oIr.js";const i=v=>(F("data-v-02a60dc2"),v=v(),V(),v),C={class:"calculator"},$=i(()=>a("h1",null,"能量计算器",-1)),J=i(()=>a("label",{for:"foodName"},"食物名称: ",-1)),T=i(()=>a("label",{for:"energyPer100g"},"每100克食物的能量 (kcal): ",-1)),U=i(()=>a("label",{for:"weight"},"输入食物重量 (克): ",-1)),B={key:0},K=i(()=>a("h2",null,"今日计算结果",-1)),M={key:1},O={__name:"kcal",setup(v){b();const l=c(""),r=c(500),m=c(0),n=c(null),s=c([]);w(()=>{const o=localStorage.getItem("energyResult");o&&(n.value=o);const e=localStorage.getItem("foodName");e&&(l.value=e);const t=localStorage.getItem("energyPer100g");t&&(r.value=parseFloat(t)),h()});function I(){if(m.value>0&&r.value>0&&l.value.trim()!==""){const o=r.value/100*m.value,e=`${l.value} - 能量为: ${o.toFixed(3)} kcal`;n.value=e,localStorage.setItem("energyResult",n.value),localStorage.setItem("foodName",l.value),localStorage.setItem("energyPer100g",r.value),k(e)}else alert("请确保输入了有效的食物名称、能量值和重量！")}function k(o){const t=`todayResults_${new Date().toDateString()}`;let u=JSON.parse(localStorage.getItem(t))||[];u.push(o),s.value=u,localStorage.setItem(t,JSON.stringify(u))}function h(){const e=`todayResults_${new Date().toDateString()}`,t=JSON.parse(localStorage.getItem(e))||[];s.value=t}const f=x(()=>s.value.reduce((o,e)=>{const t=e.match(/能量为: ([\d.]+) kcal/);return t?o+parseFloat(t[1]):o},0).toFixed(3));function D(){localStorage.removeItem("energyResult"),localStorage.removeItem("foodName"),localStorage.removeItem("energyPer100g"),n.value=null,l.value="",r.value=500}function R(){const e=`todayResults_${new Date().toDateString()}`;localStorage.removeItem(e),s.value=[]}return(o,e)=>(g(),d("div",C,[$,a("div",null,[J,y(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),type:"text",id:"foodName",placeholder:"请输入食物名称"},null,512),[[_,l.value]])]),a("div",null,[T,y(a("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t),type:"number",id:"energyPer100g"},null,512),[[_,r.value]])]),a("div",null,[U,y(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),type:"number",id:"weight"},null,512),[[_,m.value]])]),a("button",{onClick:I},"计算能量 (kcal)"),n.value?(g(),d("p",B,p(l.value)+" - 能量为: "+p(n.value)+" kcal",1)):S("",!0),a("button",{onClick:D},"清除缓存"),K,a("ul",null,[(g(!0),d(P,null,E(s.value,(t,u)=>(g(),d("li",{key:u},p(t),1))),128))]),f.value?(g(),d("p",M,"今日总能量: "+p(f.value)+" kcal",1)):S("",!0),a("button",{onClick:R},"清除今日结果")]))}},W=N(O,[["__scopeId","data-v-02a60dc2"]]);export{W as default};
