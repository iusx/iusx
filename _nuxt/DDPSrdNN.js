import{_ as W}from"./vx7ZlQ3H.js";import{_ as $}from"./BWb3ThNK.js";import{u as k}from"./DtCaOt_r.js";import{u as E,q as P}from"./Dy8bBb4I.js";import{_ as V}from"./C25eHo_W.js";import{y as B,k as L,A as i,O as o,P as x,G as N,R as I,Y as C,X as T,u as q,z as u,H as l,B as h,C as w,Z as z,_ as U}from"./Dh2Oq3Os.js";import"./Btz5GwCq.js";const j=_=>(z("data-v-95cb7199"),_=_(),U(),_),Y={class:"hi"},G=j(()=>o("span",null,"MY plan",-1)),H={class:"layout-box"},O={class:"title-box"},Q={class:"title-box_name"},R={class:"title"},X={class:"plan-box"},Z=["href"],J={class:"title"},K={class:"plan-box"},tt={__name:"plan",async setup(_){let g,y;k({title:"PLAN"});const{data:A}=([g,y]=B(()=>E("equalLink",()=>P("plan/").find())),g=await g,y(),g),c=e=>e.toLocaleString(),m=e=>(e<0?"-":"")+Math.abs(e)+"%",b=(e,a)=>e<0?"progress-negative":"",S=L(()=>{const e=A.value||[],a=new Map;e.forEach(t=>{const r=String(t._path||"").split("/").filter(Boolean);if(r.length<2)return;const s="/"+r.slice(0,2).join("/");if(r.length===2)a.has(s)||a.set(s,{...t,_path:s,subPlans:[],target:t.target||100,current:t.current||0,displayType:t.displayType||"percent"});else{if(!a.has(s)){const F=r[1].replace(/[-_]/g," ").replace(/\b\w/g,M=>M.toUpperCase());a.set(s,{title:F,_path:s,target:100,current:0,progress:0,barClass:"",displayType:"percent",time:null,subPlans:[]})}const p=a.get(s),n="/"+r.slice(0,3).join("/"),f={...t,_path:n,target:Number(t.target)||100,current:Number(t.current)||0,displayType:t.displayType||p.displayType};p.subPlans.push(f)}});for(const t of a.values()){if(t.subPlans.forEach(r=>{v(r)}),t.subPlans.length>0){const r=t.subPlans.reduce((s,p)=>s+p.progress,0);t.current=r/t.subPlans.length,t.progress=parseFloat(t.current.toFixed(2))}else v(t);t._progressForWidth=Math.max(0,Math.min(t.progress,100)),t.barClass=b(t.current,t.target)}return Array.from(a.values()).sort((t,r)=>{const s=t.time?new Date(t.time).getTime():0;return(r.time?new Date(r.time).getTime():0)-s})});function v(e){e.target=Number(e.target)||100,e.current=Number(e.current)||0;let a=0;e.target>0&&(a=e.current/e.target*100,e.displayType==="percent"&&(a=Math.min(a,100))),e.progress=parseFloat(a.toFixed(2)),e._progressForWidth=Math.max(0,Math.min(e.progress,100)),e.barClass=b(e.current,e.target)}const D=S,d=(e,a=null)=>{const t=a?a.displayType:e.displayType,r=e.target,s=e.current;return t==="usd"?{target:`SAVE ${c(r)} USD`,current:`NOW: ${c(s)} USD`}:t==="percent"?!a&&e.subPlans&&e.subPlans.length>0?{target:`SAVE ${c(r)}%`,current:`NOW: ${c(s)}%`}:{target:`SAVE ${c(r)}%`,current:`NOW: ${c(s)}%`}:{target:`SAVE ${c(r)}`,current:`NOW: ${c(s)}`}};return(e,a)=>{const t=W,r=$;return u(),i("main",null,[o("div",Y,[o("h1",null,[x(t),N(),x(r,null,{default:I(()=>[N("PLAN")]),_:1})]),G]),o("div",H,[(u(!0),i(C,null,T(q(D),(s,p)=>(u(),i("div",{key:p,class:"layout"},[o("div",O,[o("p",Q,l(s.title),1),o("div",R,[o("p",null,l(d(s).target),1),o("span",{class:h({"negative-color":s.barClass==="progress-negative"})},l(d(s).current),3)])]),o("div",X,[o("div",{class:h(["progress-bar",s.barClass]),style:w({width:s._progressForWidth+"%"})},[o("p",null,l(m(s.progress)),1)],6)]),(u(!0),i(C,null,T(s.subPlans,(n,f)=>(u(),i("a",{href:n._path,key:f,class:"sub-plan"},[o("div",J,[o("p",null,l(d(n,s).target)+" - "+l(n.title),1),o("span",{class:h({"negative-color":n.barClass==="progress-negative"})},l(d(n,s).current),3)]),o("div",K,[o("div",{class:h(["progress-bar",n.barClass]),style:w({width:n._progressForWidth+"%"})},[o("p",null,l(m(n.progress)),1)],6)])],8,Z))),128))]))),128))])])}}},pt=V(tt,[["__scopeId","data-v-95cb7199"]]);export{pt as default};
