<!DOCTYPE html><html><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Seven Languages in Seven Weeks - ritsu</title>
<meta property="og:title" content="Seven Languages in Seven Weeks">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/book/seven-languages-in-seven-weeks-bruce-a-tate/_payload.json?d90db294-fbea-4072-8341-d6777bd10b3e">
<style>@font-face{font-family:swiper-icons;font-style:normal;font-weight:400;src:url("data:application/font-woff;charset=utf-8;base64, d09GRgABAAAAAAZgABAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAGRAAAABoAAAAci6qHkUdERUYAAAWgAAAAIwAAACQAYABXR1BPUwAABhQAAAAuAAAANuAY7+xHU1VCAAAFxAAAAFAAAABm2fPczU9TLzIAAAHcAAAASgAAAGBP9V5RY21hcAAAAkQAAACIAAABYt6F0cBjdnQgAAACzAAAAAQAAAAEABEBRGdhc3AAAAWYAAAACAAAAAj//wADZ2x5ZgAAAywAAADMAAAD2MHtryVoZWFkAAABbAAAADAAAAA2E2+eoWhoZWEAAAGcAAAAHwAAACQC9gDzaG10eAAAAigAAAAZAAAArgJkABFsb2NhAAAC0AAAAFoAAABaFQAUGG1heHAAAAG8AAAAHwAAACAAcABAbmFtZQAAA/gAAAE5AAACXvFdBwlwb3N0AAAFNAAAAGIAAACE5s74hXjaY2BkYGAAYpf5Hu/j+W2+MnAzMYDAzaX6QjD6/4//Bxj5GA8AuRwMYGkAPywL13jaY2BkYGA88P8Agx4j+/8fQDYfA1AEBWgDAIB2BOoAeNpjYGRgYNBh4GdgYgABEMnIABJzYNADCQAACWgAsQB42mNgYfzCOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDAoMBQxXjg/wEGPcYDDA4wNUA2CCgwsAAAO4EL6gAAeNpj2M0gyAACqxgGNWBkZ2D4/wMA+xkDdgAAAHjaY2BgYGaAYBkGRgYQiAHyGMF8FgYHIM3DwMHABGQrMOgyWDLEM1T9/w8UBfEMgLzE////P/5//f/V/xv+r4eaAAeMbAxwIUYmIMHEgKYAYjUcsDAwsLKxc3BycfPw8jEQA/gZBASFhEVExcQlJKWkZWTl5BUUlZRVVNXUNTQZBgMAAMR+E+gAEQFEAAAAKgAqACoANAA+AEgAUgBcAGYAcAB6AIQAjgCYAKIArAC2AMAAygDUAN4A6ADyAPwBBgEQARoBJAEuATgBQgFMAVYBYAFqAXQBfgGIAZIBnAGmAbIBzgHsAAB42u2NMQ6CUAyGW568x9AneYYgm4MJbhKFaExIOAVX8ApewSt4Bic4AfeAid3VOBixDxfPYEza5O+Xfi04YADggiUIULCuEJK8VhO4bSvpdnktHI5QCYtdi2sl8ZnXaHlqUrNKzdKcT8cjlq+rwZSvIVczNiezsfnP/uznmfPFBNODM2K7MTQ45YEAZqGP81AmGGcF3iPqOop0r1SPTaTbVkfUe4HXj97wYE+yNwWYxwWu4v1ugWHgo3S1XdZEVqWM7ET0cfnLGxWfkgR42o2PvWrDMBSFj/IHLaF0zKjRgdiVMwScNRAoWUoH78Y2icB/yIY09An6AH2Bdu/UB+yxopYshQiEvnvu0dURgDt8QeC8PDw7Fpji3fEA4z/PEJ6YOB5hKh4dj3EvXhxPqH/SKUY3rJ7srZ4FZnh1PMAtPhwP6fl2PMJMPDgeQ4rY8YT6Gzao0eAEA409DuggmTnFnOcSCiEiLMgxCiTI6Cq5DZUd3Qmp10vO0LaLTd2cjN4fOumlc7lUYbSQcZFkutRG7g6JKZKy0RmdLY680CDnEJ+UMkpFFe1RN7nxdVpXrC4aTtnaurOnYercZg2YVmLN/d/gczfEimrE/fs/bOuq29Zmn8tloORaXgZgGa78yO9/cnXm2BpaGvq25Dv9S4E9+5SIc9PqupJKhYFSSl47+Qcr1mYNAAAAeNptw0cKwkAAAMDZJA8Q7OUJvkLsPfZ6zFVERPy8qHh2YER+3i/BP83vIBLLySsoKimrqKqpa2hp6+jq6RsYGhmbmJqZSy0sraxtbO3sHRydnEMU4uR6yx7JJXveP7WrDycAAAAAAAH//wACeNpjYGRgYOABYhkgZgJCZgZNBkYGLQZtIJsFLMYAAAw3ALgAeNolizEKgDAQBCchRbC2sFER0YD6qVQiBCv/H9ezGI6Z5XBAw8CBK/m5iQQVauVbXLnOrMZv2oLdKFa8Pjuru2hJzGabmOSLzNMzvutpB3N42mNgZGBg4GKQYzBhYMxJLMlj4GBgAYow/P/PAJJhLM6sSoWKfWCAAwDAjgbRAAB42mNgYGBkAIIbCZo5IPrmUn0hGA0AO8EFTQAA")}:root{--swiper-theme-color:#007aff}:host{display:block;margin-left:auto;margin-right:auto;position:relative;z-index:1}.swiper{display:block;list-style:none;margin-left:auto;margin-right:auto;overflow:hidden;overflow:clip;padding:0;position:relative;z-index:1}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{box-sizing:content-box;display:flex;height:100%;position:relative;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);width:100%;z-index:1}.swiper-android .swiper-slide,.swiper-ios .swiper-slide,.swiper-wrapper{transform:translateZ(0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}.swiper-slide{display:block;flex-shrink:0;height:100%;position:relative;transition-property:transform;width:100%}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden .swiper-slide{backface-visibility:hidden;transform:translateZ(0)}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d .swiper-slide{transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper:before{content:"";flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered>.swiper-wrapper>.swiper-slide{scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper>.swiper-slide:first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper:before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper>.swiper-slide:first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper:before{height:var(--swiper-centered-offset-after);min-width:1px;width:100%}.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-bottom,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top{height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:10}.swiper-3d .swiper-slide-shadow{background:rgba(0,0,0,.15)}.swiper-3d .swiper-slide-shadow-left{background-image:linear-gradient(270deg,rgba(0,0,0,.5),transparent)}.swiper-3d .swiper-slide-shadow-right{background-image:linear-gradient(90deg,rgba(0,0,0,.5),transparent)}.swiper-3d .swiper-slide-shadow-top{background-image:linear-gradient(0deg,rgba(0,0,0,.5),transparent)}.swiper-3d .swiper-slide-shadow-bottom{background-image:linear-gradient(180deg,rgba(0,0,0,.5),transparent)}.swiper-lazy-preloader{border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top:4px solid transparent;box-sizing:border-box;height:42px;left:50%;margin-left:-21px;margin-top:-21px;position:absolute;top:50%;transform-origin:50%;width:42px;z-index:10}.swiper-watch-progress .swiper-slide-visible .swiper-lazy-preloader,.swiper:not(.swiper-watch-progress) .swiper-lazy-preloader{animation:swiper-preloader-spin 1s linear infinite}.swiper-lazy-preloader-white{--swiper-preloader-color:#fff}.swiper-lazy-preloader-black{--swiper-preloader-color:#000}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}</style>
<style>.swiper .swiper-notification{left:0;opacity:0;pointer-events:none;position:absolute;top:0;z-index:-1000}</style>
<style>.swiper-cards{overflow:visible}.swiper-cards .swiper-slide{backface-visibility:hidden;overflow:hidden;transform-origin:center bottom}</style>
<style>.swiper-creative .swiper-slide{backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}</style>
<style>.swiper-cube{overflow:visible}.swiper-cube .swiper-slide{backface-visibility:hidden;height:100%;pointer-events:none;transform-origin:0 0;visibility:hidden;width:100%;z-index:1}.swiper-cube .swiper-slide .swiper-slide{pointer-events:none}.swiper-cube.swiper-rtl .swiper-slide{transform-origin:100% 0}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-next,.swiper-cube .swiper-slide-prev{pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{bottom:0;height:100%;left:0;opacity:.6;position:absolute;width:100%;z-index:0}.swiper-cube .swiper-cube-shadow:before{background:#000;bottom:0;content:"";filter:blur(50px);left:0;position:absolute;right:0;top:0}.swiper-cube .swiper-slide-next+.swiper-slide{pointer-events:auto;visibility:visible}.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-bottom,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-left,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-right,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-top{backface-visibility:hidden;z-index:0}</style>
<style>.swiper-fade.swiper-free-mode .swiper-slide{transition-timing-function:ease-out}.swiper-fade .swiper-slide{pointer-events:none;transition-property:opacity}.swiper-fade .swiper-slide .swiper-slide{pointer-events:none}.swiper-fade .swiper-slide-active,.swiper-fade .swiper-slide-active .swiper-slide-active{pointer-events:auto}</style>
<style>.swiper-flip{overflow:visible}.swiper-flip .swiper-slide{backface-visibility:hidden;pointer-events:none;z-index:1}.swiper-flip .swiper-slide .swiper-slide{pointer-events:none}.swiper-flip .swiper-slide-active,.swiper-flip .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-bottom,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-left,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-right,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-top{backface-visibility:hidden;z-index:0}</style>
<style>.swiper-free-mode>.swiper-wrapper{margin:0 auto;transition-timing-function:ease-out}</style>
<style>.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-direction:column;flex-wrap:wrap}</style>
<style>:root{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{align-items:center;color:var(--swiper-navigation-color,var(--swiper-theme-color));cursor:pointer;display:flex;height:var(--swiper-navigation-size);justify-content:center;margin-top:calc(0px - var(--swiper-navigation-size)/2);position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/44*27);z-index:10}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{cursor:auto;opacity:.35;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{cursor:auto;opacity:0;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{height:100%;-o-object-fit:contain;object-fit:contain;transform-origin:center;width:100%}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-lock{display:none}.swiper-button-next:after,.swiper-button-prev:after{font-family:swiper-icons;font-size:var(--swiper-navigation-size);font-variant:normal;letter-spacing:0;line-height:1;text-transform:none!important}.swiper-button-prev:after,.swiper-rtl .swiper-button-next:after{content:"prev"}.swiper-button-next,.swiper-rtl .swiper-button-prev{left:auto;right:var(--swiper-navigation-sides-offset,10px)}.swiper-button-next:after,.swiper-rtl .swiper-button-prev:after{content:"next"}</style>
<style>.swiper-pagination{position:absolute;text-align:center;transform:translateZ(0);transition:opacity .3s;z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);left:0;top:var(--swiper-pagination-top,auto);width:100%}.swiper-pagination-bullets-dynamic{font-size:0;overflow:hidden}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{position:relative;transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active,.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{background:var(--swiper-pagination-bullet-inactive-color,#000);border-radius:var(--swiper-pagination-bullet-border-radius,50%);display:inline-block;height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));opacity:var(--swiper-pagination-bullet-inactive-opacity,.2);width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px))}button.swiper-pagination-bullet{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;box-shadow:none;margin:0;padding:0}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{background:var(--swiper-pagination-color,var(--swiper-theme-color));opacity:var(--swiper-pagination-bullet-opacity,1)}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{left:var(--swiper-pagination-left,auto);right:var(--swiper-pagination-right,8px);top:50%;transform:translate3d(0,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{display:block;margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:transform .2s,top .2s}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:transform .2s,left .2s}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:transform .2s,right .2s}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));height:100%;left:0;position:absolute;top:0;transform:scale(0);transform-origin:left top;width:100%}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0;width:100%}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{height:100%;left:0;top:0;width:var(--swiper-pagination-progressbar-size,4px)}.swiper-pagination-lock{display:none}</style>
<style>.swiper-scrollbar{background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1));border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{bottom:var(--swiper-scrollbar-bottom,4px);height:var(--swiper-scrollbar-size,4px);left:var(--swiper-scrollbar-sides-offset,1%);position:absolute;top:var(--swiper-scrollbar-top,auto);width:calc(100% - var(--swiper-scrollbar-sides-offset, 1%)*2);z-index:50}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{height:calc(100% - var(--swiper-scrollbar-sides-offset, 1%)*2);left:var(--swiper-scrollbar-left,auto);position:absolute;right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);width:var(--swiper-scrollbar-size,4px);z-index:50}.swiper-scrollbar-drag{background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);height:100%;left:0;position:relative;top:0;width:100%}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}</style>
<style>.swiper-virtual .swiper-slide{-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper:after{content:"";left:0;pointer-events:none;position:absolute;top:0}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper:after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper:after{height:var(--swiper-virtual-size);width:1px}</style>
<style>.swiper-zoom-container{align-items:center;display:flex;height:100%;justify-content:center;text-align:center;width:100%}.swiper-zoom-container>canvas,.swiper-zoom-container>img,.swiper-zoom-container>svg{max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain}.swiper-slide-zoomed{cursor:move;touch-action:none}</style>
<style>.icon[data-v-2b6644a8]{display:inline-block;vertical-align:middle}</style>
<style>main[data-v-252d81c6]{background-image:url(/img/page/drag.png);background-repeat:no-repeat;background:#000;border-left:3px solid #38e7cd;box-shadow:-1px 0 0 0 #38e7cd;cursor:pointer;position:fixed;right:0;top:30%!important;width:-moz-fit-content;width:fit-content;z-index:11}a[data-v-252d81c6],main[data-v-252d81c6]{color:#fff}a[data-v-252d81c6]{display:block;filter:grayscale(100%);font-size:small;margin:10px;opacity:.5;text-decoration:none;transition:filter .3s ease,opacity .3s ease}.active[data-v-252d81c6],a[data-v-252d81c6]:hover{filter:brightness(1);opacity:1}</style>
<style>@import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap");.main-con li,.main-con li a{color:#888}.main-con table{margin-bottom:15px;margin-top:15px;width:100%!important}.main-con table thead{background:hsla(0,0%,96%,.58)}.main-con table tr th{color:#888;font-size:16px;font-weight:inherit;padding:7px;text-align:inherit}.main-con table td{color:#888;font-size:15px;padding:7px}.main-con tbody a{color:#989898;transition:color .3s ease}.main-con p a,.main-con tbody a{text-decoration:underline}.dark-mode table thead{background:hsla(0,0%,96%,.071);color:#6d6d6d}.dark-mode table td{color:#8f8f8f}.dark-mode body{background:#000}.dark-mode body li a{color:#888}@font-face{font-family:tsing;src:url(/tsing.ttf)}body{font-family:Roboto,sans-serif;height:100%;margin:0;padding:0;width:100%}.dark-mode .content img,.dark-mode .page-content{filter:brightness(70%)}.text p{font-size:15px;line-height:1.6}.tips{z-index:10}.page-sec .swiper-slide{height:300px!important;width:300px!important}.ref a{color:#888;text-transform:none}.ref a,.text h3 a{text-decoration:none}.text h3 a{color:#000}.dark-mode .text h3 a{color:#fff}.dark-mode .ref a{color:#a2a2a2!important}html::-webkit-scrollbar{width:1px}html::-webkit-scrollbar-track{background-color:hsla(0,0%,100%,0)}html::-webkit-scrollbar-thumb{background:#000;border-radius:25px}.markdown-content h1,h2,h3,h4,h5,h6{color:rgba(0,0,0,.189);font-size:0;text-transform:uppercase}.markdown-content hr{border-color:hsla(0,0%,100%,.42);margin:100px}.dark-mode .markdown-content pre,.markdown-content code{border:1px solid #363636!important}.dark-mode .markdown-content img{opacity:.7}.dark-mode .markdown-content hr{border-color:hsla(0,0%,43%,.502)}.markdown-content{padding-bottom:100px;padding-top:40px}.markdown-content li,.markdown-content ul{font-size:15px;margin:0!important}@media (max-width:1024px){.markdown-content{padding-top:100px}}.markdown-content table tr:hover{background:hsla(0,0%,96%,.58)}.dark-mode table tr:hover{background:hsla(0,0%,96%,.071)}@media (prefers-color-scheme:dark){.markdown-content strong,b{color:#fff!important}.markdown-content pre{border:1px solid #444!important}.markdown-content .MathJax{color:#fff}}.markdown-content{display:block;max-width:100%}.markdown-content blockquote{margin:0;padding:12px}.markdown-content b,.markdown-content strong{color:#000}.markdown-content *,.markdown-content :after,.markdown-content :before{box-sizing:border-box}.markdown-content code,.markdown-content pre{border:1px solid #cdcdcd!important;display:block;line-height:1.5;margin:.5em 0;max-width:100%;min-width:0;overflow:auto;padding:1em;width:100%;word-wrap:break-word}.markdown-content pre::-webkit-scrollbar{height:10px}.markdown-content pre::-webkit-scrollbar-track{background:transition}.markdown-content pre::-webkit-scrollbar-thumb{background-color:#666}.markdown-content pre::-webkit-scrollbar-thumb:hover{background-color:#999}.markdown-content code{color:#1e6eb2;display:contents;padding-left:2px;padding-right:2px}.markdown-content pre code{color:#000}.dark-mode .markdown-content pre code{color:#a0a0a0}.markdown-content ol{color:#888;font-size:15px;line-height:2}.markdown-content{display:inline-grid;min-width:100%;width:100%}.markdown-content p{display:block;word-wrap:break-word;color:#888;font-size:15px;margin:0;margin-block:1vw;padding:0}.markdown-content p:last-child{margin-bottom:0}@media (max-width:1024px){.markdown-content p{margin-block:4vw}}.markdown-content b,.markdown-content div,.markdown-content li,.markdown-content main,.markdown-content mjx-container,.markdown-content ol,.markdown-content p,.markdown-content pre,.markdown-content span,.markdown-content table{border-left:1px solid transparent}.markdown-content b:hover,.markdown-content div:hover,.markdown-content li:hover,.markdown-content main:hover,.markdown-content mjx-container:hover,.markdown-content ol:hover,.markdown-content p:hover,.markdown-content pre:hover,.markdown-content span:hover,.markdown-content table:hover{border-left:1px solid #38e7cd!important}.markdown-content .MathJax{display:inline-block;max-width:100%;overflow-x:auto;word-wrap:break-word;box-sizing:border-box;white-space:normal}@media (max-width:768px){.markdown-content table,.markdown-content tbody,.markdown-content td,.markdown-content th,.markdown-content thead,.markdown-content tr{display:block;width:100%}.markdown-content tr{border:1px solid rgba(61,61,61,.161);margin-bottom:15px}}.dark-mode .markdown-content h1{color:hsla(0,0%,100%,.588)}.dark-mode tr{border:1px solid #373737}.cve-info{border-top:1px solid #e4e4e4;padding:12px}.cve-info p{margin:0;margin-top:0!important;padding-top:0!important}.dark-mode .cve-info{border-top:1px solid hsla(0,0%,100%,.18)}.markdown-content iframe{margin-bottom:30px;margin-top:30px}.markdown-content .tip{overflow:auto!important;word-wrap:break-word!important;display:block!important;max-width:100%!important}.markdown-content .ref{font-size:15px;line-height:1.8;overflow-wrap:anywhere;padding:8px 0;word-break:break-all}.markdown-content .ref li,.markdown-content .ref ul{list-style:none;margin:0;padding:0}.markdown-content .ref a{color:#2274a5;display:inline;overflow-wrap:anywhere;text-decoration:underline;word-break:break-all}.page-content .text hr{display:block;margin-bottom:50px;margin-top:50px;width:80%}.dark-mode .page-content .text hr{border-color:#4d4d4d}@font-face{font-family:Tsing;src:url(/Tsing.woff2) format("woff2"),url(/Tsing.woff) format("woff"),url(/Tsing.ttf) format("truetype")}@keyframes fadeIn{0%{opacity:0;visibility:hidden}to{opacity:1;visibility:visible}}#app{animation:fadeIn 2s 1s forwards;opacity:0;visibility:hidden}</style>
<style>p a{color:#989898;text-decoration:none;transition:color .3s ease}p a:hover{color:#38e7cd}</style>
<style>.book-table[data-v-9c8c63c3]{background:#fff!important;width:85vw!important}.dark-mode .book-table[data-v-9c8c63c3]{background:#000!important}@keyframes loading-9c8c63c3{0%,to{opacity:1}50%{opacity:.5}}.no-img[data-v-9c8c63c3]{animation:loading-9c8c63c3 1.5s infinite;aspect-ratio:54/71;background-color:#f2f2f2}.dark-mode .no-img[data-v-9c8c63c3]{background-color:#1d1d1d}@media (max-width:1024px){.pc[data-v-9c8c63c3]{display:none}}.pop-close[data-v-9c8c63c3]{color:#000;font-family:tsing;font-weight:700;position:absolute;right:10px}.dark-mode .pop-close[data-v-9c8c63c3]{color:#fff}.more[data-v-9c8c63c3]{color:#999;cursor:pointer;font-family:tsing;transform:rotate(90deg)}.dark-mode .an[data-v-9c8c63c3]{background:hsla(0,0%,100%,.122)}.an[data-v-9c8c63c3]{display:none}@media (max-width:1024px){.an[data-v-9c8c63c3]{background:#f0f0f0;display:block;font-size:1.3vh;font-weight:700;height:100%;left:0;padding:8px;position:fixed;width:10px;z-index:9999}}.book-info[data-v-9c8c63c3]{height:100vh;overflow:auto;padding-right:1vw;position:fixed;width:21vw;z-index:99999999}.book-info img[data-v-9c8c63c3]{width:100%}@media (max-width:1024px){.book-info img[data-v-9c8c63c3]{width:50%}}.book-info .book-info-author[data-v-9c8c63c3]{align-items:center;color:#7f7f7f;display:flex;font-size:15px;justify-content:space-between}.book-info .book-info-author span[data-v-9c8c63c3]{text-transform:uppercase}.book-info .title p[data-v-9c8c63c3]{font-size:23px;margin:0 0 5px}.book-info .title span[data-v-9c8c63c3]{color:rgba(0,0,0,.593);font-size:1.9vh}.book-info .dir-layout .title[data-v-9c8c63c3]{border:1px solid #000;color:#000;display:block;font-size:11px;margin-bottom:12px;margin-top:15px;padding:8px;text-transform:uppercase;width:-moz-fit-content;width:fit-content}.dark-mode .book-info .title span[data-v-9c8c63c3]{color:hsla(0,0%,100%,.59)}.dark-mode .book-info .title p[data-v-9c8c63c3]{color:#b3b3b3}.dark-mode .book-info img[data-v-9c8c63c3]{opacity:.7}.dark-mode .book-info .dir-layout .title[data-v-9c8c63c3]{border:1px solid #fff;color:#fff}.dark-mode .dir-layout[data-v-9c8c63c3]{opacity:.8}.book-info[data-v-9c8c63c3]::-webkit-scrollbar{cursor:pointer!important;height:10px;width:10px}.book-info[data-v-9c8c63c3]::-webkit-scrollbar-track{background-color:hsla(0,0%,100%,0);cursor:pointer!important}.book-info[data-v-9c8c63c3]::-webkit-scrollbar-thumb{border:1px solid rgba(0,0,0,.197);cursor:pointer!important;-webkit-transition:background .5s ease;transition:background .5s ease}.book-info[data-v-9c8c63c3]::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.068);cursor:pointer!important}.dark-mode .book-info[data-v-9c8c63c3]::-webkit-scrollbar-thumb{border:1px solid hsla(0,0%,100%,.238)}.dark-mode .book-info[data-v-9c8c63c3]::-webkit-scrollbar-thumb:hover{background-color:hsla(0,0%,100%,.068)}@-moz-document url-prefix(){.book-info[data-v-9c8c63c3]{scrollbar-color:rgba(0,0,0,.197) transparent;scrollbar-width:thin}.dark-mode .book-info[data-v-9c8c63c3]{scrollbar-color:hsla(0,0%,100%,.238) transparent}}.main-con[data-v-9c8c63c3]{margin-left:25vw}@media (max-width:1024px){.main-con[data-v-9c8c63c3]{margin-left:0}}main[data-v-9c8c63c3]{margin:0 auto;overflow-x:hidden;overflow:visible;width:85%}.layout[data-v-9c8c63c3]{display:flex}table[data-v-9c8c63c3]{width:100%}</style>
<style>ul[data-v-e205a500]{list-style:none;padding:0}ul li[data-v-e205a500]{align-items:center;display:flex;justify-content:space-between;margin:10.8px 2px;max-width:100%}li[data-v-e205a500]{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='930' height='1' fill='none'%3E%3Cpath stroke='%23D7D7D7' d='M.5.5H930'/%3E%3C/svg%3E") no-repeat 50%}a[data-v-e205a500]{align-items:center;background:#fff;color:#000;display:flex;font-size:14px;padding-right:.6vw;text-decoration:none;width:-moz-max-content;width:max-content}a[data-v-e205a500]:before{border:1px solid #000;content:"";display:block;height:.7vh;margin-left:1px;margin-right:.9vh;transform:rotate(45deg);width:.7vh}.dark-mode a[data-v-e205a500]{background:#000;color:#898989}.dark-mode a[data-v-e205a500]:before{border:1px solid #898989}span[data-v-e205a500]:before{background-color:#fff;border:1px solid #000;transform:rotate(45deg)}.no[data-v-e205a500]:before,span[data-v-e205a500]:before{content:"";display:block;height:.7vh;width:.7vh}.no[data-v-e205a500]:before{background-color:#d7d7d7;border-radius:100%;margin:0!important;padding:0!important}</style>
<style>.text-title-color p[data-v-f0803dcc]{color:#3f3f3f!important;position:relative;z-index:-1}.title[data-v-f0803dcc]{font-size:20px!important}.h2[data-v-f0803dcc]{font-size:17px;margin-top:130px;opacity:.8}.dark-mode .text-title-color p[data-v-f0803dcc]{color:#fff!important}</style>
<style>main[data-v-2de78ab7]{display:flex;flex-direction:row-reverse;gap:12px;margin-bottom:15px;margin-top:15px;width:100%}main img[data-v-2de78ab7],main p[data-v-2de78ab7]{max-width:50%}</style>
<style>.text-tip{background:hsla(0,0%,96%,.58);border-left:1px solid #888;padding:7px}.text-tip li,.text-tip p{color:#888;font-size:13px;margin-bottom:0!important;width:-moz-fit-content;width:fit-content}.text-tip p:first-child{color:#888;margin-top:0}.text-tip ol li{color:#888;font-size:13px}.text-tip ul:last-child{margin-bottom:0}.dark-mode .text-tip{background:hsla(0,0%,96%,.071)}.big{align-content:center;align-items:center;display:flex;flex-direction:column;font-style:oblique;padding:13px}.big p{font-size:15px}</style>
<style>pre code .line{display:block;min-height:1rem}</style>
<style>.tip[data-v-5afc3f96]{background:#fafafa;margin-bottom:1.2vh;margin-top:1.2vh;padding:1vh}.tip .tip-quto[data-v-5afc3f96]{opacity:.1}.dark-mode .tip[data-v-5afc3f96]{background:#121212}.dark-mode .tip .tip-quto[data-v-5afc3f96]{opacity:1;stroke:#575757}.dark-mode .page-tips-main[data-v-5afc3f96]{color:#5c5c5c}.page-tips-main[data-v-5afc3f96]{color:silver;display:flex;flex-direction:row-reverse;font-size:13px;width:100%}@media (max-width:1440px){.page-tips-main[data-v-5afc3f96]{flex-direction:column!important}.page-tips-main div[data-v-5afc3f96]{width:100%!important}}.page-tips-main .img[data-v-5afc3f96]{padding-bottom:1vw;padding-top:1vw;width:100%}.page-tips-main div[data-v-5afc3f96]{min-width:40%;padding-right:1.3vw;width:40%}.layout[data-v-5afc3f96]{text-align:left}a[data-v-5afc3f96]{text-decoration:none}a[data-v-5afc3f96]:hover{opacity:.7}</style>
<style>@import url("https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap");.dark-mode p[data-v-0d8bf124]{background:#121212!important}.dark-mode .wise-layout[data-v-0d8bf124]{border:1px solid #202020}.wise-layout[data-v-0d8bf124]{align-items:stretch;border:1px solid #e1e1e1;display:flex;flex-direction:column;margin-bottom:20px;margin-top:20px;width:100%}.wise-layout p[data-v-0d8bf124]{align-items:flex-start;background:#fafafa;display:flex;gap:12px;justify-content:space-between;margin:0 0 12px;padding:12px;text-transform:capitalize}.wise-layout .content[data-v-0d8bf124]{font-size:17px;padding:12px}.wise-layout .by[data-v-0d8bf124],.wise-layout .content[data-v-0d8bf124]{color:#888;font-family:"Noto Serif SC",serif;font-style:oblique}.wise-layout .by[data-v-0d8bf124]{align-items:center;display:flex;justify-content:flex-end;padding:0 12px 12px 0;text-transform:capitalize}.wise-layout .by[data-v-0d8bf124]:before{background:#888;content:"";display:block;height:1px;width:30px}.tip-quto[data-v-0d8bf124]{opacity:.1}.dark-mode .tip-quto[data-v-0d8bf124]{opacity:1;stroke:#575757}</style>
<link rel="stylesheet" href="/_nuxt/entry.Bmm7AsW8.css">
<link rel="stylesheet" href="/_nuxt/swiper-vue.Bs3d9ZnH.css">
<link rel="stylesheet" href="/_nuxt/ProseCode.CchFRBtv.css">
<link rel="stylesheet" href="/_nuxt/pageImage.Crl-SW0b.css">
<link rel="stylesheet" href="/_nuxt/anSkeleton.CCRT7w04.css">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DIw-05zE.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dh2Oq3Os.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BbD8Bz_e.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BVqQ6Gnl.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CXZ0CKks.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BMGtaydK.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BsYmvPZw.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DHFmAq2r.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D26258OM.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DKb-_EYB.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DnqFm2ps.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/2HF6aoV0.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BbdE-Dxj.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/UWfRwEDn.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B3nWpYBq.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Bl2pBuoH.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DiKEPq2f.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/QSfRJ5CZ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B4xKZBXF.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DQpClTJx.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DCC1lpJ8.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/tkeZ-f5N.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/wiAmPTAc.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CJqkgNRb.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DdVqy8lc.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Ci64_liC.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/GP9k0AMC.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CaOP0BnG.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/COBlpLZe.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/fhZojLBH.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BX10Bdy0.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/hyzuWz_7.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B44cA07S.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Q5b8De_c.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DSBYDPGf.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/6nJPBpQk.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BqMuhcGT.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D6l-XlGY.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CFXVWbC3.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BMlOTGxG.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/tO27PEaL.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DPYuL8Tk.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BeiZPP6C.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BzkfX-TW.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Y_YcYfJL.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CZJF8oHs.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/t6gUFS2O.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DUdchfkF.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BL_wtMKj.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/cH8SIAvR.js">
<script type="module" src="/_nuxt/DIw-05zE.js" crossorigin></script><script>"use strict";(()=>{const a=window,e=document.documentElement,c=window.localStorage,d=["dark","light"],n=c&&c.getItem&&c.getItem("nuxt-color-mode")||"system";let l=n==="system"?f():n;const i=e.getAttribute("data-color-mode-forced");i&&(l=i),r(l),a["__NUXT_COLOR_MODE__"]={preference:n,value:l,getColorScheme:f,addColorScheme:r,removeColorScheme:u};function r(o){const t=""+o+"-mode",s="";e.classList?e.classList.add(t):e.className+=" "+t,s&&e.setAttribute("data-"+s,o)}function u(o){const t=""+o+"-mode",s="";e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(t,"g"),""),s&&e.removeAttribute("data-"+s)}function m(o){return a.matchMedia("(prefers-color-scheme"+o+")")}function f(){if(a.matchMedia&&m("").media!=="not all"){for(const o of d)if(m(":"+o).matches)return o}return"light"}})();
</script></head><body><div id="__nuxt"><div id="app"><main style="left:undefinedpx;top:300px;" data-v-252d81c6><a href="/" class="" data-v-252d81c6><svg width="30px" height="30px" viewbox="0 0 377 377" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-252d81c6 data-v-2b6644a8><path d="M103.573 52.0809C150.403 73.845 213.761 107.663 240.964 125.074C251.982 132.106 261.624 137.463 262.313 136.793C263.001 136.124 259.214 129.427 253.704 122.061C242.341 106.659 220.992 89.2473 197.921 76.1888C181.393 67.1484 82.5683 34 71.8938 34C68.4504 34 82.9126 42.036 103.573 52.0809Z" fill="#38E7CD"></path><path d="M109.495 124.428C104.353 126.796 86.9969 136.267 70.9266 145.345L42 162.71L83.7828 165.473C123.959 168.235 206.239 163.105 234.844 156.395L247.7 153.238L238.058 148.502C202.703 130.348 129.423 116.534 109.495 124.428Z" fill="#38E7CD"></path><path d="M266.6 179.748C260.021 200.51 261.406 239.398 269.024 255.876C275.258 269.388 306.769 310.912 326.854 332.663L335.857 342.55L333.78 322.776C330.663 295.752 317.158 244.012 306.769 218.965C298.112 199.192 276.989 166.236 272.834 166.236C271.795 166.236 269.024 172.168 266.6 179.748Z" fill="#38E7CD"></path><path d="M230.474 169.451C208.841 173.38 195.718 178.292 181.177 188.116C163.09 200.56 159.543 212.349 159.543 258.193L159.898 298.471L177.631 280.461C209.195 248.697 262.393 178.292 262.393 168.468C262.393 165.194 251.754 165.521 230.474 169.451Z" fill="#38E7CD"></path><path d="M103.573 52.0809C150.403 73.845 213.761 107.663 240.964 125.074C251.982 132.106 261.624 137.463 262.313 136.793C263.001 136.124 259.214 129.427 253.704 122.061C242.341 106.659 220.992 89.2473 197.921 76.1888C181.393 67.1484 82.5683 34 71.8938 34C68.4504 34 82.9126 42.036 103.573 52.0809Z" fill="#38E7CD"></path><path d="M109.495 124.428C104.353 126.796 86.9969 136.267 70.9266 145.345L42 162.71L83.7828 165.473C123.959 168.235 206.239 163.105 234.844 156.395L247.7 153.238L238.058 148.502C202.703 130.348 129.423 116.534 109.495 124.428Z" fill="#38E7CD"></path><path d="M266.6 179.748C260.021 200.51 261.406 239.398 269.024 255.876C275.258 269.388 306.769 310.912 326.854 332.663L335.857 342.55L333.78 322.776C330.663 295.752 317.158 244.012 306.769 218.965C298.112 199.192 276.989 166.236 272.834 166.236C271.795 166.236 269.024 172.168 266.6 179.748Z" fill="#38E7CD"></path><path d="M230.474 169.451C208.841 173.38 195.718 178.292 181.177 188.116C163.09 200.56 159.543 212.349 159.543 258.193L159.898 298.471L177.631 280.461C209.195 248.697 262.393 178.292 262.393 168.468C262.393 165.194 251.754 165.521 230.474 169.451Z" fill="#38E7CD"></path></svg></a><a href="/des" class="" data-v-252d81c6><svg width="30px" height="30px" viewbox="0 0 81 81" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-252d81c6 data-v-2b6644a8><g clip-path="url(#clip0_290_333)"><path d="M54.45 45.34L58.99 35.51L39.5 17L20 35.51L24.62 45.44C26.06 48.53 26.34 52.02 25.43 55.3L23.51 62.2L27.45 63.29L29.37 56.39C30.54 52.17 30.17 47.68 28.33 43.71L24.77 36.05L37.87 23.33V43.25H41.37V23.57L54.24 36.06L50.75 43.63C48.89 47.66 48.55 52.23 49.79 56.5L51.78 63.32L55.7 62.17L53.71 55.35C52.74 52.03 53.01 48.48 54.46 45.34H54.45Z" fill="#38E7CD"></path></g><defs><clipPath id="clip0_290_333"><rect width="39" height="46.31" fill="white" transform="translate(20 17)"></rect></clipPath></defs></svg></a><a href="/sec" class="" data-v-252d81c6><svg width="30px" height="30px" viewbox="0 0 81 82" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-252d81c6 data-v-2b6644a8><g clip-path="url(#clip0_228_306)"><path d="M37.706 64.6439C37.9707 64.7523 38.2372 64.8562 38.5055 64.9555L38.5328 64.9664L38.5445 64.9722L38.5681 64.9805L38.5898 64.9892L38.6063 64.9939L39.2526 65.2204L39.5833 65.3363L39.9141 65.2204L40.5601 64.994L40.5623 64.9932L41.5062 64.6624L41.4935 64.6264C44.585 63.3499 47.5036 61.6871 50.1793 59.6771L50.1827 59.6745C54.9221 56.0824 60.1667 50.173 60.1667 41.6383V25.8542V25.1447L59.497 24.9103L39.9137 18.0561L39.5833 17.9405L39.253 18.0561L19.6696 24.9103L19 25.1447V25.8542V41.6403C19 50.1751 24.2487 56.0845 28.9819 59.6725L28.9851 59.6748C31.6694 61.6933 34.5991 63.3627 37.704 64.643L37.706 64.6439ZM39.5826 59.0168C37.0863 57.9521 34.7271 56.59 32.5562 54.9598C28.4831 51.8692 24.9167 47.4979 24.9167 41.6383V29.3445L39.5833 24.2111L54.25 29.3445V41.6383C54.25 47.4984 50.6829 51.8737 46.6105 54.9578C44.4392 56.5887 42.0794 57.9515 39.5826 59.0168Z" fill="#38E7CD" stroke="black" stroke-width="2"></path></g><defs><clipPath id="clip0_228_306"><rect width="47" height="47" fill="white" transform="translate(17 19)"></rect></clipPath></defs></svg></a><a href="/book" class="" data-v-252d81c6><svg width="30px" height="30px" viewbox="0 0 81 81" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-252d81c6 data-v-2b6644a8><path d="M58.3589 17.5963C57.9742 17.2123 57.4514 17 56.9089 17H46.7003C45.2602 17 43.8399 17.3335 42.5577 17.9703C41.3642 18.5667 40.3187 19.4056 39.4803 20.4467C37.7936 18.3443 35.1897 17 32.2701 17H22.0516C21.5091 17 20.9863 17.2123 20.6017 17.5963C20.217 17.9804 20 18.506 20 19.0518V58.36C20 58.9058 20.217 59.4314 20.6017 59.8155C20.9863 60.1996 21.5091 60.4118 22.0516 60.4118H32.8915C33.5721 60.4118 34.2428 60.5432 34.8741 60.806C35.5053 61.0688 36.0675 61.4428 36.5508 61.9178L38.0501 63.4037C38.4347 63.7877 38.9575 64 39.5 64C40.0425 64 40.5652 63.7877 40.9499 63.4037L42.4492 61.9178C42.9325 61.4428 43.4947 61.0587 44.1259 60.806C44.7572 60.5432 45.4279 60.4118 46.1085 60.4118H56.9484C57.4909 60.4118 58.0137 60.1996 58.3983 59.8155C58.783 59.4314 59 58.9058 59 58.36V19.0518C59 18.506 58.783 17.9804 58.3983 17.5963H58.3589ZM37.4385 31.6357V57.4908C36.0478 56.7125 34.4795 56.2981 32.8816 56.2981H24.1032V21.1037H32.28C33.651 21.1037 34.9628 21.6495 35.9294 22.6097C36.8961 23.5699 37.4385 24.8839 37.4385 26.2383V31.6357ZM54.8574 56.2981H46.069C44.4712 56.2981 42.9127 56.7024 41.5319 57.4806V26.2383C41.5319 24.8738 42.0744 23.5699 43.041 22.6097C44.0076 21.6495 45.3194 21.1037 46.6904 21.1037H54.8475V56.3082L54.8574 56.2981Z" fill="#38E7CD"></path><path d="M46.7003 17H56.9089C57.4514 17 57.9742 17.2123 58.3589 17.5963H58.3983C58.783 17.9804 59 18.506 59 19.0518V58.36C59 58.9058 58.783 59.4314 58.3983 59.8155C58.0137 60.1996 57.4909 60.4118 56.9484 60.4118H46.1085C45.4279 60.4118 44.7572 60.5432 44.1259 60.806C43.4947 61.0587 42.9325 61.4428 42.4492 61.9178L40.9499 63.4037C40.5652 63.7877 40.0425 64 39.5 64C38.9575 64 38.4347 63.7877 38.0501 63.4037L36.5508 61.9178C36.0675 61.4428 35.5053 61.0688 34.8741 60.806C34.2428 60.5432 33.5721 60.4118 32.8915 60.4118H22.0516C21.5091 60.4118 20.9863 60.1996 20.6017 59.8155C20.217 59.4314 20 58.9058 20 58.36V19.0518C20 18.506 20.217 17.9804 20.6017 17.5963C20.9863 17.2123 21.5091 17 22.0516 17H32.2701C35.1897 17 37.7936 18.3443 39.4803 20.4467C40.3187 19.4056 41.3642 18.5667 42.5577 17.9703C43.8399 17.3335 45.2602 17 46.7003 17ZM46.7003 17V17.2527M37.4385 31.6357V57.4908C36.0478 56.7125 34.4795 56.2981 32.8816 56.2981H24.1032V21.1037H32.28C33.651 21.1037 34.9628 21.6495 35.9294 22.6097C36.8961 23.5699 37.4385 24.8839 37.4385 26.2383V31.6357ZM54.8574 56.2981H46.069C44.4712 56.2981 42.9127 56.7024 41.5319 57.4806V26.2383C41.5319 24.8738 42.0744 23.5699 43.041 22.6097C44.0076 21.6495 45.3194 21.1037 46.6904 21.1037H54.8475V56.3082L54.8574 56.2981Z" stroke="#38E7CD" stroke-width="0.5"></path></svg></a></main><!--[--><!--[--><div><main class="layout" data-v-9c8c63c3><div class="book-info pc" data-v-9c8c63c3><div class="book-info-home-img" data-v-9c8c63c3><div class="no-img" data-v-9c8c63c3></div><div class="book-info-author" data-v-9c8c63c3><p data-v-9c8c63c3>By Bruce A. Tate</p><span data-v-9c8c63c3>be reading 83%</span></div></div><div class="title" data-v-9c8c63c3><p data-v-9c8c63c3>Seven Languages in Seven Weeks</p><span data-v-9c8c63c3></span></div><div class="dir-layout" data-v-9c8c63c3><p class="title" data-v-9c8c63c3>directory</p><ul data-v-9c8c63c3 data-v-e205a500><!--[--><!--]--></ul></div></div><div class="an" data-v-9c8c63c3><div class="more" data-v-9c8c63c3>MORE</div></div><!----><div class="main-con" data-v-9c8c63c3><div class="text markdown-content" data-v-9c8c63c3><!--[--><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>回顾下自己的十年经历</p></main></div><h1 id="总结自己-0"><!--[-->总结自己 0<!--]--></h1><p><!--[-->如果从 2015 那个对计算机懵懂的我来说，到 2025 年已经过了十年。可以说对计算机方面拥有了十年的兴趣。假如从 2018 我第一个漏洞算起，至今已经过了七年。再从 2020 我打算学习设计开始，已经过了五年。<!--]--></p><p><!--[-->我觉得自己有很大的缺陷，基础不是特别牢固。之前做全栈的时候就有朋友指出我的基础不是特别好，最常说的话就是：“基础不牢，地动山摇”。做出的项目只是看起来很不错，但如果深挖细节，性能的处理就有一小部分的问题。虽然我总以 &quot;安全爱好者&quot; 作为 title，但我貌似并没有发现过比较知名且威胁较大的漏洞。<!--]--></p><p><!--[-->更不用说什么 EDUSRC、MSRC、TSRC 这些了，仅仅是公益 SRC 和 CNVD 以及 Hackerone 这些，我所发现到的或提交的更多是大佬吃剩的边角料，甚至是不屑一顾的。但我之前缺奉为瑰宝，以筑起我那脆弱且不堪一击的自信。<!--]--></p><p><!--[-->我还是比较庆幸自己无论做什么起码都能有一点成就的。虽然这个成就不高，但足以出去找个班上不至于饿死。做设计会有很多朋友施舍下我;做安全拿到了漏洞赏金（虽然不多）;做全栈起码能混到小公司 offer；做舆情分析的时候，能被专业的人发现，引导我继续做下去。所以我还是比较幸运的，起码有点东西，虽然不多。<!--]--></p><p><!--[-->看完这本书后，我觉得是时候筹备下我的代表作了。因为之前很多人觉得我是臭做设计的，甚至还有人说我是个臭美工！完全无视掉了我全栈和安全架构方面的才华。所以在这之后，我会筹备一个全栈的代表作；另一个是安全架构的代表作。至于设计的代表作已经有了，再往后无非是作品。我觉得代表作这个东西首先是能给人用的，其次才是给人看的；这样说服力大一点。<!--]--></p><p><!--[-->之所以看这本书。首先是我觉得自己 Code 方面还是比较有问题，写 Code 总是很磨叽，和那种一写 code 就是写一天的有很大的差距。其次是我承认是被这本书的标题所吸引，作者懂不懂语言不重要，但他一定懂营销。我还不知道这本书有没有被 Percipio 收入，反正我 ACM 会员资格是到期了。这里我想吐槽下 ACM 的续费规则，我有钱的时候是想提前续费的，但 ACM 只能是快过期的时候才能续费。等真快过期的时候，我反而没钱续费了。<!--]--></p><hr><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>作者致谢</p></main></div><h1 id="致谢-2"><!--[-->致谢 2<!--]--></h1><p><!--[-->又到了一个非常具有代表性的篇幅，也就是：“What Readers Are Saying About Seven Languages in Seven Weeks” 你会看到国内那种类似 xxx 专家，xxx 公司 xxx 总监 xxx 团队 xxx 实验室对某本书的友情肯定和推荐。你别说你还真别说，如果这本书讲的是思维逻辑和拆解，那确实是很不错的。但如果是技术性的，那可能从 2010 年发售至今 2025 年历经十多年的发展，技术也可能会淘汰，语法可能会变，但逻辑和思维，依然是那套惯式。<!--]--></p><p><!--[-->在这本书的前言中，作者透露出在 2009~2010 的时间段经历了很多人生的体验。例如他那 40 多岁的弟弟经历了心脏搭桥手术；三月底，他的妹妹确诊的乳腺癌；同月，他的母亲确诊晚期癌症。短短几天就去世了。<!--]--></p><p><!--[-->在这期间内，作者虽然伤心欲绝。但他回想起母亲的点点滴滴，与母亲的每次相处，特别是在作者离家前上了母亲的几节美术课，虽然作者的画很糟糕。但母亲总能将破碎不堪的画幅玩就回来成为一件精美的艺术作品。这需要天赋和经验才能将一副处在崩溃边缘的画作挽救回来。<!--]--></p><p><!--[-->不知你是否接触过绘画、美术。在我初中最后一年时，我因成绩垫底转到了美术班，我比较遗憾没有接触到绘画的全过程。<!--]--></p><main data-v-2de78ab7><img src="/img/book/08/1.jpg" alt="Book image for 08/1.jpg" data-v-2de78ab7><p data-v-2de78ab7>绘画这门艺术，你需要经历过前期的 <b>构图、草稿、描边、上色、光影</b> 如果你是素描类的作品，还需要经历前期的封边到最后将美纹纸胶带撕下的过程。</p></main><p><!--[-->在作画前期，你需要构思好要画什么，然后通过一些技巧完成构图。比如透视、人体结构等。然后就是用铅笔打草稿，打草稿的过程要求一笔带过，如果不能一笔，那就需要勤加练习。所以在美术课中你会看到一开始要求画线，无论板绘还是素描都是这样。<!--]--></p><main class="text-tip"><!--[--><p><!--[-->美术一般讲究人较多，水彩纸要用 Arches、素描纸要用 Canson、铅笔要用 Marie&#39;s，高级点的铅笔还有 Derwent。水彩颜料要用 Winsor &amp; Newton、白夜，一张不起眼的纸每张也许都是几块钱的。<!--]--></p><!--]--></main><p><!--[-->学会画线后，就需要学会光影。光的照射范围和影子，在素描中，只有黑色和白色，因此需要用到擦纸笔甚至可塑橡皮来实现。当然有些功力比较深的喜欢用手进行擦来延续黑色。<!--]--></p><p><!--[-->如果你是走那种水彩、或者板绘，数字传媒的。可能会经历构图、草稿、描边的这个过程。然后就是上色、光影的应用。所以这个阶段，就和开发很类似。前期实现一个功能，然后用一个简陋的 GUi 进行交互。后期再将 GUi 进行美化和布局的排列。那么恭喜你，你已经成为了一个优秀的 Web 开发工程师，俗称前端。<!--]--></p><p><!--[-->但对于后端，更多的是 code 和 code 之间功能的划分，每个 code 负责不同的功能，最后连点成线，打通 API 和 GUI 之间的联系。组成一个能跑的 base 或 GUI 程序，或者输出一个接口作为 API。那么恭喜你，你成为了软件开发工程师或后端工程师。<!--]--></p><p><!--[-->一个简简单单的前言，就透露出作者对于软件设计和软件工程的功底。即使过了十多年，这套逻辑和拆解也亦然可以套在现代软件工程中，如果读者理解过 MVC 架构，那简直就是异曲同工。<!--]--></p><main class="text-tip"><!--[--><p><!--[-->When I told my mother that I would dedicate this book to her, she
said that she would like that, but she had nothing to do with com-
puters. That is true enough. The very thought of Windows would leave
her helpless. But Mom, you have had everything to do with me. Your
well-timed words of encouragement inspired me, your love of creativity
shaped me, and your enthusiasm and love of life guide me even now.
As I think about these experiences, I can’t help but feel a little better
and a little stronger because I, too, am a canvas shaped by the master.
This book is dedicated with love to Lynda Lyle Tate, 1936–2010.<!--]--></p><!--]--></main><p><!--[-->所以在前沿的结尾，作者说母亲对作者的影响很大。这无关他的目前连 Windows 都不会用，而是传授给了儿子拆解的艺术。看一个产品如果从成品看肯定是高攀不起的，但如果一步一步的拆解，一个一个的功能实现，就会发现也不是那么的特别高攀不起。<!--]--></p><hr><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>作者的致谢</p></main></div><h2 id="ruby简洁灵活面向对象-1"><a href="#ruby简洁灵活面向对象-1"><!--[-->Ruby:简洁，灵活，面向对象 1<!--]--></a></h2><p><!--[-->在致谢阶段，作者展示出了这本书的含金量，甚至比开篇那几位挂名推荐的还重量级。首先映入眼帘的是 Ruby community：<!--]--></p><main class="text-tip"><!--[--><p><!--[-->*相信能在 Wikipedia 中留名的实力。<!--]--></p><!--]--></main><ol><!--[--><li><!--[--><a href="https://ja.wikipedia.org/wiki/%E3%81%BE%E3%81%A4%E3%82%82%E3%81%A8%E3%82%86%E3%81%8D%E3%81%B2%E3%82%8D" rel="nofollow"><!--[-->松本行弘(Matz)<!--]--></a> 他最著名的是 Ruby 编程语言及其原始参考实现 Matz 的 Ruby 解释器的首席设计师；<!--]--></li><li><!--[--><a href="https://github.com/headius" rel="nofollow"><!--[-->Charles Nutter<!--]--></a>: <a href="https://en.wikipedia.org/wiki/JRuby" rel="nofollow"><!--[-->Jruby<!--]--></a> 的作者之一，能在 Java 和 Ruby 代码之间进行完全双向访问（类似于 Python 语言的 Jython ）。<!--]--></li><li><!--[--><a href="https://github.com/evanphx" rel="nofollow"><!--[-->Evan Phoenix<!--]--></a> : <a href="https://en.wikipedia.org/wiki/Rubinius" rel="nofollow"><!--[-->Rubinius<!--]--></a> 的作者；旨在 “为运行 Ruby 代码提供丰富、高性能的环境”<!--]--></li><li><!--[--><a href="https://en.wikipedia.org/wiki/Tim_Bray" rel="nofollow"><!--[-->Tim Bray<!--]--></a>: 原始 XML 规范的共同作者之一;<!--]--></li><!--]--></ol><p><!--[-->Ruby 以完全面向对象、可读性和简洁性、灵活性而知名。例如灵活的语法与动态特性：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>class Greeter
  def initialize(name)
    @name = name.capitalize
  end
end

# 动态添加方法
Greeter.define_method(:greet) do
  &quot;Hello, #{@name}!&quot;
end

g = Greeter.new(&quot;ruby&quot;)
puts g.greet
# 输出：Hello, Ruby!
</code><!--]--></pre><!--]--><p><!--[-->但看输出 <code class=""><!--[-->Hello, Ruby!<!--]--></code> 的这个过程就感觉元编程也是 ruby 的特点之一。<!--]--></p><p><!--[-->我之前浏览过 <a href="https://ruby-china.org/" rel="nofollow"><!--[-->Ruby China<!--]--></a>，那时候我有一个对 Ruby 的问题。但 Ruby China community 有一个会员限制。注册完需要三个月后才能发帖或发消息，结果就是一天后我的问题被我自己解决了，之后我就再也没有浏览过这个社区。<!--]--></p><hr><h2 id="io更好的理解-1"><a href="#io更好的理解-1"><!--[-->Io:更好的理解 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>IO：更好的理解语言</p></main></div><p><!--[-->接下来的就是 Io community, 并不是信息学奥林匹克竞赛 (英语：Olympiad in Informatics，简称：OI) 的那个 IO。而是 Io Programming Language：<!--]--></p><ol><!--[--><li><!--[--><a href="https://github.com/jeremytregunna" rel="nofollow"><!--[-->Jeremy Tregunna<!--]--></a>: <a href="https://github.com/jeremytregunna" rel="nofollow"><!--[-->ioLang<!--]--></a> 的作者之一;Io 的目标是探索概念统一和动态语言，因此权衡往往倾向于简单性和灵活性而不是性能。<!--]--></li><li><!--[--><a href="https://github.com/stevedekorte" rel="nofollow"><!--[-->Steve Dekorte<!--]--></a>: Iolang 的作者之一；Iolang 于 2002 年创建，当时他试图用他的语言 Cel 来帮助朋友 Dru Nelson。他发现自己确实不太了解语言的工作原理，并开始编写一种小型语言来更好地理解问题。(ps: 我什么时候才能拥有这样的好朋友)<!--]--></li><!--]--></ol><p><!--[-->光从描述，我已经对 Iolang 开始有兴趣了，特别句尾处的: &quot;You captured the imagination of the beta readers and cre-
ated the favorite language of many of them.(你激发并测试了读者的想象力，同时创造了许多人最喜欢的语言。)&quot;<!--]--></p><p><!--[-->Iolang 作为动态语言，在类型阶段就比较宽松，比较灵活，例如:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>x = 42        # 整数
x = &quot;Hello&quot;   # 重新赋值为字符串
</code><!--]--></pre><!--]--><p><!--[-->而静态语言呢，类似 Typescript 这种类型比较强硬的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>let x: number = 42;
x = &quot;Hello&quot;; // 编译错误：类型不匹配
</code><!--]--></pre><!--]--><p><!--[-->当然他们各具特点，灵活性、性能各有千秋，适应的项目需求也不同，有的适合大型的，多人合作开发，有的适合写个脚本或前期功能论证阶段的原型设计。动态语言的刻板印象就是 易上手、Code 简洁、类型宽松、快速开发、运行时发现等作为优点。我们列举几个常见的静态和动态语言：<!--]--></p>
































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->动态语言<!--]--></th><th><!--[-->静态语言<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->Python<!--]--></td><td><!--[-->C/C++<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Ruby<!--]--></td><td><!--[-->Java<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->JavaScript<!--]--></td><td><!--[-->Go<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->PHP<!--]--></td><td><!--[-->TypeScript<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Lua<!--]--></td><td><!--[-->Rust<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Io<!--]--></td><td><!--[-->Swift<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><hr><h2 id="prolog逻辑编程-1"><a href="#prolog逻辑编程-1"><!--[-->Prolog:逻辑编程 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>Prolog:逻辑编程</p></main></div><p><!--[-->再然后就是 <a href="https://en.wikipedia.org/wiki/Prolog" rel="nofollow"><!--[-->Prolog community(Programming in Logic community)<!--]--></a>，这是一种逻辑编程语言。这种类型的我还没有接触过，他更像是数学中的逻辑推理。他的基础是一阶逻辑(First-order logic) 其核心的写法和经常接触到的语言有很大的不同。他的语法例如：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>grandparent(X, Z) :- parent(X, Y), parent(Y, Z).
父母关系：如果 X 是 Y 的父母，且 Y 是 Z 的父母，则 X 是 Z 的祖父母。
</code><!--]--></pre><!--]--><p><!--[-->在一些大学中，会将 Prolog 放到<a href="https://en.wikipedia.org/wiki/Logic_programming" rel="nofollow"><!--[-->逻辑编程课<!--]--></a> 中。如果很不幸你没有上过（ps: 我也没上过）那可以蹭一下 The University of Texas at Dallas(德克萨斯大学达拉斯分校) 的课件 <a href="https://personal.utdallas.edu/~hamlen/cs6371sp14/lecture21.pdf" rel="nofollow"><!--[-->Logic Programming:CS 6371: Advanced Programming Languages<!--]--></a>；如果要介绍 Prolog 那就需要介绍一阶逻辑和逻辑连接词、谓词逻辑、量词等。所以我会将这部分的介绍放到 Prolog 那一章节中，这里我们就介绍作者致谢的大佬。<!--]--></p><ol><!--[--><li><!--[--><a href="https://aws.amazon.com/cn/developer/community/heroes/brian-tarbox/" rel="nofollow"><!--[-->Brian Tarbox<!--]--></a>: 通过 Prolog 进行建模，用于模拟和分析海豚在实验中的思维模式，非常有趣。可以前往他的个人 <a href="https://briantarbox.com/" rel="nofollow"><!--[-->blog<!--]--></a> 了解更多<!--]--></li><li><!--[--><a href="https://en.wikipedia.org/wiki/Joe_Armstrong_(programmer)" rel="nofollow"><!--[-->Joe Armstrong<!--]--></a>: <a href="https://en.wikipedia.org/wiki/Erlang_(programming_language)" rel="nofollow"><!--[-->Erlang<!--]--></a> 设计者之一。这是一种并发、分布式、容错的编程语言，<a href="https://en.wikipedia.org/wiki/Elixir_(programming_language)" rel="nofollow"><!--[-->Elixir<!--]--></a> 就是构建在 Erlang 之上。<!--]--></li><!--]--></ol><p><!--[-->作为以分布式、多线程而闻名的语言。“Let it crash（让它崩溃）” 是 Erlang 语言的一种设计哲学。当一个进程发生错误或异常时，不必尝试捕获和处理错误，而是让该进程崩溃，然后通过其他机制（如重启或恢复）来恢复系统的正常运行。<!--]--></p><hr><h2 id="scala解决对java批评-1"><a href="#scala解决对java批评-1"><!--[-->Scala:解决对Java批评 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>Scala：为了解决对 Java 的批评</p></main></div><p><!--[-->接下来轮到了 Scala community 登场。该语言旨在解决 对 Java 的批评，一句话就以证明其含金量。他是一种 强大的静态类型高级通用编程语言，支持面向对象编程和函数式编程。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>import java.time.LocalDate as Date
import Payment.*

val name = &quot;Bib Fortuna&quot;
val digits = 1983_0525_0000_0000L
val expires = Date.of(1983, 5, 25)

enum Payment:
  case Card(name: String, digits: Long, expires: Date)
  case PayPal(email: String)

def process(kind: Payment) = kind match
  case Card(name, digits, expires) =&gt;
    s&quot;Processing credit card $name, $digits, $expires&quot;
  case PayPal(email) =&gt;
    s&quot;Processing PayPal account $email&quot;

process(Card(name, digits, expires))
</code><!--]--></pre><!--]--><ol><!--[--><li><!--[--><a href="https://dev.java/author/VenkatSubramaniam/" rel="nofollow"><!--[-->Venkat Subramaniam <!--]--></a>: ACM 高级会员，<a href="https://pragprog.com/titles/vsscala2/pragmatic-scala/" rel="nofollow"><!--[-->Programming Scala<!--]--></a> 一书作者。<!--]--></li><li><!--[--><a href="https://en.wikipedia.org/wiki/Martin_Odersky" rel="nofollow"><!--[-->Martin Odersky<!--]--></a>: 他设计了 Scala。<!--]--></li><!--]--></ol><hr><h2 id="clojure不变数据结构-1"><a href="#clojure不变数据结构-1"><!--[-->Clojure:不变数据结构 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>Clojure: 不可变数据结构</p></main></div><p><!--[-->还有 <a href="https://en.wikipedia.org/wiki/Clojure" rel="nofollow"><!--[-->Clojure community<!--]--></a>。Clojure 是 <a href="https://en.wikipedia.org/wiki/Lisp_(programming_language)" rel="nofollow"><!--[-->lisp<!--]--></a> 家族的一部分，或者说他是 Lisp 的现代化变体。他继承了 lisp 的特性。同时在并在并发和不变数据结构上做出了优化（Lisp 是可变的）<!--]--></p><p><!--[-->Lisp 发明和推广的 <a href="https://en.wikipedia.org/wiki/S-expression" rel="nofollow"><!--[-->S 表达式(S-expression)<!--]--></a> 还是很有特点的，例如一个计算式子：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>(* (+ 1 2) (+ 3 4))

  + 1 2：表示加法操作，等于 3。
  + 3 4：表示加法操作，等于 7。
  *：表示乘法操作，将 3 和 7 相乘，结果是 21。
  
  如果是 Python 式子就是：

result = (1 + 2) * (3 + 4)
print(result)
</code><!--]--></pre><!--]--><p><!--[-->到这里可能 Python 的式子比 S-expression 更接近传统的数学表达式。如果看到这那就可能认为 Lisp 还是不行，不如去学 Python。但 Lisp 还有一个特点是 <a href="https://en.wikipedia.org/wiki/Metaprogramming#:~:text=Metaprogramming%20is%20a%20computer%20programming,even%20modify%20itself%2C%20while%20running." rel="nofollow"><!--[-->元编程（Metaprogramming）能力<!--]--></a> 指编写可以操作、生成、或修改程序代码的程序的能力。也就是 <strong><!--[-->——把代码当作数据来处理，从而实现动态的行为和更高的灵活性。<!--]--></strong><!--]--></p><!--[--><pre class="" style=""><!--[--><code>;; 定义一个宏，用来生成“加法函数”
(defmacro make-adder (n)
  `(lambda (x) (+ x ,n)))

;; 使用宏生成一个加法函数
(defparameter add-five (make-adder 5))

;; 测试生成的函数
(format t &quot;Result: ~A~%&quot; (funcall add-five 10))  ; 输出 &quot;Result: 15&quot;
</code><!--]--></pre><!--]--><ol><!--[--><li><!--[-->make-adder 是一个宏，它接收参数 n，并返回一个 新的函数代码：(lambda (x) (+ x ,n))。注意，这里返回的是代码，而不是一个值。<!--]--></li><li><!--[-->宏的作用是在 编译时生成或修改代码，而不是像 Python 闭包那样只是生成行为。<!--]--></li><li><!--[-->宏展开时，(make-adder 5) 会变成 (lambda (x) (+ x 5))，并且这个生成的函数将在运行时执行。<!--]--></li><!--]--></ol><p><!--[-->在上面这个例子中，<code class=""><!--[-->宏的定义实际上是操作代码的模板，生成新的 Code。<!--]--></code> 如果是 Python，那么可以通过函数来生成一个加法函数：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>def make_adder(n):
    return lambda x: x + n

# 使用函数生成一个加法函数
add_five = make_adder(5)

# 测试生成的函数
print(f&quot;Result: {add_five(10)}&quot;)  # 输出 &quot;Result: 15&quot;
</code><!--]--></pre><!--]--><ol><!--[--><li><!--[-->make_adder 函数返回了一个新的函数（lambda x: x + n）。<!--]--></li><li><!--[-->n 被捕获在闭包中，生成了一个 “动态的行为”：返回的函数始终会把输入值 x 加上 n。<!--]--></li><li><!--[-->这只是动态生成了一个函数，而 没有生成或修改代码。我们只是定义了一个行为，而不是在代码层面进行操作。<!--]--></li><!--]--></ol><p><!--[-->Lisp、Clojure、Scheme 等语言通过其 S-expression 和宏系统提供强大的元编程能力。特点是代码即数据（homoiconicity），天然支持元编程；而 Python 通过反射和动态代码生成支持元编程，他的运行时动态性强，支持动态类型，如果要展示不可变结构，那下面的例子就很贴合：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>(defn transform [person]
   (update (assoc person :hair-color :gray) :age inc))

(transform {:name &quot;Socrates&quot;, :age 39})
;; =&gt; {:name &quot;Socrates&quot;, :age 40, :hair-color :gray}
</code><!--]--></pre><!--]--><p><!--[-->最后输出的还是 40，因为在这个过程中 <code class=""><!--[-->age<!--]--></code> 通过 <code class=""><!--[-->inc<!--]--></code> 函数进行了递增操作，所以是 40 而不是 39。这展示了 Clojure 的不可变结构的特性。所以，我们花了几个部分了解 Lisp 和 Clojure，不仅是处于了解，而是对 <strong><!--[-->一个具有悠久历史和独特的、完全括号的前缀表示法的编程语言家族。<!--]--></strong> 的敬意。<!--]--></p><ol><!--[--><li><!--[--><a href="https://github.com/stuarthalloway" rel="nofollow"><!--[-->Stuart Halloway<!--]--></a>: Clojure 协作者; <a href="https://pragprog.com/titles/shcloj3/programming-clojure-third-edition/" rel="nofollow"><!--[-->Programming Clojure<!--]--></a> 一书作者。<!--]--></li><li><!--[--><a href="https://en.wikipedia.org/wiki/Rich_Hickey" rel="nofollow"><!--[-->Rich Hickey <!--]--></a>: Clojure 创建者。<!--]--></li><!--]--></ol><hr><h2 id="haskell纯函数语言-1"><a href="#haskell纯函数语言-1"><!--[-->Haskell:纯函数语言 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>Haskell: 纯函数语言</p></main></div><p><!--[-->还还还有 <a href="https://en.wikipedia.org/wiki/Haskell" rel="nofollow"><!--[-->Haskell community<!--]--></a>，Haskell 专为教学、研究和工业应用而设计。以逻辑学家<a href="https://en.wikipedia.org/wiki/Haskell_Curry" rel="nofollow"><!--[-->哈斯克尔・柯里 (Haskell Curry) <!--]--></a> 的名字命名，他的研究之一 <a href="https://en.wikipedia.org/wiki/Lambda_calculus" rel="nofollow"><!--[-->Lambda 演算（Lambda Calculus）<!--]--></a> 是函数式编程的基础，同时他还是 <a href="https://en.wikipedia.org/wiki/Currying" rel="nofollow"><!--[-->Currying<!--]--></a> 的贡献者之一。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>•   在 Haskell 诞生之前，函数式编程语言如 Lisp、ML 等已经存在，但它们没有完全基于纯函数式的理念。
•   Haskell 作为一门“纯函数式编程语言”，其命名体现了其与数学逻辑和 Lambda 演算的深厚联系。
</code><!--]--></pre><!--]--><p><!--[-->所以，作为一个纯函数式的编程语言，它的式子是这样的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>-- 纯函数：输入相同，输出总是相同
add :: Int -&gt; Int -&gt; Int
add x y = x + y

-- 调用
main = print (add 3 5)  -- 输出 8
</code><!--]--></pre><!--]--><p><!--[-->那么不是纯函数的是这样的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>counter = 0

def increment():
    global counter
    counter += 1
    return counter
</code><!--]--></pre><!--]--><ol><!--[--><li><!--[--><a href="https://en.wikipedia.org/wiki/Philip_Wadler" rel="nofollow"><!--[-->Phillip Wadler<!--]--></a>: 创造的 <a href="https://en.wikipedia.org/wiki/Orwell_(programming_language)" rel="nofollow"><!--[-->Orwell<!--]--></a> 被认为是 Haskell 的先驱; Haskell 设计者之一。推动了函数式编程从理论研究到实际应用的转变。<!--]--></li><li><!--[--><a href="https://en.wikipedia.org/wiki/Simon_Peyton_Jones" rel="nofollow"><!--[-->Simon Peyton Jones<!--]--></a>: <a href="https://en.wikipedia.org/wiki/Glasgow_Haskell_Compiler" rel="nofollow"><!--[-->GHC(The Glasgow Haskell Compiler, Haskell 编译器) <!--]--></a> 开发者之一，他推动了 <a href="https://en.wikipedia.org/wiki/Type_inference" rel="nofollow"><!--[-->类型推导<!--]--></a> 和 <a href="https://en.wikipedia.org/wiki/Type_safety" rel="nofollow"><!--[-->类型安全<!--]--></a> 的概念<!--]--></li><!--]--></ol><hr><h1 id="前言-3"><!--[-->前言 3<!--]--></h1><h2 id="学习的快乐-1"><a href="#学习的快乐-1"><!--[-->学习的快乐 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>前言</p></main></div><p><!--[-->在本书的开篇，作者引用了 &#39;How Proust Can Make You a Better Programmer&#39; 直译为 《普鲁斯特如何让你成为更好的程序员》作者是 Erlang 的创建者 Joe Armstrong。这里有个小彩蛋，Marcel Proust 就是 &#39;A la
recherche du temps perdu.&#39; 的作者。也就是说出色的 Coder 需要具备耐心、有创造力、抽象思维、细节。这么表达还是比较抽象。<!--]--></p><p><!--[-->对于耐心、思考我们可以以一个 Bug 举例，假如你碰到了一个 Bug，少则几分钟多则几小时甚至几天。在这么个阶段中，不断的经历失败还没有放弃，还是非常难能可贵的。但如果你具备抽象思维的能力，那么可以换一个视角思考。<!--]--></p><p><!--[-->“既然我这样实现会碰到这样的问题，那么我换一种实现思路，是不是就能避免这样的问题，有概率陷入一个更简单或比这个问题更复杂的问题呢？”<!--]--></p><main class="text-tip"><!--[--><p><!--[-->“The Gmail editor cannot get typographic quotes right.”<!--]--></p><ul><!--[--><li><!--[-->“Gmail 编辑器无法正确排版引号，例如：‘单引号’、“双引号””<!--]--></li><!--]--></ul><p><!--[-->“Disgraceful,” said Margery, “the sign of an illiterate programmer and a
decadent culture.”<!--]--></p><ul><!--[--><li><!--[-->“可耻，”Margery 说，“这是文盲程序员和颓废文化的标志。”<!--]--></li><!--]--></ul><p><!--[-->“What should we do about it?”<!--]--></p><ul><!--[--><li><!--[-->“我们应该怎么做？”<!--]--></li><!--]--></ul><p><!--[-->“We must insist that the next programmer we hire has read all of ‘A la
recherche du temps perdu.”’<!--]--></p><ul><!--[--><li><!--[-->我们必须坚持要求我们雇用的下一个程序员阅读《追忆似水年华》的全部内容。<!--]--></li><!--]--></ul><p><!--[-->“All seven volumes?”<!--]--></p><ul><!--[--><li><!--[-->“全部七卷？”<!--]--></li><!--]--></ul><p><!--[-->“All seven volumes.”<!--]--></p><ul><!--[--><li><!--[-->“全部七卷。”<!--]--></li><!--]--></ul><p><!--[-->“Will it make them better at punctuation and make them get their quotes
right?”<!--]--></p><ul><!--[--><li><!--[-->“这会让他们更好地使用标点符号并正确引用吗？”<!--]--></li><!--]--></ul><p><!--[-->“Not necessarily, but it will make them a better programmer. It’s a Zen
thing....”<!--]--></p><ul><!--[--><li><!--[-->“不一定，但它会让他们成为更好的程序员。这是禅宗的事情......”<!--]--></li><!--]--></ul><!--]--></main><p><!--[-->这里的举例：”Gmail 编辑器无法正确排版引号，例如：‘单引号’、“双引号”“ 我觉得很大一部分原因是因为当时为了避免构造注入语句，然后又不想重构源数据所以就不渲染引号来得快些所导致的。即使现在是 2025 年，有些网站依然不允许除了 Gmail、Outlook、Yahoo、ProtonMail、Zoho 的邮箱注册账号。<!--]--></p><p><!--[-->这种做法通常是为了减少后端 API 针对一些特殊字符的处理和过滤。有些甚至是为了解决下 OWASP TOP TEN 的注入问题，因此这么做最保险的做法就是不允许传入特殊字符，比如 ‘“/.!@#*()!$) 这种。<!--]--></p><main class="text-tip"><!--[--><p><!--[-->Learning to program is like learning to swim. No amount of theory is
a substitute for diving into the pool and flailing around in the water
gasping for air.<!--]--></p><ul><!--[--><li><!--[-->学习编程就像学习游泳。再多的理论也无法代替跳入游泳池并在水中挣扎呼吸的感觉。<!--]--></li><!--]--></ul><p><!--[-->The first time you sink under the water, you panic, but
when you bob to the surface and gulp in some air, you feel elated.<!--]--></p><ul><!--[--><li><!--[-->第一次尝试跳入水中时，你会感到恐慌，但当你浮出水面并大口呼吸时，你会感到兴奋。<!--]--></li><!--]--></ul><p><!--[-->You
think to yourself, “I can swim.” At least that’s how I felt when I learned
to swim.<!--]--></p><ul><!--[--><li><!--[-->你会想，“我会游泳。” 至少这是我学游泳时的感觉。<!--]--></li><!--]--></ul><!--]--></main><p><!--[-->很多人第一次接触计算机时。其恐惧在于会不会将系统、硬件破坏掉，前期是系统环境，后期是服务器、数据库等。但经历过无数次重装系统和格式化之后，就会发现也没什么难的。于是就有了尝试的勇气，不断经历恐惧、失败，这正是 Code 所带来的体验。<!--]--></p><main class="text-tip"><!--[--><p><!--[-->It’s the same with programming. The first steps are the most difficult,<!--]--></p><ul><!--[--><li><!--[-->编程也一样。万事开头难，<!--]--></li><!--]--></ul><p><!--[-->and you need a good teacher to encourage you to jump into the water.<!--]--></p><ul><!--[--><li><!--[-->你需要一个好老师来鼓励你跳入水中。<!--]--></li><!--]--></ul><!--]--></main><p><!--[-->Code 就像搭积木一样，如果你学习过后端相关的技术栈，例如 MVC。在未深入学习的时候，整个 Code 都显得很乱，所有功能都包含在一个文件中。动不动就是及千行几百行，但通过 MVC 这样的设计模式，一个功能就是一个文件的划分，就能很好的梳理整个项目的逻辑。Code 功能简洁明了，方便后续的维护与扩充。<!--]--></p><main class="text-tip"><!--[--><p><!--[-->Let’s assume that you’ve actually managed the difficult task of down-
loading and installing the interpreter or compiler for the language you
are interested in.<!--]--></p><ul><!--[--><li><!--[-->假设你已经完成了下载并安装你感兴趣的语言的解释器或编译器这一艰巨的任务。<!--]--></li><!--]--></ul><p><!--[-->What should you do next? What will be your first
program?<!--]--></p><ul><!--[--><li><!--[-->你下一步该做什么？你的第一个程序是什么？<!--]--></li><!--]--></ul><!--]--></main><p><!--[-->看到这里的时候我大概已经知道作者整本书的意图了。即 ”自信“，我个人认为自信是比较难能可贵的。特别是互联网黑社会遍地走的今天，如何树立起自信是很难的。如果你创建了一个开源项目，那衡量你的就是 Star、Fork 甚至是有多少人在用。<!--]--></p><p><!--[-->如果出了点问题，有些人还会直接开喷。当然，这也是体验的一部分，毕竟挨骂的机会并不是谁都有的，免费打工的机会也不是什么人都行的，所以这也是一个很好的人生经历。因此如果您跨过此关，那么还会经历推广的阶段，因为 Code 厉害的大佬不一定圈子就多，所以即使 Code 再厉害，可能还没有那些比他 Code 不那么厉害的人 Star 多。<!--]--></p><p><!--[-->如果您恰好在 CHINA，那您在未来肯定会接触到一句话：”技术哪有推广重要“。也就是：”橘生淮南则为橘，生于淮北则为枳“<!--]--></p><p><!--[-->因此就跨入到比拼圈子和推广的阶段了，如果您是一个不善言辞、朝九晚五、循规蹈矩。没什么圈子的人，朋友就几个，那大概也就是 100+ Star。如果您混迹开源设计，各个群都是 200+，那么您大概是 1000+ Star。如果我是一个带货主播，那我会为你推荐 《被讨厌的勇气》，恰好我不是。<!--]--></p><main class="text-tip"><!--[--><p><!--[-->The first step in acquiring any new skill is not being able to do your own
thing but being able to reproduce what other people have done before
you.<!--]--></p><ul><!--[--><li><!--[-->获得任何新技能的第一步不是能够做自己的事情，而是能够复制别人在你之前做过的事情。<!--]--></li><!--]--></ul><p><!--[-->This is the quickest way to mastering a skill.<!--]--></p><ul><!--[--><li><!--[-->这是掌握技能最快的方法。<!--]--></li><!--]--></ul><!--]--></main><p><!--[-->在引库调参和生成大模型的时代，独立思考以及实现某个比较基础的功能逻辑是比较难的。大多数人都会依赖于无数个包或库来实现需要的功能，甚至不需要了解这个功能怎么实现的就可以实现其想要的。这就是我对这句话的理解，但是在一些地方还有少数人认为，Copy 开源项目改一改加一个支付页面就是自己的，才是作者的意思。<!--]--></p><p><!--[-->作者在前言给出了一个很有含金量的逻辑。<strong><!--[-->学习一个语言，不需要了解其基础的原理实现，先理解其语法规则。知道怎么表达即可。<!--]--></strong> 我具有一些开发经验的读者肯定会感同身受，因为一个框架、一个语言，这一个版本是这样的写法，但过几个月、半年、一年。就会是另一个写法了，因此需要不断学习，不断花时间去适应和理解。<!--]--></p><p><!--[-->所以一些 Coder 倡导终身学习，学 Code 可以有效的避免老年痴呆。<!--]--></p><main class="text-tip"><!--[--><p><!--[-->Each language has its own set of idioms, its strengths, and its weak-
nesses. By learning several different programming languages, you will
be able to see which language is best suited to the kinds of problems
that interest you most.<!--]--></p><ul><!--[--><li><!--[-->每种语言都有自己的一套习语、优点和缺点。通过学习几种不同的编程语言，您将能够了解哪种语言最适合您最感兴趣的问题。<!--]--></li><!--]--></ul><p><!--[-->Ultimately, programming is
about understanding, and understanding is about ideas.<!--]--></p><ul><!--[--><li><!--[-->归根结底，编程就是理解，而理解就是想法。<!--]--></li><!--]--></ul><p><!--[-->So, exposure
to new ideas is essential to a deeper understanding of what program-
ming is all about.<!--]--></p><ul><!--[--><li><!--[-->因此，接触新想法对于更深入地了解编程的意义至关重要。<!--]--></li><!--]--></ul><!--]--></main><hr><h2 id="我那一事无成且一直在学习的一生-2"><a href="#我那一事无成且一直在学习的一生-2"><!--[-->我那一事无成且一直在学习的一生 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>我那一事无成且一直在学习的一生</p></main></div><p><!--[-->让我意外的是，这本书的前言竟然不是作者自己写的。而是 Erlang 的创建者 Joe Armstrong。我认为结尾处是比较具有讽刺意味的，如果一直学习，那么就会感觉自己超级菜，从而缺少了勇气去创建、编写一个项目，甚至是与人分享的喜悦。<!--]--></p><p><!--[-->如果你将自己的项目分享到某个群组，那个群组的人可能觉得你打广告，或者说炫耀？于是 Code 警察开始出动，不断的给你批斗拉踩甚至是网暴。跟你诉说你所做的无非是重复造轮子，毫无意义的事情。如果你的抗压能力不是很强，或许就开始退群退网、Github 设置为隐私三件套走起。<!--]--></p><p><!--[-->但你如果与 ChatGPT 分享一个项目、一个思路。TA 会先肯定你，然后提出可以优化的建议。虽然整个流程看起来很正常，属于非常理智的。但如果是几十人、几百人的群组，理智往往是那么的珍贵和稀缺，大概只有立场先行和整活、玩梗的存在。<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->A Zen master might tell you that to be better at mathematics you’d
better study Latin. Thus it is with programming. To better understand
the essence of OO programming, you should study logic or functional
programming (FP). To be better at FP, you should study Assembler.<!--]--></p><ul><!--[--><li><!--[-->禅师可能会告诉你，要想学好数学，最好学习拉丁语。编程也是如此。为了更好地理解面向对象编程的本质，你应该学习逻辑或函数式编程 (FP)。为了更好地掌握 FP，你应该学习汇编语言。<!--]--></li><!--]--></ul><p><!--[-->Books on comparative programming languages were popular when I
grew up as a programmer, but most of these were academic tomes that
gave little practical guidance to how to actually go about using a lan-
guage. This reflected the technology of the age. You could read about
the ideas in a language, but actually trying it out was virtually impos-
sible.<!--]--></p><ul><!--[--><li><!--[-->在我作为程序员成长的过程中，比较编程语言的书籍很受欢迎，但其中大多数都是学术性的大部头，几乎没有提供关于如何实际使用语言的实用指导。这反映了那个时代的技术。你可以阅读语言中的想法，但实际上尝试它几乎是不可能的。<!--]--></li><!--]--></ul><p><!--[-->Today, not only can we read about the ideas, but we can try them in
practice. This makes the difference between standing on the poolside
wondering whether it would be nice to swim and diving in and enjoying
the water.<!--]--></p><ul><!--[--><li><!--[-->今天，我们不仅可以阅读这些想法，还可以在实践中尝试它们。这使得站在泳池边想知道游泳是否好玩和跳进水里享受水的差别。<!--]--></li><!--]--></ul><p><!--[-->I warmly recommend this book and hope that you enjoy reading it as
much as I have.<!--]--></p><ul><!--[--><li><!--[-->我热烈推荐这本书，希望你和我一样喜欢阅读它。<!--]--></li><!--]--></ul><br><p><!--[-->Joe Armstrong, creator of Erlang<br> 2 March 2010 <br>Stockholm<!--]--></p><!--]--></main><!--]--><hr><h1 id="介绍-2"><!--[-->介绍 2<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>章节介绍</p></main></div><p><!--[-->学习第一种语言，可能是为了生活。但如果学习第二个语言，那大概是想扩充下自己或者为了职业道路更加宽阔。人类对于求知的需求是刻在其基因的，编程语言亦是如此。这本书所想传达的，并不是让你照着敲击 Code，而是思考其逻辑思维。<!--]--></p><h2 id="语言的核心概念-1"><a href="#语言的核心概念-1"><!--[-->语言的核心概念 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>1.1 语言的核心概念</p></main></div><br><main class="text-tip"><!--[--><p><!--[-->大部分时间里，当我学习一门新的编程语言或框架时，我会寻找一个快速的交互式教程。<!--]--></p><p><!--[-->但我的基本目标是快速地了解语言的语法糖和核心概念。<!--]--></p><!--]--></main><p><!--[-->这样的经历我深有体会，但问题在于，学完了语言本体还是基础。有时还需要看各个库、包、插件、框架的文档。将这些散落在各地的积木拼装起来，抽象思维就显得非常重要，因为有时学了个语言本体还只是基础，框架再来上一个语法糖，又需要重新学习、反复学习。<!--]--></p><p><!--[-->作者在前期问了五个问题，也就是说读完了这本书，这七个问题都会迎刃而解。同时，这七个问题设计了语言的基础，即：<!--]--></p>


































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->问题<!--]--></th><th><!--[-->类型<!--]--></th><th><!--[-->解释<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->类型模型是什么？<!--]--></td><td><!--[-->类型系统<!--]--></td><td><!--[-->是强类型（如 Java）还是弱类型（如 C）？是静态类型（如 Java）还是动态类型（如 Ruby）？<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->编程模型是什么？<!--]--></td><td><!--[-->编程范式<!--]--></td><td><!--[-->支持哪些编程模型（面向对象、函数式等）？<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->如何与语言交互？<!--]--></td><td><!--[-->交互方式<!--]--></td><td><!--[-->语言是编译型还是解释型？如何运行和调试？<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->决策结构和核心数据结构是什么？<!--]--></td><td><!--[-->语言的控制结构与核心数据结构<!--]--></td><td><!--[-->条件语句、集合操作的独特性。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->语言有哪些独特的核心特性？<!--]--></td><td><!--[-->语言的独特特性<!--]--></td><td><!--[-->并发支持、宏系统、虚拟机等<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><main class="text-tip"><!--[--><p><!--[-->When you’re through, you will not be an expert in any of these lan-
guages, but you will know what each uniquely has to offer.<!--]--></p><ul><!--[--><li><!--[-->阅读本书后，你或许无法成为这些语言的专家，但你将了解每种语言独有的优势。<!--]--></li><!--]--></ul><!--]--></main><p><!--[-->在实际项目开发中，多语言配合是常见的。他们的关联桥梁就是数据的 CURD，各个语言实现的功能获取到的数据存入数据库。之后前端展示和交互逻辑的设计，后端将数据映射为 API 递交给前端或 View 来构成一个网页应用或客户端应用。<!--]--></p><hr><h2 id="为什么选择这些语言-1"><a href="#为什么选择这些语言-1"><!--[-->为什么选择这些语言 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>1.2 为什么选这几个语言？</p></main></div><p><!--[-->书中选择的七种编程语言（Ruby、Io、Prolog、Scala、Erlang、Clojure、Haskell）以及每种语言的选择理由和独特价值。作者表示，这些语言未必是最流行或最实用的，但它们在类型系统、编程范式、并发性、元编程等方面具有独特的学习价值：<!--]--></p><ol><!--[--><li><!--[-->类型系统：涵盖了强类型、动态类型和静态类型的多样组合。<!--]--></li><li><!--[-->编程范式：包括面向对象、函数式、逻辑编程、原型编程等多种范式。<!--]--></li><li><!--[-->语言特色：如 Ruby 的元编程、Io 的简洁语法与消息分发、Prolog 的逻辑推理能力等。<!--]--></li><li><!--[-->多样性：通过对比不同语言的特性，帮助读者理解各种编程思维方式的优劣。<!--]--></li><!--]--></ol><p><!--[-->以下是最终入选的语言及其选择理由：<!--]--></p>




































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Lang<!--]--></th><th><!--[-->理由<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->Ruby<!--]--></td><td><!--[-->面向对象语言，以易用性和可读性闻名。本书特别探讨了 Ruby 的元编程能力，展示其语法扩展的潜力。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Io<!--]--></td><td><!--[-->简洁的语法和消息分发机制是亮点。它是一种原型语言，强调并发模型，与 Lisp 有相似之处。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Prolog<!--]--></td><td><!--[-->强大的逻辑推理能力，特别适合解决问题（如数独）。对 Erlang 影响深远，适合逻辑驱动的场景。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Scala<!--]--></td><td><!--[-->结合了函数式编程和 OOP，运行于 JVM。被认为是连接过程式编程和 OOP 的桥梁，对 Java 开发者非常友好。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Erlang<!--]--></td><td><!--[-->专注于并发、分布式和容错性，是开发高可靠性系统的首选语言，像 CouchDB 就使用了 Erlang。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Clojure<!--]--></td><td><!--[-->Lisp 方言，运行于 JVM，强调并发管理和灵活性。减少了传统 Lisp 的括号使用，并拥有丰富的 Java 生态支持。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Haskell<!--]--></td><td><!--[-->唯一的纯函数式语言，以强类型和不可变状态为特点，提供了一种更高效、更安全的编程方式。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><main class="text-tip"><!--[--><p><!--[-->Those languages that I picked are not necessarily the best, but each
one is unique, with something important to teach you.<!--]--></p><ul><!--[--><li><!--[-->我挑选的这些语言未必是最好的，但它们每一种都独特且有重要的东西值得学习。<!--]--></li><!--]--></ul><!--]--></main><hr><h2 id="出版社的背景-1"><a href="#出版社的背景-1"><!--[-->出版社的背景 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>2 谁该看这本书？</p></main></div><p><!--[-->作者介绍了这家出版社，也就是 <a href="https://pragprog.com/" rel="nofollow"><!--[-->Pragmatic Bookshelf<!--]--></a> 这家出版社几乎技术性的书籍占比很多。毕竟名字直译过来就是:&quot;实用书架&quot;  这家出版社的创始人 David Thomas 曾经还写过一本书叫 <a href="https://en.wikipedia.org/wiki/The_Pragmatic_Programmer" rel="nofollow"><!--[-->&quot;The Pragmatic Programmer&quot;<!--]--></a> 直译过来就是：“务实的程序员”。并定义了务实的程序员具有以下品质：<!--]--></p><ol><!--[--><li><!--[-->早期采用者<!--]--></li><li><!--[-->快速适应<!--]--></li><li><!--[-->好奇心和批判性思维<!--]--></li><li><!--[-->现实主义以及万事通。<!--]--></li><!--]--></ol><p><!--[-->这本书还提到了 <a href="https://en.wikipedia.org/wiki/Broken_windows_theory" rel="nofollow"><!--[-->破窗理论（Broken Windows Theory）<!--]--></a>、<a href="https://en.wikipedia.org/wiki/Stone_Soup" rel="nofollow"><!--[-->石头汤（Stone Soup）<!--]--></a>、<a href="https://en.wikipedia.org/wiki/Boiling_frog" rel="nofollow"><!--[-->煮青蛙（Boiling Frog）<!--]--></a>、<a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow"><!--[-->不要重复自己（DRY：Don’t Repeat Yourself）<!--]--></a>、<a href="https://en.wikipedia.org/wiki/Rubber_duck_debugging" rel="nofollow"><!--[-->橡皮鸭调试法（Rubber Duck Debugging）<!--]--></a> 这些故事在开发中的类比。<!--]--></p>
















































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->故事<!--]--></th><th><!--[-->介绍<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->破窗理论<!--]--></td><td><!--[-->如果一个建筑有一扇窗被打破，而没有及时修复，那么很快其他的窗户也可能被破坏。<br>这个现象说明一个破损的小问题可能会导致更大的问题。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->忽视代码中的小问题（如糟糕的命名、不规范的格式）可能会导致代码质量持续恶化，最终变得难以维护。<br>保持代码整洁可以防止项目走向失控。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->石头汤<!--]--></td><td><!--[-->几个旅人告诉村民他们可以用一块石头煮汤，但需要一些配料。<br>村民们好奇地贡献了蔬菜、肉类等材料，最终煮出了一锅美味的汤。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->通过激发团队成员的贡献精神，即使从零开始也可以集体创造出伟大的成果。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->煮青蛙<!--]--></td><td><!--[-->如果把青蛙直接放入沸水中，它会立刻跳出；但如果放在温水中慢慢加热，它可能会因为没有注意到渐变的危险而被煮死。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->开发团队可能会对项目中的缓慢恶化（如技术债累积或功能蔓延）视而不见，直到问题变得不可逆转。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->不要重复自己<!--]--></td><td><!--[-->一个知识或功能点在代码中应该只有一个唯一的表示。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->减少冗余代码，提高维护性和可读性。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->橡皮鸭调试法<!--]--></td><td><!--[-->通过向一只橡皮鸭解释代码来发现问题。在讲解过程中，可能会自己发现逻辑上的错误。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->通过向别人解释问题（甚至是向一只鸭子），你能够重新审视自己的思路，找到盲点。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->作者还阐述了一个非常直观的观点：<!--]--></p><main class="text-tip big"><!--[--><p><!--[-->编程范式每隔十年左右就会发生变化。<!--]--></p><!--]--></main><p><!--[-->作者从 Ruby 入手实验 Web 开发，在完成一些成功的项目后，将职业方向转向 Ruby 开发，并未后悔。	•	这一切源于基本的实验，逐步发展为更深入的探索。<!--]--></p><ul><!--[--><li><!--[-->范式转变的历史教训：<!--]--></li><!--]--></ul><p><!--[-->很多人可能不记得编程范式上一次转变的时代。从结构化编程向面向对象编程的转变经历了几次波折。<!--]--></p><ul><!--[--><li><!--[-->旧的范式（结构化编程）无法应对现代 Web 应用的复杂性。<!--]--></li><li><!--[-->Java 的成功推动了 OOP 的流行，使其成为主流。<!--]--></li><li><!--[-->然而，许多开发者不得不重新学习新工具和设计方法。<!--]--></li><li><!--[-->当前趋势：<!--]--></li><!--]--></ul><p><!--[-->我们可能正在经历另一场转变，这次由新型计算机设计驱动。本书的七种语言中，有五种提供了强大的并发模型（Ruby 和 Prolog 除外）。<!--]--></p><ol><!--[--><li><!--[-->Io 的未来值实现<!--]--></li><li><!--[-->Scala 的 actor 模型<!--]--></li><li><!--[-->Erlang 的“崩溃即修复”哲学<!--]--></li><li><!--[-->Haskell 对可变状态的彻底摒弃<!--]--></li><li><!--[-->Clojure 用版本化解决复杂并发问题<!--]--></li><!--]--></ol><p><!--[-->Erlang 的例子：Erlang 在云数据库（如 CouchDB）背后发挥了重要作用，其语言基础源于 Prolog。<!--]--></p><hr><h1 id="基础-2"><!--[-->基础 2<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>面向对象</p></main></div><h2 id="面向对象-1"><a href="#面向对象-1"><!--[-->面向对象 1<!--]--></a></h2><p><!--[-->Ruby 是一种解释型、面向对象、动态类型的语言，属于所谓的脚本语言家族。因此我们需要了解，解释型、动态类型、面向对象到底是什么个概念，以及他们的具象化实现：<!--]--></p>




















<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->特点<!--]--></th><th><!--[-->概念<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->解释型<!--]--></td><td><!--[-->代码由解释器直接执行，而不是通过编译器先转换为机器码。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->动态类型<!--]--></td><td><!--[-->数据类型在运行时绑定，而不是在编译时。这种策略通常在灵活性与执行安全性之间权衡。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->面向对象<!--]--></td><td><!--[-->支持封装（将数据和行为打包在一起）、继承（通过类组织对象类型）、多态（对象可以以多种形式出现）。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->解释型和动态类型我们在致谢阶段就已经有了了解，那么面向对象几乎是一个家喻户晓的特性。要理解其对象，我们需要想象一个场景：<!--]--></p><p><!--[-->你在开发一个“动物园管理系统”。这个系统需要记录动物的信息，比如名字(name)、种类(species)，以及它们会发出的声音。用面向对象的方法来设计系统。<!--]--></p><!--[--><pre class="language-python" style=""><!--[--><code># 定义一个类
class Animal:
    def __init__(self, name, species):
        self.name = name
        self.species = species

    def speak(self):
        print(f&quot;{self.name} makes a sound.&quot;)

# 创建对象
dog = Animal(&quot;Buddy&quot;, &quot;Dog&quot;)  # 狗狗对象
cat = Animal(&quot;Whiskers&quot;, &quot;Cat&quot;)  # 猫咪对象

dog.speak()  # 输出: Buddy makes a sound.
cat.speak()  # 输出: Whiskers makes a sound.
</code><!--]--></pre><!--]--><p><!--[-->类（Class）<!--]--></p><ul><!--[--><li><!--[-->类就像一张蓝图，定义了某一类东西的共同特性和行为。<!--]--></li><li><!--[-->动物的蓝图：每只动物都有名字（name）和种类（species），而且都会发出声音。<!--]--></li><!--]--></ul><p><!--[-->对象（Object）<!--]--></p><ul><!--[--><li><!--[-->对象是具体的东西，是从类里“制造”出来的实例。<!--]--></li><li><!--[-->动物类中的“狗狗”对象，名字是“Buddy”，种类是“狗”。<!--]--></li><!--]--></ul><p><!--[-->方法 (Method）<!--]--></p><ul><!--[--><li><!--[-->绑定到特定对象的行为<!--]--></li><li><!--[-->定义在类中的函数，必须通过对象调用，例如 <code class=""><!--[-->speak<!--]--></code><!--]--></li><!--]--></ul><p><!--[-->如果没有面向对象，可复用性几乎为 0：<!--]--></p><!--[--><pre class="" style=""><!--[--><code># 没有类，每只动物都要单独定义
dog_name = &quot;Buddy&quot;
dog_species = &quot;Dog&quot;

cat_name = &quot;Whiskers&quot;
cat_species = &quot;Cat&quot;

def dog_speak():
    print(f&quot;{dog_name} makes a sound.&quot;)

def cat_speak():
    print(f&quot;{cat_name} makes a sound.&quot;)

dog_speak()
cat_speak()
</code><!--]--></pre><!--]--><hr><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>面向对象的四大特性</p></main></div><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>封装</p></main></div><ul><!--[--><li><!--[-->保护数据，隐藏细节<!--]--></li><!--]--></ul><p><!--[-->想象你在操作一辆车,你不需要知道引擎如何运作，只需要按下启动按钮。程序中，类可以“隐藏”它内部的细节，外部只需要调用公开的方法。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>class Car:
    def __init__(self, brand):
        self.__engine_on = False  # 私有变量，外部无法直接访问
        self.brand = brand

    def start_engine(self):  # 提供方法启动引擎
        self.__engine_on = True
        print(f&quot;{self.brand} engine started.&quot;)

car = Car(&quot;Toyota&quot;)
car.start_engine()  # 输出: Toyota engine started.
</code><!--]--></pre><!--]--><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>继承</p></main></div><ul><!--[--><li><!--[-->复用代码<!--]--></li><!--]--></ul><p><!--[-->假如动物园里有很多动物，很多行为是相似的，比如“发出声音”。我们可以用“动物”作为父类，然后让“狗”和“猫”继承它，省去重复代码。<!--]--></p><!--[--><pre class="" style=""><!--[--><code># 定义一个类
class Animal:
    def __init__(self, name, species):
        self.name = name
        self.species = species

class Dog(Animal):  # Dog 继承自 Animal
    def speak(self):  # 重写 speak 方法
        print(f&quot;{self.name} barks!&quot;)

class Cat(Animal):  # Cat 继承自 Animal
    def speak(self):
        print(f&quot;{self.name} meows!&quot;)

dog = Dog(&quot;Buddy&quot;, &quot;Dog&quot;)
cat = Cat(&quot;Whiskers&quot;, &quot;Cat&quot;)

dog.speak()  # 输出: Buddy barks!
cat.speak()  # 输出: Whiskers meows!
</code><!--]--></pre><!--]--><p><!--[-->Dog 和 Cat 类继承了 Animal 类：<!--]--></p><ul><!--[--><li><!--[-->Dog 和 Cat 类没有重新定义 <code class=""><!--[-->__init__<!--]--></code> 方法，但它们可以直接用 Animal 类的<code class=""><!--[--> __init__<!--]--></code> 方法来初始化名字和种类。<!--]--></li><!--]--></ul><p><!--[-->子类扩展父类<!--]--></p><ul><!--[--><li><!--[-->Dog 和 Cat 类在继承了 Animal 的基础上，增加了自己的特性（如 <code class=""><!--[-->speak()<!--]--></code> 方法）。<!--]--></li><!--]--></ul><br><!--[--><pre class="" style=""><!--[--><code>dog = Dog(&quot;Buddy&quot;, &quot;Dog&quot;)
</code><!--]--></pre><!--]--><p><!--[-->创建 dog 对象时，Dog 类没有自己的 <code class=""><!--[-->__init__<!--]--></code> 方法，所以调用了 Animal 类的 <code class=""><!--[-->__init__<!--]--></code> 方法。<!--]--></p><p><!--[--><code class=""><!--[-->self.name<!--]--></code> 被赋值为 &quot;Buddy&quot;，<code class=""><!--[-->self.species<!--]--></code> 被赋值为 &quot;Dog&quot;。<!--]--></p><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>多态</p></main></div><p><!--[-->多态（Polymorphism）是面向对象编程中的一个重要概念，指的是同一个接口（方法），在不同对象上表现出不同的行为。<!--]--></p><!--[--><pre class="" style=""><!--[--><code># 定义一个类
class Animal:
    def __init__(self, name, species):
        self.name = name
        self.species = species

class Dog(Animal):  # Dog 继承自 Animal
    def speak(self):  # 重写 speak 方法
        print(f&quot;{self.name} barks!&quot;)

class Cat(Animal):  # Cat 继承自 Animal
    def speak(self):
        print(f&quot;{self.name} meows!&quot;)

animals = [Dog(&quot;Buddy&quot;, &quot;Dog&quot;), Cat(&quot;Whiskers&quot;, &quot;Cat&quot;)]

for animal in animals:
    animal.speak()  # Buddy barks! 和 Whiskers meows!
</code><!--]--></pre><!--]--><p><!--[--><strong><!--[-->“一个接口，不同表现”<!--]--></strong><!--]--></p><ul><!--[--><li><!--[-->这里的接口就是 <code class=""><!--[-->speak()<!--]--></code> 方法。<!--]--></li><!--]--></ul><p><!--[-->Dog 和 Cat 类都实现了<code class=""><!--[-->speak()<!--]--></code> 方法，但它们的表现不同<!--]--></p><ul><!--[--><li><!--[-->Dog 的 <code class=""><!--[-->speak()<!--]--></code> 输出的是 &quot;Buddy barks!&quot;<!--]--></li><li><!--[-->Cat 的 <code class=""><!--[-->speak()<!--]--></code> 输出的是 &quot;Whiskers meows!&quot;<!--]--></li><!--]--></ul><p><!--[--><strong><!--[-->为什么这是多态？<!--]--></strong><!--]--></p><!--[--><pre class="" style=""><!--[--><code>animals = [Dog(&quot;Buddy&quot;, &quot;Dog&quot;), Cat(&quot;Whiskers&quot;, &quot;Cat&quot;)]

for animal in animals:
    animal.speak()
</code><!--]--></pre><!--]--><p><!--[-->调用 <code class=""><!--[-->animal.speak()<!--]--></code> 时，不关心 animal 是 Dog 还是 Cat，程序会自动根据 <code class=""><!--[-->animal<!--]--></code> 的实际类型调用相应的 <code class=""><!--[-->speak() <!--]--></code> 方法。<!--]--></p><p><!--[-->一个通用的方法（<code class=""><!--[-->speak()<!--]--></code>），在不同对象上实现了不同的行为（狗叫或猫叫）。<!--]--></p><p><!--[--><strong><!--[-->多态的特征<!--]--></strong><!--]--></p><p><!--[-->父类引用可以指向子类对象<!--]--></p><!--[--><pre class="" style=""><!--[--><code>animals = [Dog(&quot;Buddy&quot;, &quot;Dog&quot;), Cat(&quot;Whiskers&quot;, &quot;Cat&quot;)]
</code><!--]--></pre><!--]--><p><!--[-->列表中的元素类型是 Animal（父类）的引用，但它们实际是 Dog 和 Cat 的对象（子类）。<!--]--></p><p><!--[-->动态绑定（动态多态）<!--]--></p><ul><!--[--><li><!--[-->在运行时，根据对象的实际类型调用相应的方法，而不是编译时决定。例如：<!--]--></li><!--]--></ul><!--[--><pre class="" style=""><!--[--><code>for animal in animals:
    animal.speak()
</code><!--]--></pre><!--]--><p><!--[-->每次调用 speak()，Python 会根据 animal 的实际类型（Dog 或 Cat），执行不同的 speak() 方法。<!--]--></p><p><!--[-->意义在于增强了代码的灵活性和可扩展性。以下是两大好处：<!--]--></p><ul><!--[--><li><!--[-->统一接口，简化代码<!--]--></li><li><!--[-->方便扩展<!--]--></li><!--]--></ul><p><!--[-->不需要为每种动物分别写逻辑，只需调用 speak() 方法即可：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>for animal in animals:
    animal.speak()
</code><!--]--></pre><!--]--><p><!--[-->无论是 Dog 还是 Cat，只要它们有 speak() 方法，就可以统一处理。<!--]--></p><p><!--[-->如果以后新增一种动物，比如 Bird，只需定义它的类并实现 speak() 方法，无需修改已有代码：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>class Bird(Animal):
    def speak(self):
        print(f&quot;{self.name} chirps!&quot;)

animals = [Dog(&quot;Buddy&quot;, &quot;Dog&quot;), Cat(&quot;Whiskers&quot;, &quot;Cat&quot;), Bird(&quot;Tweety&quot;, &quot;Bird&quot;)]

for animal in animals:
    animal.speak()
</code><!--]--></pre><!--]--><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>抽象</p></main></div><p><!--[-->理解“抽象”是理解面向对象的一个关键点，我们从现实中的例子来解释为什么“抽象只关注核心功能”。<!--]--></p><p><!--[-->在一个动物园管理系统中，管理员需要统计各种动物的叫声，但管理员不关心具体是哪种动物，只需要知道它们会“说话”即可。因此，我们用抽象类 Animal 定义了所有动物的共同特性，并让具体的动物（如狗和猫）实现各自的叫声。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>from abc import ABC, abstractmethod

class Animal(ABC):  # 抽象类：定义动物的核心功能
    @abstractmethod
    def speak(self):
        pass  # 动物都会叫，但具体怎么叫由子类决定

class Dog(Animal):  # 子类：具体实现
    def speak(self):
        return &quot;Bark!&quot;

class Cat(Animal):  # 子类：具体实现
    def speak(self):
        return &quot;Meow!&quot;

# 使用抽象类
animals = [Dog(), Cat()]  # 动物园里有狗和猫
for animal in animals:  # 遍历动物，不关心具体是哪种
    print(f&quot;The animal says: {animal.speak()}&quot;)  # 统一调用接口获取叫声
</code><!--]--></pre><!--]--><p><!--[--><strong><!--[-->为什么抽象只关注核心功能？<!--]--></strong><!--]--></p><ol><!--[--><li><!--[-->Animal 只定义了 speak() 方法，说明每个动物都能“发声”，这是核心功能。<!--]--></li><li><!--[-->子类（Dog 和 Cat）实现各自的细节，用户只需调用 speak()，不必关心内部逻辑。<!--]--></li><!--]--></ol><p><!--[-->抽象简化了程序的逻辑，只暴露必要的功能，隐藏了实现的复杂性。<!--]--></p><hr><h2 id="声明式语言-2"><a href="#声明式语言-2"><!--[-->声明式语言 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>声明式语言</p></main></div><p><!--[--><strong><!--[-->特点 1: 描述“做什么”，而非“怎么做”<!--]--></strong> <br>
例如 SQL 的 <code class=""><!--[-->SELECT name FROM students WHERE age &gt; 18;<!--]--></code><!--]--></p><main class="text-tip"><!--[--><p><!--[-->描述性逻辑：查询所有名字，满足条件年龄大于 18。
无需考虑数据库如何执行索引、扫描、排序等。<!--]--></p><!--]--></main><br><p><!--[--><strong><!--[-->特点 2: 高层次抽象<!--]--></strong> <br>
声明式语言提供了 <strong><!--[-->更高的抽象层次，屏蔽底层的实现细节<!--]--></strong>。通过简单的规则、事实、函数等描述问题，降低开发者的认知负担。<!--]--></p><br><p><!--[--><strong><!--[-->特点3: 更接近自然语言<!--]--></strong> <br>
声明式语言往往用更直观、逻辑性强的方式表达程序，接近人类思维方式。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>range(1, 10).filter(even).sum()
替代 sum = 0; for (i = 1; i &lt;= 10; i++) { if (even(i)) sum +=i; } return sum;

---
抽象程度高，屏蔽了低层次的逻辑，专注于问题的核心逻辑。
</code><!--]--></pre><!--]--><p><!--[--><strong><!--[-->特点 4: 自动推理与隐式实现<!--]--></strong> <br>
声明式语言将 <strong><!--[-->实现细节交给底层引擎处理，如推理、优化或并发处理。<!--]--></strong><!--]--></p><ul><!--[--><li><!--[-->Prolog：描述规则后，Prolog 会自动推断出答案，无需手动编写具体逻辑。<!--]--></li><li><!--[-->SQL：数据库管理系统自动选择最优查询路径（如索引优化）。<!--]--></li><li><!--[-->CSS: 你只管描述效果，接下来由浏览器引擎实现。<!--]--></li><!--]--></ul><hr><h2 id="repl-2"><a href="#repl-2"><!--[-->REPL 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>REPL</p></main></div><p><!--[-->REPL(Read-Eval-Print Loop)，是一种交互式编程环境，可以一行一行地输入代码，立即看到结果，非常适合学习、测试和调试。每个单词都有其含义，很方便理解：<!--]--></p>





























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Name<!--]--></th><th><!--[-->Info<!--]--></th><th><!--[-->Exp<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->Read<!--]--></td><td><!--[-->读取输入的表达式<!--]--></td><td><!--[-->你输入一行 Code<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Eval<!--]--></td><td><!--[-->计算表达式的结果<!--]--></td><td><!--[-->解释器执行这段 Code<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Print<!--]--></td><td><!--[-->打印输出结果<!--]--></td><td><!--[-->将计算结果显示在终端上<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Loop<!--]--></td><td><!--[-->回到开头等待下一行输入<!--]--></td><td><!--[-->循环执行下一条命令<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->这个我们都很熟悉，比如你可以输入 <code class=""><!--[-->node<!--]--></code> 进入 node.js 的 REPL，输入 <code class=""><!--[-->python<!--]--></code> 进入 python 的 REPL。当然我一般比较懒，在学习某个语言的时候，例如我不会用到的，例如 io lang、prolog 我会用在线的 REPL 环境，例如 <a href="https://tio.run/#" rel="nofollow"><!--[-->TIO.RUN<!--]--></a> 以及 Lang community 提供的在线 REPL 环境，例如 Scala 的 <a href="https://scastie.scala-lang.org/" rel="nofollow"><!--[-->scastie<!--]--></a>。<!--]--></p><hr><h2 id="eda-2"><a href="#eda-2"><!--[-->EDA 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>事件驱动架构</p></main></div><p><!--[-->[事件驱动架构（EDA, Event-driven architecture)(<a href="https://en.wikipedia.org/wiki/Event-driven_architecture" rel="nofollow"><!--[-->https://en.wikipedia.org/wiki/Event-driven_architecture<!--]--></a>) 一句话概括就是以 <strong><!--[-->事件驱动的<!--]--></strong> 。要理解 EDA 很简单的方式就是了解事件。其核心思想是 <strong><!--[-->系统中的行为由“事件”的发生来驱动<!--]--></strong>，例如:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>[User Clicks Button]
      ↓
[Event Producer: UI 层构造 ClickedEvent]
      ↓
[Event Channel: Kafka 传递事件]
      ↓
[Event Processor: Akka Actor 解析并调用服务]
      ↓
[Downstream: 更新订单系统，发送确认邮件]
</code><!--]--></pre><!--]--><p><!--[-->1.事件发布者(Event producer)<!--]--></p><ul><!--[--><li><!--[-->用户点击了按钮（UI事件）<!--]--></li><li><!--[-->文件上传成功（系统事件）<!--]--></li><li><!--[-->新订单创建（业务事件）<!--]--></li><li><!--[-->接收到一条消息（网络事件）<!--]--></li><!--]--></ul><p><!--[-->2.事件通道(Event producer)<!--]--></p><ul><!--[--><li><!--[-->事件传递的媒介（如消息队列 Kafka、Akka EventStream）<!--]--></li><!--]--></ul><p><!--[-->3.事件处理引擎（Event Processing Engine）<!--]--></p><ul><!--[--><li><!--[-->负责识别事件、执行业务逻辑，触发下游动作。<!--]--></li><li><!--[-->业务反应：更新库存、发送通知、调用微服务<!--]--></li><li><!--[-->规则判断：结合业务规则系统进行复杂事件处理（CEP）<!--]--></li><!--]--></ul><p><!--[-->4.下游事件驱动行为（Downstream Event-Driven Activity）<!--]--></p><ul><!--[--><li><!--[-->事件处理结果带来的后续行为，可是自动的，也可能是通知型的。<!--]--></li><li><!--[-->通知类操作：发送邮件、短信、推送消息<!--]--></li><li><!--[-->状态更新：更新数据库、状态缓存<!--]--></li><li><!--[-->触发新的事件：继续发出后续事件，形成事件链<!--]--></li><li><!--[-->系统响应：响应用户 UI，改变页面内容<!--]--></li><!--]--></ul><p><!--[-->这些“事件”被捕捉到之后，会通知相应的处理逻辑去做一些事。上面这四个逻辑叫 &quot;Event flow layers(事件流层)&quot;:<!--]--></p>





























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->层级<!--]--></th><th><!--[-->名称<!--]--></th><th><!--[-->功能描述<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->1<!--]--></td><td><!--[--><strong><!--[-->Event Producer<!--]--></strong><!--]--></td><td><!--[-->监听/感知事件，构造为事件结构。可为传感器、系统、服务。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->2<!--]--></td><td><!--[--><strong><!--[-->Event Channel<!--]--></strong><!--]--></td><td><!--[-->事件传递通道。负责把事件从生产者发送到处理者（消息队列、TCP、日志等）。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->3<!--]--></td><td><!--[--><strong><!--[-->Event Processing Engine<!--]--></strong><!--]--></td><td><!--[-->核心业务逻辑。判断事件类型，做出反应、触发动作。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->4<!--]--></td><td><!--[--><strong><!--[-->Downstream Activity<!--]--></strong><!--]--></td><td><!--[-->后续动作，如发送通知、更新数据库、触发下游服务等。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->预支相对应的还有很多类型的驱动，例如：<!--]--></p>


























































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->驱动方式<!--]--></th><th><!--[-->核心触发点<!--]--></th><th><!--[-->特点/用途<!--]--></th><th><!--[-->示例或代表技术<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->事件驱动<!--]--></td><td><!--[-->系统中事件<!--]--></td><td><!--[-->解耦、并发好<!--]--></td><td><!--[-->Akka, Kafka, ZIO<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->请求/命令驱动<!--]--></td><td><!--[-->明确调用<!--]--></td><td><!--[-->同步逻辑、明确流向<!--]--></td><td><!--[-->REST API, RPC, CQRS<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->数据驱动<!--]--></td><td><!--[-->数据变化<!--]--></td><td><!--[-->数据核心、处理流程灵活<!--]--></td><td><!--[-->ETL, Pandas, SQL Trigger<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->配置驱动<!--]--></td><td><!--[-->配置文件<!--]--></td><td><!--[-->灵活部署、低代码<!--]--></td><td><!--[-->Spring Boot, Kubernetes<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->时间驱动<!--]--></td><td><!--[-->时间点<!--]--></td><td><!--[-->定时任务、周期性处理<!--]--></td><td><!--[-->Cron, Airflow, Spark<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->状态驱动<!--]--></td><td><!--[-->状态转移<!--]--></td><td><!--[-->有限流程系统、自动机控制<!--]--></td><td><!--[-->FSM, 工作流引擎<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->用户驱动<!--]--></td><td><!--[-->用户输入<!--]--></td><td><!--[-->高交互性 UI 系统<!--]--></td><td><!--[-->React, Android, Game<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->测试驱动开发<!--]--></td><td><!--[-->单元测试<!--]--></td><td><!--[-->代码质量好、文档即测试<!--]--></td><td><!--[-->JUnit, ScalaTest<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><hr><h2 id="函数式核心-2"><a href="#函数式核心-2"><!--[-->函数式核心 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>函数式编程的核心</p></main></div><p><!--[-->函数式编程的核心就是 <strong><!--[-->高阶函数<!--]--></strong> 和 <strong><!--[-->模式匹配<!--]--></strong>, 在此之前我只知道他们做什么，能实现出什么效果。而不知道它们叫什么（这就是没有系统性学习的弊端，上限低下限也低）：<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->高阶函数是一个更高层的抽象，它的核心是 <strong><!--[-->把函数当作一种可传递、可组合的“工具”<!--]--></strong>，而不是单纯的数据。能够接收函数作为参数，或者返回函数作为结果的函数”<!--]--></p>












<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->高阶函数(HOF)<!--]--></th><th><!--[-->普通函数<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->允许你自己换榨汁模块（输入橙子+榨苹果模块→输出苹果汁）<!--]--></td><td><!--[-->固定做橙汁（输入橙子→输出果汁）<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><!--]--></main><!--]-->












<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->NAME<!--]--></th><th><!--[-->INFO<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><a href="https://www.erlang.org/docs/23/man/lists#mapfoldl-3" rel="nofollow"><!--[-->lists:map/2<!--]--></a><!--]--></td><td><!--[-->对列表中的元素求和并同时对其进行双精度运算<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->下面的 code 涵盖了高阶函数、匿名函数以及函数引用，类似于这样的效果：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>+----------------------+             +----------------------+          +----------------------+
|    (lists:map/2)     &lt;-----+       |   (fun(X) -&gt; ...)    |          |   (fun Module:F/A)   |
|         HOF          |     +-------|  anonymous function  |          |  function reference  |
+----------------------+             +----------------------+          +----------------------+
           ^                                     ^                                 ^           
Receive the function                 Provisional |                      Point to an existing   
as a parameter                       definition  |                      function               
           |                                     |                                 |           
           |                                     |                                 |           
           |                                     |                                 |           
           |                                     |                                 |           
+----------------------+             +----------------------+          +----------------------+
|     [1,2,3,4,5]      |             |     (X*2, X*X……)     |          |  (string:to_upper)   |
|      data list       |             |  logical processing  |          | Reuse existing logic |
+----------------------+             +----------------------+          +----------------------+

-module(main).
-export([start/0]).

start() -&gt;
    % 例子1: 将列表中的每个数字乘以2
    Numbers = [1, 2, 3, 4, 5],
    Doubled = lists:map(fun(X) -&gt; X * 2 end, Numbers),
    io:format(&quot;source: ~p~n&quot;, [Numbers]),
    io:format(&quot;1 Doubled: ~p~n&quot;, [Doubled]),

    % 例子2: 将字符串列表转换为大写
    Words = [&quot;hello&quot;, &quot;world&quot;, &quot;erlang&quot;],
    Uppercase = lists:map(fun string:to_upper/1, Words),
    io:format(&quot;Source: ~p~n&quot;, [Words]),
    io:format(&quot;2 Uppercase: ~p~n&quot;, [Uppercase]),

    % 例子3: 计算每个数字的平方
    Squares = lists:map(fun(X) -&gt; X * X end, Numbers),
    io:format(&quot;3 Squares: ~p~n&quot;, [Squares]),

    % 例子4: 使用自定义函数
    ProcessedList = lists:map(fun process_element/1, Numbers),
    io:format(&quot;4 ProcessedList: ~p~n&quot;, [ProcessedList]),

    % 例子5: 处理元组列表
    People = [{tom, 25}, {alice, 30}, {bob, 35}],
    Ages = lists:map(fun({_Name, Age}) -&gt; Age end, People),
    io:format(&quot;4 age: ~p~n&quot;, [Ages]).

% 模式匹配
process_element(X) when X &gt; 3 -&gt;
    {big, X};
process_element(X) -&gt;
    {small, X}.
</code><!--]--></pre><!--]--><p><!--[-->erlang 是用函数式风格（无状态、纯函数、高阶函数）处理数据，不过也可以通过 <code class=""><!--[-->Process<!--]--></code> 写成类似面向对象的风格。如果是 OOP 风格，那么就会有封装的感觉。<!--]--></p><hr><h1 id="ruby-1"><!--[-->Ruby 1<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>01 Ruby</p></main></div><p><!--[-->作者将 Ruby 列入本书的理由是：<!--]--></p><main class="text-tip"><!--[--><p><!--[-->这是一种面向对象的语言，以易用性和可读性著称。我曾短暂考虑不包括任何面向对象语言，但后来发现将不同编程范式与 OOP（面向对象编程）比较是很有价值的，所以至少包括一种 OOP 语言很重要。
在这本书中，我深入探讨了 Ruby 的元编程，展示了如何扩展其语法，我对最终的结果非常满意。<!--]--></p><!--]--></main><br><main class="text-tip big"><!--[--><p><!--[-->每种语言都有他的特性和独特的点<!--]--></p><!--]--></main><p><!--[-->作者以 Java 和 Visual Basic 、Ruby 描述成一个性格：<!--]--></p>
























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->语言<!--]--></th><th><!--[-->性格<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->java<!--]--></td><td><!--[-->像一个富有的律师哥哥。年轻时很有趣，但现在成了一个 “黑洞”，吸走周围一切乐趣。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Visual Basic<!--]--></td><td><!--[-->像一个染着漂白金发的美容师。她可能解决不了全球变暖，但总能给你理个好发型，而且与她聊天总是特别愉快。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Ruby<!--]--></td><td><!--[-->她有点古怪，总是优雅美丽，略显神秘，还充满魔力。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->C 语言家族<!--]--></td><td><!--[-->严苛高效但毫无乐趣，就像每天晚上要喝一口鱼肝油的日子。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->Ruby 虽然这个保姆也是要督促你喝鱼肝油，但她会加一颗糖奖励你。通过增添趣味和激励热情，让家庭更高效。 引出了 Ruby 的哲学：<!--]--></p><ul><!--[--><li><!--[-->C 家族的目标是让机器运行得更高效，因此对底层细节的掌控更严格，但对程序员的友好度较低。<!--]--></li><li><!--[-->Ruby 的目标是让开发者工作得更高效，它更注重开发体验和代码的可读性，使编程变得更愉快、更直观。<!--]--></li><!--]--></ul><p><!--[-->当我们了解完面向对象的时候，反过头来再看 Ruby 的 Code<!--]--></p><!--[--><pre class="" style=""><!--[--><code>properties = [&#39;object oriented&#39;, &#39;duck typed&#39;, &#39;productive&#39;, &#39;fun&#39;]
properties.each { |property| puts &quot;Ruby is #{property}.&quot; }

---

Ruby is object oriented.
Ruby is duck typed.
Ruby is productive.
Ruby is fun.
</code><!--]--></pre><!--]--><p><!--[-->莫名的有些简洁，凸显了语法糖的魅力，确实让 Ruby 的语法糖让代码书写更加简洁优雅，减少冗余，提升可读性。例如代码块的使用使集合操作变得直观高效。<!--]--></p><hr><h2 id="与-matz-的访谈-1"><a href="#与-matz-的访谈-1"><!--[-->与 Matz 的访谈 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>采访 Yukihiro (Matz) Matsumoto</p></main></div><p><!--[-->作者来到了 Matz 的家乡采访到了 Matz（真的能在家乡碰到 Matz 吗？)<!--]--></p><p><!--[--><strong><!--[-->为什么开发 Ruby？<!--]--></strong><!--]--></p><p><!--[-->我从接触计算机开始就对编程语言产生了兴趣。它们不仅是编程的工具，还能拓展我们的思维方式。很长一段时间，我把研究编程语言当作一种爱好。我实现过几个玩具语言，但都不是真正的语言。<!--]--></p><p><!--[-->到了 1993 年，我接触到 Perl，受到了启发。我觉得如果能将 Lisp、Smalltalk 和 Perl 的特点结合到一个面向对象的语言中，这会是一种极大提高生产力的工具。因此，我开始开发这种语言，并将其命名为 Ruby。<!--]--></p><p><!--[-->最初这只是一个爱好，为了让自己开心。没想到其他程序员竟然也喜欢上这门语言以及背后的设计理念，结果它比我预期的受欢迎得多。<!--]--></p><p><!--[--><strong><!--[-->最喜欢 Ruby 的哪一点？<!--]--></strong><!--]--></p><p><!--[-->我喜欢它让编程变得愉快。就技术而言，我最喜欢的是 代码块（blocks）。它们是被驯化的高阶函数，打开了构建 DSL（领域特定语言）以及其他功能的可能性。<!--]--></p><p><!--[--><strong><!--[-->如果能回到过去，有什么想改的？<!--]--></strong><!--]--></p><p><!--[-->我会移除线程，加入更高级的并发模型，比如 actors（角色）或其他机制。<!--]--></p><ul><!--[--><li><!--[-->Ruby 的线程模型一直被批评为不够现代化。Matz 自己也提到，如果重新设计 Ruby，他会选择更先进的并发模型（如 Actor 模式），来应对并发编程的复杂性。<!--]--></li><!--]--></ul><hr><h2 id="语言的基础概括-1"><a href="#语言的基础概括-1"><!--[-->语言的基础概括 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>语言的基础概括</p></main></div><p><!--[-->接触一个语言时，要了解该语言的 <strong><!--[-->核心编程模型、它如何处理数据类型？<!--]--></strong>。也就将一个语言概括了两个问题，即：<!--]--></p><ol><!--[--><li><!--[-->这门语言的设计理念是什么？是面向对象、函数式还是其他编程范式？<!--]--></li><li><!--[-->Ruby 是动态类型语言，它如何简化类型的使用？它怎么就高效了？<!--]--></li><!--]--></ol><p><!--[-->但是 2025 年这个较为浮躁的环境，我可能还会加一个：<!--]--></p><ol start="3"><!--[--><li><!--[-->这个语言的生态系统怎么样？能否轻松的实现我想要的功能？有没有比较活跃的库、插件维护社区？<!--]--></li><!--]--></ol><p><!--[-->但是对于一些第三点不足的来说，可能是一个机会，但还是要看运气。万一人家自己都放弃不维护了，那作为生态开发者，又该如何应对？有时候这种事情是相互成就的。使用该语言的人数越多，那么生态就越完善，生态维护者也能享受到一定的开源声誉。<!--]--></p><h3 id="解释型与编译型-1"><a href="#解释型与编译型-1"><!--[-->解释型与编译型 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>解释型与编译型语言的区别</p></main></div><p><!--[-->这里引出了两个概念，解释型语言和编译型语言的区别：<!--]--></p>


































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->特性<!--]--></th><th><!--[-->解释执行（Interpreted）<!--]--></th><th><!--[-->编译执行（Compiled）<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->源代码处理方式<!--]--></td><td><!--[-->逐行解释，实时执行<!--]--></td><td><!--[-->编译一次生成机器代码，后续执行直接运行<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->执行速度<!--]--></td><td><!--[-->较慢<!--]--></td><td><!--[-->较快<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->调试与修改<!--]--></td><td><!--[-->简单，修改后可立即看到效果<!--]--></td><td><!--[-->需要重新编译，调试较为复杂<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->生成的文件<!--]--></td><td><!--[-->无需生成可执行文件，直接运行源代码<!--]--></td><td><!--[-->生成独立的可执行文件<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->适用场景<!--]--></td><td><!--[-->快速开发、脚本语言、教学和原型开发<!--]--></td><td><!--[-->需要高性能的系统开发和大型应用开发<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->看到这你可能就会问了，有没有一种语言支持解释型和编译型同时存在的？以下是比较有代表性的，同时支持解释执行和编译执行的语言：<!--]--></p>


































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->语言<!--]--></th><th><!--[-->编译执行<!--]--></th><th><!--[-->解释执行<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->Java<!--]--></td><td><!--[-->编译成字节码 (.class)，由 JVM 执行<!--]--></td><td><!--[-->通过 JVM 解释字节码或 JIT 编译成机器码<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Python<!--]--></td><td><!--[-->编译成字节码 (.pyc)，通过 JIT 优化<!--]--></td><td><!--[-->解释执行字节码，或通过 JIT 转换为机器码<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->JavaScript<!--]--></td><td><!--[-->编译成字节码，V8 引擎执行<!--]--></td><td><!--[-->解释执行字节码，或 JIT 优化热代码<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->C#<!--]--></td><td><!--[-->编译成中间语言 (IL)，由 CLR 执行<!--]--></td><td><!--[-->CLR 将 IL 转换为机器码并执行（JIT）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Ruby<!--]--></td><td><!--[-->编译成字节码<!--]--></td><td><!--[-->由解释器执行字节码，或通过 JIT 优化<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><h4 id="混合模式常见漏洞-2"><a href="#混合模式常见漏洞-2"><!--[-->混合模式常见漏洞 2<!--]--></a></h4><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>混合模式常见漏洞</p></main></div><p><!--[-->这种混合模式下也会存在一些缺点，比如性能、 安全性的问题。比如针对即时编译(JIT,Just-in-time compilation) 存在的几个具有代表性的 CVE 编号：<!--]--></p><ol><!--[--><li><!--[--><strong><!--[-->CVE-2019-5786 - V8 JIT 编译器漏洞<!--]--></strong><ul><!--[--><li><!--[--><strong><!--[-->影响<!--]--></strong>：Google Chrome<!--]--></li><li><!--[--><strong><!--[-->描述<!--]--></strong>：V8 引擎的 JIT 编译器漏洞，攻击者通过恶意 JavaScript 代码可能导致内存损坏，执行任意代码。<!--]--></li><li><!--[--><strong><!--[-->修复<!--]--></strong>：Google 发布补丁更新 V8 引擎。<!--]--></li><!--]--></ul><!--]--></li><li><!--[--><strong><!--[-->CVE-2020-11008 - JScript 和 VBScript 引擎漏洞<!--]--></strong><ul><!--[--><li><!--[--><strong><!--[-->影响<!--]--></strong>：Microsoft Edge, Internet Explorer<!--]--></li><li><!--[--><strong><!--[-->描述<!--]--></strong>：通过构造恶意网页，攻击者可触发 JIT 编译器内存损坏，执行任意代码。<!--]--></li><li><!--[--><strong><!--[-->修复<!--]--></strong>：Microsoft 发布安全更新。<!--]--></li><!--]--></ul><!--]--></li><li><!--[--><strong><!--[-->CVE-2018-5292 - Firefox JIT 编译器漏洞<!--]--></strong><ul><!--[--><li><!--[--><strong><!--[-->影响<!--]--></strong>：Mozilla Firefox<!--]--></li><li><!--[--><strong><!--[-->描述<!--]--></strong>：Firefox 的 JIT 编译器漏洞，允许攻击者通过恶意网页导致内存访问错误，执行恶意代码。<!--]--></li><li><!--[--><strong><!--[-->修复<!--]--></strong>：Mozilla 发布修复补丁。<!--]--></li><!--]--></ul><!--]--></li><li><!--[--><strong><!--[-->CVE-2017-0199 - Microsoft Office JIT 漏洞<!--]--></strong><ul><!--[--><li><!--[--><strong><!--[-->影响<!--]--></strong>：Microsoft Office<!--]--></li><li><!--[--><strong><!--[-->描述<!--]--></strong>：通过恶意 Office 文件，攻击者利用 JIT 漏洞执行任意代码。<!--]--></li><li><!--[--><strong><!--[-->修复<!--]--></strong>：Microsoft 发布安全更新。<!--]--></li><!--]--></ul><!--]--></li><li><!--[--><strong><!--[-->CVE-2015-5167 - JIT 编译中的整数溢出漏洞<!--]--></strong><ul><!--[--><li><!--[--><strong><!--[-->影响<!--]--></strong>：Apple WebKit<!--]--></li><li><!--[--><strong><!--[-->描述<!--]--></strong>：WebKit 的 JIT 编译器整数溢出漏洞，导致内存损坏，执行恶意代码。<!--]--></li><li><!--[--><strong><!--[-->修复<!--]--></strong>：Apple 发布修复补丁。<!--]--></li><!--]--></ul><!--]--></li><!--]--></ol><p><!--[-->在 JIT 编译中，常见的攻击手法如 JIT spraying，俗称 JIT 喷射。攻击者通过利用 JIT 编译的特性，向堆中注入恶意数据，从而使堆内存变为可执行的。当攻击者能够控制堆的内容并将代码执行转移到堆内存中时，就可能会发生安全漏洞。通过这种方式，攻击者可以执行任意代码，从而威胁系统的安全性。<!--]--></p><p><!--[-->JIT 的工作原理就是源代码或字节码转换为机器代码，并直接在内存中执行，而不是先写入磁盘再执行。虽然提高了工作效率，但由于现代的操作系统存在内存保护的机制，因此会将 JIT 进行标记然后执行，如果内存可 W^X（即可写/可执行内存），那就会从中找到攻击的点进行利用。<!--]--></p><h2 id="类型系统-1"><a href="#类型系统-1"><!--[-->类型系统 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>类型系统</p></main></div><p><!--[-->作者通过在这一章引出了类型系统的概念，Ruby 的设计哲学。强类型我们都知道，比如以下 code：<!--]--></p><!--[--><pre class="language-ruby" style=""><!--[--><code>irb(main):002:0&gt; x = 1 - 1
=&gt; 0
irb(main):003:0&gt; x = 1 - &#39;one&#39;
Traceback (most recent call last):
        5: from /usr/bin/irb:23:in `&lt;main&gt;&#39;
        4: from /usr/bin/irb:23:in `load&#39;
        3: from /Library/Ruby/Gems/2.6.0/gems/irb-1.0.0/exe/irb:11:in `&lt;top (required)&gt;&#39;
        2: from (irb):3
        1: from (irb):3:in `-&#39;
TypeError (String can&#39;t be coerced into Integer)
</code><!--]--></pre><!--]--><p><!--[-->Ruby 是强类型的，这意味着当类型不匹配时你会得到一个错误。Ruby 会在运行时进行这些类型检查，而不是在编译时。<!--]--></p><h3 id="鸭子类型-1"><a href="#鸭子类型-1"><!--[-->鸭子类型 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>鸭子类型</p></main></div><p><!--[-->鸭子类型的核心就是一个谚语：<!--]--></p><main class="text-tip big"><!--[--><p><!--[--><strong><!--[-->如果它看起来像鸭子，游泳像鸭子，叫起来像鸭子，那么它可能是一只鸭子。<!--]--></strong> <br>
If it looks like a duck, swims like a duck, and quacks like a duck, then it probably is a duck.<!--]--></p><!--]--></main><p><!--[-->鸭子类型源自于溯因推理，也被称之为反向推理，它是开始于事实的集合，并推导出其最佳解释的推理过程。我们同样可以将那个谚语扩充以下到 WAF 中：<!--]--></p><main class="text-tip"><!--[--><p><!--[-->如果这个用户的请求头看起来很神秘，操作也很凌乱，经常请求些隐秘数据，那么他一定不怀好意<!--]--></p><!--]--></main><!--[--><pre class="language-ruby" style=""><!--[--><code>&gt;&gt; i = 0
=&gt; 0.0
&gt;&gt; a = [&#39;100&#39;, 100.0]
=&gt; [&#39;100&#39;, 100.0]
&gt;&gt; while i &lt; 2
&gt;&gt; puts a[i].to_i
&gt;&gt; i = i + 1
&gt;&gt; end
100
100
</code><!--]--></pre><!--]--><p><!--[-->上面 code 中， <code class=""><!--[-->&#39;100&#39;<!--]--></code> 是字符串，而 <code class=""><!--[-->100.0<!--]--></code> 是浮点数，但在 ruby 运行时来看，100.0 是 100,‘100&#39; 也是 100 所以这是鸭子类型的应用效果。<!--]--></p><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>猴子补丁</p></main></div><h2 id="猴子补丁-1"><a href="#猴子补丁-1"><!--[-->猴子补丁 1<!--]--></a></h2><p><!--[-->在 Ruby 中，开放类(Open classes) 被叫作<a href="https://en.wikipedia.org/wiki/Monkey_patch#:~:text=In%20computer%20programming%2C%20monkey%20patching,altering%20the%20original%20source%20code." rel="nofollow"><!--[-->猴子补丁(Monkey Patch)<!--]--></a>。指的是通过动态修改现有的类或模块来增加、修改或替换它们的功能。这种做法使得原本不支持某些功能的类能够在运行时被修改，从而增加新的行为。<!--]--></p><p><!--[-->虽然这种做法可以作为元编程的特性，但也有一些安全问题，演变成为了一种攻击手法。例如 <a href="https://access.redhat.com/security/cve/CVE-2024-21896" rel="nofollow"><!--[-->CVE-2024-21896<!--]--></a> 通过猴子补丁修改 Buffer 内部实现，导致路径遍历漏洞的问题。<!--]--></p><hr><h1 id="io-lang-1"><!--[-->Io Lang 1<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Io Lang</p></main></div><p><!--[-->第一次看到 IO 还有点意外，我联想到了 I/O、甚至是 CS 很火的信息学奥林匹克竞赛（英语：Olympiad in Informatics，简称：OI）后者让我有联想的是太多互联网很社会参加这个比赛了，看到初中高中的大放异彩很难不觉得自己是个废物的实事。这些大佬参加 IO 后还会去打 CTF，然后刷 hackthebox、以及各种靶场。当然像我这样的只能提交个签到题，虽然不知现在签到题难度如何。<!--]--></p><p><!--[-->在我 15 岁的时候接触到了一点，做了个签到题没想到还会记录至今。<a href="https://ctftime.org/team/87624" rel="nofollow"><!--[-->Real World CTF 2019 Quals<!--]--></a>。没想到现在长亭已经给阿里收购了，不过长亭这个名字挺好听的，最近我还听到了一个名字叫「基调听云」也是很好听，一看就是注册资本没到 1000w 不给注册的那种存在。(有一说一长亭之前的官网有点 low，现在虽然慢慢变帅了，但是移动端有点小问题，不过不是我样的 loser 能评价的)<!--]--></p><p><!--[-->我了解过 IO 的历史，根据维基百科的介绍：<!--]--></p><main class="text-tip"><!--[--><p><!--[-->该语言由 Steve Dekorte 于 2002 年创建，当时他试图用他的语言 Cel 来帮助朋友 Dru Nelson。他发现自己确实不太了解语言的工作原理，并开始编写一种小型语言来更好地理解问题。<!--]--></p><!--]--></main><p><!--[-->看到这时我开始深深反思为什么我没有一个为了教会我语言而去编写一个语言的好朋友。如果要在线体验 Io lang 可以使用 <a href="https://tio.run/" rel="nofollow"><!--[-->Tio.run<!--]--></a> （看 Io lang 的 Twitter 发现的好用工具）<!--]--></p><hr><h2 id="对象原型和继承-2"><a href="#对象原型和继承-2"><!--[-->对象、原型和继承 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>对象、原型和继承</p></main></div><p><!--[-->Io lang 可以更好的理解对象、原型以及继承，因为他是基于原型的面向对象语言:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>   +----------------+                                   
   |                |                                   
+-&gt;|     object     |                                   
|  |                |                                   
|  +----------------+                                   
|                                                       
|  +----------------+                                   
|  |                |                                   
+-&gt;|    Vehicle     |                                   
|  |     +----------+----------------------------------+
|  +-----+Prototype: Object                            |
|        +---------------------------------------------+
|        |Description: Something to take you far away  |
|        +---------------------------------------------+
|                                                       
|  +----------------+                                   
|  |                |                                   
+-&gt;|      Car       |                                   
|  |     +----------+----------------------------------+
|  +-----+Prototype: Vehicle                           |
|        +---------------------------------------------+
|                                                       
|  +----------------+                                   
|  |                |                                   
+--|    Ferrari     |                                   
   |     +----------+----------------------------------+
   +-----+Prototype: Car                               |
         +---------------------------------------------+


// 创建一个基础原型对象 Object
Object := Object clone

// 创建 Vehicle 原型，继承自 Object
Vehicle := Object clone

// 给 Vehicle 添加一个描述属性
Vehicle description := &quot;Something to take you far away&quot;

// 创建 Car 原型，继承自 Vehicle
Car := Vehicle clone

// 给 Car 添加属性
Car description := &quot;A fast car&quot;

// 创建 Ferrari 原型，继承自 Car
Ferrari := Car clone

// 给 Ferrari 添加新的属性
Ferrari description := &quot;A Ferrari, a dream car&quot;

// 测试创建的对象

// 访问 Ferrari 的描述属性，应该返回 Ferrari 的描述
Ferrari description print  // 输出: A Ferrari, a dream car

// 访问 Car 的描述属性，应该返回 Car 的描述
Car description print      // 输出: A fast car

// 访问 Vehicle 的描述属性，应该返回 Vehicle 的描述
Vehicle description print  // 输出: Something to take you far away
</code><!--]--></pre><!--]--><p><!--[-->这张图表示了对象的构成，描述一个对象，也就是面向对象（当然我是从书上偷的，因为我觉得这张图确实很简洁明了。）说实话我并不是很喜欢这个写法，太多继承了。<!--]--></p><p><!--[-->如果是原型继承（Prototype Inheritance）的语言，他们的特性之一就是 <strong><!--[-->动态修改<!--]--></strong>:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>io lang
---
duck := Object clone
duck name := &quot;Duck&quot;
duck speak := method(&quot;quack&quot; println)

# 动态修改 slot
duck walk := method(&quot;waddle&quot; println)
duck speak  # 输出：quack
duck walk   # 输出：waddle

javascript
---

// 创建一个对象
const duck = {
  name: &quot;Duck&quot;,
  speak: function () {
    console.log(&quot;quack&quot;);
  }
};

// 动态添加或修改方法
duck.walk = function () {
  console.log(&quot;waddle&quot;);
};

// 调用方法
duck.speak(); // 输出：quack
duck.walk();  // 输出：waddle
</code><!--]--></pre><!--]--><hr><h2 id="方法-1"><a href="#方法-1"><!--[-->方法 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>方法和块</p></main></div><p><!--[-->在 Io lang 中，方法也是对象，不过给出了更符合的类型，即 Block：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>method() type print
==&gt; Block
</code><!--]--></pre><!--]--><h3 id="函数-1"><a href="#函数-1"><!--[-->函数 1<!--]--></a></h3>







































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->编程语言<!--]--></th><th><!--[-->方法是否为对象<!--]--></th><th><!--[-->说明<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><strong><!--[-->Io<!--]--></strong><!--]--></td><td><!--[-->是<!--]--></td><td><!--[-->在 Io 中，方法是对象，可以像其他对象一样操作、赋值、传递。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->JavaScript<!--]--></strong><!--]--></td><td><!--[-->是<!--]--></td><td><!--[-->JavaScript 中的函数本质上是对象，可以作为参数传递、存储。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Python<!--]--></strong><!--]--></td><td><!--[-->是<!--]--></td><td><!--[-->Python 中的函数是对象，可以像其他对象一样操作、传递。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Ruby<!--]--></strong><!--]--></td><td><!--[-->否（但支持块作为对象）<!--]--></td><td><!--[-->Ruby 中方法本身不是对象，但可以使用块（block）传递和调用。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Java<!--]--></strong><!--]--></td><td><!--[-->否<!--]--></td><td><!--[-->Java 中方法不是对象，方法是属于类的。可以使用 Lambda 表达式作为方法的引用，但这些并非对象。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->C#<!--]--></strong><!--]--></td><td><!--[-->否（但支持委托作为对象）<!--]--></td><td><!--[-->C# 中方法不是对象，但可以使用委托（Delegate）作为方法引用传递和存储。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->我相信看到这肯定会有疑问，函数和数学中的函数有那些共同的作用？比如数学中的函数 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="9.598ex" height="2.452ex" role="img" focusable="false" viewBox="0 -833.9 4242.1 1083.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path><path id="MJX-1-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-1-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-1-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D453" xlink:href="#MJX-1-TEX-I-1D453"></use></g><g data-mml-node="mo" transform="translate(550,0)"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(939,0)"><use data-c="1D465" xlink:href="#MJX-1-TEX-I-1D465"></use></g><g data-mml-node="mo" transform="translate(1511,0)"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(2177.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="msup" transform="translate(3233.6,0)"><g data-mml-node="mi"><use data-c="1D465" xlink:href="#MJX-1-TEX-I-1D465"></use></g><g data-mml-node="mn" transform="translate(605,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g></g></g></svg></mjx-container> 这个函数我们可以通过 javascript 中的 <code class=""><!--[-->function<!--]--></code> 即函数理解：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>function add(x, y) {
    return x + y;
}

let result = add(2, 3);  // result = 5
</code><!--]--></pre><!--]--><p><!--[-->函数是一个特别重要的概念，特别是在数学领域。在普林斯顿微积分读本中，说明了函数在微积分的重要性：<!--]--></p><main class="text-tip big"><!--[--><p><!--[-->不借助函数却想去做微积分，这无疑会是你所能做的最无意义的事。<br>
如果说微积分也有营养成分表，那么函数肯定会排在最前面。<!--]--></p><!--]--></main><p><!--[-->有一说一我始终没有接触到应用到微积分的层次，但我会慢慢往这方面发展。<!--]--></p><hr><h2 id="打破规则-2"><a href="#打破规则-2"><!--[-->打破规则 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>打破规则</p></main></div><p><!--[-->在本章节，作者提到了一部电影 <a href="https://zh.wikipedia.org/zh-cn/%E5%92%AA%E8%B5%B0%E5%A0%82" rel="nofollow"><!--[-->《春天不是读书天》（Ferris Bueller&#39;s Day Off)<!--]--></a> : 电影中，中产阶级的高中生费里斯·布勒（Ferris Bueller）假扮成芝加哥的“香肠之王”，用这一经典伪装成功进入了一家高档餐厅。他敢于打破规则，最终得到了一个绝佳的座位。<!--]--></p><p><!--[-->这部电影的导演和编剧是 <a href="https://en.wikipedia.org/wiki/John_Hughes_(filmmaker)" rel="nofollow"><!--[-->John Hughes<!--]--></a> 可能有些陌生。但他其实是 <a href="https://en.wikipedia.org/wiki/Home_Alone" rel="nofollow"><!--[-->小鬼当家<!--]--></a> 的编剧。他作为《春天不是读书天》的编剧。表示这部电影是写给芝加哥的情书：“我真的想尽可能多地捕捉芝加哥。不仅仅是建筑和景观，而是精神。”<!--]--></p><main class="text-tip"><!--[--><p><!--[-->有一说一芝加哥、洛杉矶这些好像是非常自由的，经常有美剧在这里取景拍摄，例如芝加哥警署、无耻之徒。芝加哥的犯罪率是 66.11, 洛杉矶的是 53.77;<!--]--></p><p><!--[-->犯罪率查询: <a href="https://www.numbeo.com/crime/compare_cities.jsp?country1=United+States&amp;city1=Chicago%2C+IL&amp;country2=United+States&amp;city2=Los+Angeles%2C+CA" rel="nofollow"><!--[-->numbeo<!--]--></a><!--]--></p><!--]--></main><p><!--[-->同时，作者根据这部电影主角的行为，来延伸给语言定义了性格：<!--]--></p>




























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[--><strong><!--[-->背景<!--]--></strong><!--]--></th><th><!--[--><strong><!--[-->习惯的编码风格<!--]--></strong><!--]--></th><th><!--[--><strong><!--[-->对 Bueller 伪装的看法<!--]--></strong><!--]--></th><th><!--[--><strong><!--[-->在 Io 中的建议<!--]--></strong><!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><strong><!--[-->Java<!--]--></strong><!--]--></td><td><!--[-->严格规则，结构化<!--]--></td><td><!--[-->可能认为自由过度，不合适，Bueller 应该被赶出去<!--]--></td><td><!--[-->放松一点，利用 Io 的强大灵活性<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Perl<!--]--></strong><!--]--></td><td><!--[-->随意风格，注重结果<!--]--></td><td><!--[-->可能喜欢 Bueller 的伪装，因为它成功了<!--]--></td><td><!--[-->需要收敛一些，引入更多的纪律性<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Io<!--]--></strong><!--]--></td><td><!--[-->采用 slot 和 message 机制<!--]--></td><td><!--[-->更加自由，灵活性极高<!--]--></td><td><!--[-->需要探索 slot（槽）和 message（消息），学习如何塑造核心行为<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->看完这一段后我花了两个小时看了这部电影，讲述的是男主即将高中毕业升入大学。父母给男主买了个电脑，给妹妹买了个汽车。男主利用自己学到的计算机知识逃课了很多次还没有给发现。逃课的手法大多是社会工程学，例如变声、伪装、欺骗、通过弱点攻击系统篡改信息等。<!--]--></p><h3 id="消息-1"><a href="#消息-1"><!--[-->消息 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>一切都是消息</p></main></div><p><!--[-->几乎一切都是消息，意味着在 Io lang 中可以拦截、修改甚至是重写，因为一切都是消息。这让我联想到了几乎一切都是函数的 javascript。<!--]--></p>



















<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->概念<!--]--></th><th><!--[-->代表语言<!--]--></th><th><!--[-->特点<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><strong><!--[-->几乎一切都是消息<!--]--></strong><!--]--></td><td><!--[-->Io<!--]--></td><td><!--[-->代码执行依赖对象之间的消息传递，方法调用、控制语句等都是发送消息<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->几乎一切都是函数<!--]--></strong><!--]--></td><td><!--[-->Haskell、JavaScript<!--]--></td><td><!--[-->代码执行依赖函数，控制语句、计算等都是函数操作<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><hr><h3 id="反射机制-2"><a href="#反射机制-2"><!--[-->反射机制 2<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>反射机制</p></main></div><p><!--[-->我一开始看到 <code class=""><!--[-->slot<!--]--></code> 还以为是 vue 中的 <code class=""><!--[-->&lt;slot&gt;<!--]--></code> 但他们其实是两个概念。但都有一个共同的特点即 <strong><!--[-->灵活性、动态性、扩展性<!--]--></strong>,它们都体现了“灵活性”和“动态化设计”的编程哲学：<!--]--></p><ol><!--[--><li><!--[-->Io 中的 Slot 更适合描述为一个“动态对象的核心特性”，与属性、方法、反射、元编程相关。<!--]--></li><li><!--[-->Vue 中的 Slot 则是一个“组件内容占位机制”，专注于解决组件复用和模板动态化的问题。<!--]--></li><!--]--></ol><!--[--><pre class="" style=""><!--[--><code>duck := Object clone
duck name := &quot;Duck&quot;
duck speak := method(&quot;quack&quot; println)

# 动态修改 slot
duck walk := method(&quot;waddle&quot; println)
duck speak  # 输出：quack
duck walk   # 输出：waddle
</code><!--]--></pre><!--]--><hr><h2 id="领域特定语言-dsl-2"><a href="#领域特定语言-dsl-2"><!--[-->领域特定语言 (DSL) 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>时代的尘土</p></main></div><p><!--[-->我相信 IO Lang 在当时这些特性一定会受到很多人的喜爱（抛出那个作者和朋友之间的故事不谈）。但可惜是的 Io lang 目前貌似并不是特别的活跃，社区、生态都很小众。支持 IO Lang 特性的语言有很多，他们可能实现起来稍微或者说略微复杂，但他们的生态和社区可以弥补这一点。举个例子：<!--]--></p><p><!--[-->如果你在面试的时候，说你熟练使用 Io lang，你的面试官可能并不知道 Io lang。<br>
人家可能只知道 Java、PHP、C++、Python……这些主流的语言。<!--]--></p><p><!--[-->目前。以我的知识储备来理解 DSL，更多的是处理特定格式的数据。以及多语言之间的配合，为某一个特定领域量身定制的语言，它的语法和功能紧密围绕该领域的需求。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>iolang
---

# 创建一个新的对象 Builder，继承自 Object
Builder := Object clone

# 为 Builder 添加一个 `forward` 方法，用于捕获未定义的消息
Builder forward := method(
  # 打印开始标签，比如 `&lt;ul&gt;` 或 `&lt;li&gt;`，基于收到的消息名称
  writeln(&quot;&lt;&quot;, call message name, &quot;&gt;&quot;)

  # 遍历消息的所有参数
  call message arguments foreach(
    arg,  # 当前遍历到的参数
    # 对参数进行处理，将它解析为内容
    content := self doMessage(arg);

    # 如果参数类型是字符串（Sequence），直接打印内容
    if(content type == &quot;Sequence&quot;, writeln(content))
  )

  # 打印结束标签，比如 `&lt;/ul&gt;` 或 `&lt;/li&gt;`
  writeln(&quot;&lt;/&quot;, call message name, &quot;&gt;&quot;)
)

# 使用 Builder 创建一个 HTML 结构
Builder ul(  # `&lt;ul&gt;` 标签
  li(&quot;Io&quot;),           # `&lt;li&gt;Io&lt;/li&gt;`
  li(&quot;Lua&quot;),          # `&lt;li&gt;Lua&lt;/li&gt;`
  li(&quot;JavaScript&quot;)    # `&lt;li&gt;JavaScript&lt;/li&gt;`
)

python
---

class Builder:
    # 动态捕获未定义的方法
    def __getattr__(self, tag):
        def handler(*args):
            # 开始标签
            html = [f&quot;&lt;{tag}&gt;&quot;]
            
            # 遍历方法的参数
            for arg in args:
                if isinstance(arg, str):
                    html.append(arg)  # 如果是字符串，直接添加内容
                elif callable(arg):
                    html.append(arg())  # 如果是嵌套标签，递归调用
            
            # 结束标签
            html.append(f&quot;&lt;/{tag}&gt;&quot;)
            return &quot;&quot;.join(html)  # 返回完整 HTML
        return handler


# 创建 Builder 实例
builder = Builder()

# 使用 DSL 构建 HTML
html = builder.ul(
    builder.li(&quot;Io&quot;),
    builder.li(&quot;Lua&quot;),
    builder.li(&quot;JavaScript&quot;)
)

# 打印生成的 HTML
print(html)
</code><!--]--></pre><!--]--><hr><h1 id="prolog-1"><!--[-->Prolog 1<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Prolog</p></main></div><p><!--[-->在本书刚开始的时候我就对 Prolog 和 io lang 拥有了兴趣。因为他们是我未曾看见过的（貌似比较冷门？），其中我在搜集 Prolog 相关的资料后发现，有一位大佬可以通过逻辑来和鲸鱼对话，这让我非常有兴趣了解这门语言，或许学完了可以和猫猫对话。<!--]--></p><h2 id="逻辑知识库-2"><a href="#逻辑知识库-2"><!--[-->逻辑知识库 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>逻辑知识库</p></main></div><p><!--[-->逻辑知识库是 Prolog 的核心，我将它理解为一些数据的存储，它由以下信息构成：<!--]--></p>




















<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->构建块<!--]--></th><th><!--[-->例子<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><strong><!--[-->事实（Facts）<!--]--></strong><!--]--></td><td><!--[-->对某个世界的基本断言。（例如：“Babe 是一只猪”，“猪喜欢泥巴”。）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->规则（Rules）<!--]--></strong><!--]--></td><td><!--[-->关于这些事实的推论。（例如：“如果某动物是猪，那么它喜欢泥巴。”）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->查询（Query）<!--]--></strong><!--]--></td><td><!--[-->关于这个世界的提问。（例如：“Babe 喜欢泥巴吗？”）<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->如果要运行、体验 Prolog，我更推荐 swi 的 <a href="https://wasm.swi-prolog.org/wasm/tinker" rel="nofollow"><!--[-->wasm<!--]--></a>。目前，prolog 分别有 SWI 和 CIAO。他们都是 Prolog 的 <strong><!--[-->实现<!--]--></strong>。不过我更喜欢 SWI，因为他提供了在线的 Prolog 编辑器？我有了解过他们两个实现的作者，发现他们都是老师，都为 prolog 坚持了很久。<!--]--></p><p><!--[-->在 Prolog 中，<strong><!--[-->在 Prolog 中，首字母大小写很重要<!--]--></strong>：<!--]--></p><ol><!--[--><li><!--[-->小写字母开头的单词是原子（atom），表示固定的值（类似于 Ruby 的符号）。<!--]--></li><li><!--[-->大写字母或下划线开头的单词是变量（variable），值可以改变。<!--]--></li><!--]--></ol><p><!--[-->例如，一个简单的逻辑推理：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>% 定义事实
likes(wallace, cheese).
likes(grommit, cheese).
likes(wendolene, sheep).

% 定义规则：朋友关系
friend(X, Y) :- \+(X = Y), likes(X, Z), likes(Y, Z).
---
如果 X 和 Y 是不同的人，并且他们都喜欢同一个 Z，那么 X 和 Y 是朋友。

% 定义解释输出规则
explain_likes(Person, Item) :-
    ( likes(Person, Item) -&gt;
        format(&#39;~w 喜欢 ~w。~n&#39;, [Person, Item])
    ;   format(&#39;~w 不喜欢 ~w，因为没有相关事实支持。~n&#39;, [Person, Item])
    ).

explain_friend(X, Y) :-
    ( friend(X, Y) -&gt;
        format(&#39;~w 和 ~w 是朋友，因为他们都喜欢某个相同的事物。~n&#39;, [X, Y])
    ;   format(&#39;~w 和 ~w 不是朋友，因为他们没有共同喜欢的事物。~n&#39;, [X, Y])
    ).
</code><!--]--></pre><!--]--><p><!--[-->我们可以长时下输入来看看返回的结果：<!--]--></p><p><!--[--><strong><!--[-->?-explain_friend(wallace, grommit).<!--]--></strong><!--]--></p><ul><!--[--><li><!--[-->wallace 和 grommit 是朋友，因为他们都喜欢某个相同的事物。<br>
true.<!--]--></li><!--]--></ul><p><!--[--><strong><!--[-->?-explain_friend(wallace, wendolene).<!--]--></strong><!--]--></p><ul><!--[--><li><!--[-->wallace 和 wendolene 不是朋友，因为他们没有共同喜欢的事物。
true.<!--]--></li><!--]--></ul><h2 id="运算符-2"><a href="#运算符-2"><!--[-->运算符 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>运算符</p></main></div><p><!--[-->在 prolog 中，这些符号都是 <strong><!--[-->语言符号体系<!--]--></strong> 的一部分，而且还具有优先级。优先级决定了运算符的绑定顺序（类似括号的作用）。<!--]--></p>
























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->符号<!--]--></th><th><!--[-->解释<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><code class=""><!--[-->:-<!--]--></code><!--]--></td><td><!--[--><strong><!--[-->如果<!--]--></strong>。连接规则头和规则体，表示规则的定义。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><code class=""><!--[-->\+<!--]--></code><!--]--></td><td><!--[--><strong><!--[-->逻辑否定<!--]--></strong>。表示“不成立”或“不能证明为真”（基于有限失败的逻辑）。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><code class=""><!--[-->=<!--]--></code><!--]--></td><td><!--[--><strong><!--[-->等于<!--]--></strong>。用于判断两个值是否相等。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><code class=""><!--[-->,<!--]--></code><!--]--></td><td><!--[--><strong><!--[-->逻辑与<!--]--></strong>。多个条件必须同时成立规则才为真。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table>




















<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->条件<!--]--></th><th><!--[-->解释<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><code class=""><!--[-->\+(X = Y)<!--]--></code><!--]--></td><td><!--[-->X 和 Y 必须不同。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><code class=""><!--[-->likes(X, Z)<!--]--></code><!--]--></td><td><!--[-->X 必须喜欢某个 Z。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><code class=""><!--[-->likes(Y, Z)<!--]--></code><!--]--></td><td><!--[-->Y 必须喜欢同一个 Z。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><h3 id="否定为失败-1"><a href="#否定为失败-1"><!--[-->否定为失败 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>否定为失败</p></main></div><p><!--[-->在 Prolog 中，<code class=""><!--[-->\+<!--]--></code> 符号为逻辑否定。如果无法证明 X = Y 为真，则 +(X = Y) 为真。如果能够证明 X = Y 为真，则 +(X = Y) 为假。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>?- \+(1 = 2).
true.   % 因为 1 不等于 2，无法证明 1 = 2，所以 \+(1 = 2) 为真。

?- \+(1 = 1).
false.  % 因为 1 = 1 可以被证明为真，所以 \+(1 = 1) 为假。
</code><!--]--></pre><!--]--><p><!--[-->一般来说我们认为的应该是 1 = 2 为 <code class=""><!--[-->false<!--]--></code>，而 1 = 1 则应该为 <code class=""><!--[-->true<!--]--></code>，在这里是反着的。但因为我们加入了 <code class=""><!--[-->\+<!--]--></code>，即逻辑否定来表示 <strong><!--[-->不成立<!--]--></strong>，<strong><!--[-->不能证明为真<!--]--></strong>，所以 <code class=""><!--[-->\+(1 = 2)<!--]--></code> 无法被证明所以返回了 <code class=""><!--[-->true<!--]--></code><!--]--></p><h2 id="推理-2"><a href="#推理-2"><!--[-->推理 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>推理</p></main></div><p><!--[--><strong><!--[-->规则与推理是 Prolog 的核心，允许通过简单的规则解决复杂问题。<!--]--></strong>，虽然 Prolog 并不是很火，但隔壁的 mcp(Model Context Protocol) 也是推理的一种方式，不过它是根据上下文来进行推理。<!--]--></p>






















































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[--><strong><!--[-->维度<!--]--></strong><!--]--></th><th><!--[--><strong><!--[-->Prolog<!--]--></strong><!--]--></th><th><!--[--><strong><!--[-->Model Context Protocol (MCP)<!--]--></strong><!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><strong><!--[-->核心目标<!--]--></strong><!--]--></td><td><!--[-->专注于逻辑推理和知识表达<!--]--></td><td><!--[-->专注于上下文感知和动态决策<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->推理方式<!--]--></strong><!--]--></td><td><!--[-->基于逻辑规则的推导，通常采用<strong><!--[-->反向链式推理（Backward Chaining）<!--]--></strong><!--]--></td><td><!--[-->基于规则动态检查，通常采用<strong><!--[-->前向链式推理（Forward Chaining）<!--]--></strong><!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->规则与上下文<!--]--></strong><!--]--></td><td><!--[-->静态知识库，规则基于固定的逻辑与事实<!--]--></td><td><!--[-->动态数据驱动，规则依赖实时上下文和数据流<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->表达方式<!--]--></strong><!--]--></td><td><!--[-->接近自然语言的逻辑描述，强调“什么是正确”<!--]--></td><td><!--[-->数据与规则分离，规则动态触发，强调“如何适应实时场景”<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->适用场景<!--]--></strong><!--]--></td><td><!--[-->知识推理、逻辑问题、专家系统（如关系推理、定理证明）<!--]--></td><td><!--[-->动态场景（如物联网、实时决策支持系统、上下文驱动应用）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->推理透明性<!--]--></strong><!--]--></td><td><!--[-->高度可解释性，直接展示推理过程<!--]--></td><td><!--[-->推理过程嵌套在系统框架中，透明度较低<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->灵活性<!--]--></strong><!--]--></td><td><!--[-->规则明确但相对静态，适用于逻辑推导问题<!--]--></td><td><!--[-->依赖实时上下文，动态调整规则，适合复杂系统的实时决策<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->典型实现方式<!--]--></strong><!--]--></td><td><!--[-->使用基于逻辑编程的语言（如 Prolog），定义规则和知识库<!--]--></td><td><!--[-->作为动态系统架构的一部分，与上下文数据、事件和规则引擎结合<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->推理复杂度<!--]--></strong><!--]--></td><td><!--[-->强逻辑性，处理基于规则的严格逻辑推理<!--]--></td><td><!--[-->更贴近实际应用，推理复杂度与上下文动态性直接相关<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->我在这里思考了一个问题。假设通过 MCP 来进行推理，如果上下文、元数据都是错的，那么推理的结果也必然是错误的。那 Prolog 是否也会出现这样的错误呢？如果能自我纠错，那么这个能力绝对是非常厉害的特性。<!--]--></p>





























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[--><strong><!--[-->情况<!--]--></strong><!--]--></th><th><!--[--><strong><!--[-->MCP<!--]--></strong><!--]--></th><th><!--[--><strong><!--[-->Prolog<!--]--></strong><!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><strong><!--[-->输入数据正确<!--]--></strong><!--]--></td><td><!--[-->能够做出动态决策，输出结果正确<!--]--></td><td><!--[-->能够基于事实和规则做出推理，输出结果正确<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->输入数据错误<!--]--></strong><!--]--></td><td><!--[-->会基于错误数据推导，<strong><!--[-->结果错误<!--]--></strong><!--]--></td><td><!--[-->逻辑规则不匹配时可能<strong><!--[-->无法推理<!--]--></strong>；如果推理完成，结果也可能错误<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->推理灵活性<!--]--></strong><!--]--></td><td><!--[-->高，实时适应动态场景<!--]--></td><td><!--[-->低，更适合静态规则和逻辑推导<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->错误的敏感性<!--]--></strong><!--]--></td><td><!--[-->不敏感，直接使用错误数据作为基础，结果也随之错误<!--]--></td><td><!--[-->更敏感，逻辑上无法匹配会导致推理终止<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><h3 id="推理引擎-3"><a href="#推理引擎-3"><!--[-->推理引擎 3<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>推理引擎</p></main></div><p><!--[-->推理引擎(Inference engine) 也叫 “推理机”（中文维基百科是这样叫的）。<strong><!--[-->它将逻辑规则应用于知识库以推断出新信息<!--]--></strong>,推理引擎主要以两种模式之一工作：特殊规则或事实： 正向推理和反向推理 。<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->正向推理<!--]--></strong>: 从“今天下雨了”，想到“可能会堵车”，“需要带伞”，“地铁可能会拥挤”……从一个已知事实出发，推导出一系列可能的结论。<!--]--></li><li><!--[--><strong><!--[-->反向推理<!--]--></strong>:从“我要准时到达公司”开始，想“我要避开堵车”，“那我需要提前出发”，“所以我需要了解天气情况”。从目标出发，倒推出一系列必要条件。<!--]--></li><!--]--></ul><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>正向推理</p></main></div><p><!--[-->正向推理是一种数据驱动（data-driven）的推理方式。<strong><!--[-->从已知的事实出发<!--]--></strong>，应用规则逐步推出新的事实，<strong><!--[-->直到找到目标答案或不能再推出新事实为止。<!--]--></strong><!--]--></p><p><!--[-->假设有一位侦探正在调查一桩案件：某人（嫌疑人）在某个时间段内是否参与了一起犯罪活动。<!--]--></p><p><!--[-->侦探采取 “从已知线索出发，看能推断出什么” 的方法。(这是一种 数据驱动 的逻辑推理过程。)<!--]--></p><p><!--[-->目标：要证明嫌疑人A是否在案发时间段内去了案发现场。<!--]--></p><p><!--[--><strong><!--[-->(1) 侦探掌握的线索:<!--]--></strong> <br><!--]--></p><ol><!--[--><li><!--[-->嫌疑人A的鞋底有泥土。<!--]--></li><li><!--[-->案发现场附近的地上有相同类型的泥土。<!--]--></li><li><!--[-->嫌疑人A的手机定位显示，他曾在案发时间段靠近案发现场。<!--]--></li><li><!--[-->有人看见嫌疑人A在案发现场附近出现。<!--]--></li><!--]--></ol><p><!--[--><strong><!--[-->(2) 推理过程：<!--]--></strong> <br><!--]--></p><ol><!--[--><li><!--[-->嫌疑人鞋底有泥土，说明他可能去过案发现场附近。<!--]--></li><li><!--[-->手机定位也确认了嫌疑人确实在案发时间段靠近案发现场。<!--]--></li><li><!--[-->目击者证词进一步确认了嫌疑人在附近出现。<!--]--></li><!--]--></ol><p><!--[--><strong><!--[-->(3) 得出结论<!--]--></strong>
通过所有线索一步步推导，侦探得出 <strong><!--[-->“嫌疑人A极有可能在案发时间段出现在案发现场”<!--]--></strong> 的结论。<!--]--></p><h3 id="反向推理-3"><a href="#反向推理-3"><!--[-->反向推理 3<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>反向推理</p></main></div><p><!--[-->反向推理是一种目标驱动（goal-driven）的推理方式。<strong><!--[-->从目标出发<!--]--></strong>，寻找满足目标的前提条件，逐步回溯到已知的事实。<!--]--></p><p><!--[-->这一次，侦探采取的是 <strong><!--[-->“从目标出发，验证其成立条件”<!--]--></strong> 的方法。这是一种 目标驱动 的推理过程。<!--]--></p><p><!--[-->目标：要证明嫌疑人A是否在案发时间段内去了案发现场。<!--]--></p><p><!--[--><strong><!--[-->(1) 如果嫌疑人去了案发现场，那么<!--]--></strong><!--]--></p><ol><!--[--><li><!--[-->嫌疑人应该留下某种可以证明的痕迹，比如脚印或其他物证。<!--]--></li><li><!--[-->嫌疑人的手机定位应该能显示他靠近案发现场。<!--]--></li><li><!--[-->或者，有目击者看见他出现在案发现场。<!--]--></li><!--]--></ol><p><!--[--><strong><!--[-->(2) 验证条件<!--]--></strong><!--]--></p><ol><!--[--><li><!--[--><strong><!--[-->验证1<!--]--></strong>：侦探检查嫌疑人鞋底，发现有与案发现场泥土一致的痕迹（成立）。<!--]--></li><li><!--[--><strong><!--[-->验证2<!--]--></strong>：侦探调取手机定位记录，发现嫌疑人在案发时间靠近案发现场（成立）。<!--]--></li><li><!--[--><strong><!--[-->验证3<!--]--></strong>：侦探问询目击者，确认有人看到嫌疑人靠近案发现场（成立）。<!--]--></li><!--]--></ol><p><!--[--><strong><!--[-->(3) 得出结论<!--]--></strong>
所有条件都得到满足，侦探得出结论：<strong><!--[-->“嫌疑人A确实出现在案发现场”<!--]--></strong>。<!--]--></p><p><!--[-->书中给了一个反向推理那些食物是咸的例子，<code class=""><!--[-->food_flavor(X, Y) 推导出满足 Y = savory 的 X<!--]--></code>：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>food_type(velveeta, cheese).
food_type(ritz, cracker).
food_type(spam, meat).
food_type(sausage, meat).
food_type(jolt, soda).
food_type(twinkie, dessert).

flavor(sweet, dessert).
flavor(savory, meat).
flavor(savory, cheese).
flavor(sweet, soda).

food_flavor(X, Y) :- food_type(X, Z), flavor(Y, Z).

---
找到所有满足 food_type(X, Z) 的 X 和 Z。
找到满足 flavor(savory, Z) 的 Z。
两个条件的 Z 相交时，得出最终的 X。

---

food_flavor(What, savory).

---
哪些食物（What）的味道是咸的（savory）？

What = spam ;
What = sausage ;
false.
</code><!--]--></pre><!--]--><hr><h2 id="递归-1"><a href="#递归-1"><!--[-->递归 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>递归</p></main></div><p><!--[-->一看到「递归」，那么自然离不开 <strong><!--[-->数组、列表、遍历、字典、元组<!--]--></strong> 这几个关键词。递归很擅长解决 <strong><!--[-->重复模式<!--]--></strong> 的问题，使得递归在算法等相关方面成为了必备的方法。比如可以使用递归来完成一个乘积计算：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>factorial(0, 1). % 基准情况：0! = 1
factorial(N, Result) :- 
    N &gt; 0, 
    N1 is N - 1, 
    factorial(N1, SubResult), 
    Result is N * SubResult. % 递归步骤

---
factorial(5, Result).
5! = 5 × 4 × 3 × 2 × 1 = 120
</code><!--]--></pre><!--]--><br><main class="text-tip"><!--[--><p><!--[-->在数学中，! 表示阶乘（Factorial）。一个正整数 n 的阶乘记为 n!，表示从 1 到 n 所有正整数的乘积 <br><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="35.236ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 15574.2 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-2-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-2-TEX-N-21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"></path><path id="MJX-2-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-2-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-2-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-2-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-2-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-2-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-2-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-2-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-2-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(600,0)"><use data-c="21" xlink:href="#MJX-2-TEX-N-21"></use></g><g data-mml-node="mo" transform="translate(1155.8,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(2211.6,0)"><use data-c="1D45B" xlink:href="#MJX-2-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(3033.8,0)"><use data-c="D7" xlink:href="#MJX-2-TEX-N-D7"></use></g><g data-mml-node="mo" transform="translate(4034,0)"><use data-c="28" xlink:href="#MJX-2-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(4423,0)"><use data-c="1D45B" xlink:href="#MJX-2-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(5245.2,0)"><use data-c="2212" xlink:href="#MJX-2-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(6245.4,0)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(6745.4,0)"><use data-c="29" xlink:href="#MJX-2-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(7356.7,0)"><use data-c="D7" xlink:href="#MJX-2-TEX-N-D7"></use></g><g data-mml-node="mo" transform="translate(8356.9,0)"><use data-c="28" xlink:href="#MJX-2-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(8745.9,0)"><use data-c="1D45B" xlink:href="#MJX-2-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(9568.1,0)"><use data-c="2212" xlink:href="#MJX-2-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(10568.3,0)"><use data-c="32" xlink:href="#MJX-2-TEX-N-32"></use></g><g data-mml-node="mo" transform="translate(11068.3,0)"><use data-c="29" xlink:href="#MJX-2-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(11679.6,0)"><use data-c="D7" xlink:href="#MJX-2-TEX-N-D7"></use></g><g data-mml-node="mo" transform="translate(12679.8,0)"><use data-c="22EF" xlink:href="#MJX-2-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(14074,0)"><use data-c="D7" xlink:href="#MJX-2-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(15074.2,0)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g></g></g></svg></mjx-container><!--]--></p><!--]--></main><p><!--[-->在这个过程中，递归分为了 <strong><!--[-->向下递<!--]--></strong> 和 <strong><!--[-->向上归<!--]--></strong> 的两个阶段。<!--]--></p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -2.148ex;" xmlns="http://www.w3.org/2000/svg" width="43.724ex" height="5.428ex" role="img" focusable="false" viewBox="0 -1449.5 19326 2399" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-3-TEX-N-66" d="M273 0Q255 3 146 3Q43 3 34 0H26V46H42Q70 46 91 49Q99 52 103 60Q104 62 104 224V385H33V431H104V497L105 564L107 574Q126 639 171 668T266 704Q267 704 275 704T289 705Q330 702 351 679T372 627Q372 604 358 590T321 576T284 590T270 627Q270 647 288 667H284Q280 668 273 668Q245 668 223 647T189 592Q183 572 182 497V431H293V385H185V225Q185 63 186 61T189 57T194 54T199 51T206 49T213 48T222 47T231 47T241 46T251 46H282V0H273Z"></path><path id="MJX-3-TEX-N-61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z"></path><path id="MJX-3-TEX-N-63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path id="MJX-3-TEX-N-74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z"></path><path id="MJX-3-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-3-TEX-N-72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z"></path><path id="MJX-3-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-3-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-3-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-3-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-3-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-3-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-3-TEX-S3-7B" d="M618 -943L612 -949H582L568 -943Q472 -903 411 -841T332 -703Q327 -682 327 -653T325 -350Q324 -28 323 -18Q317 24 301 61T264 124T221 171T179 205T147 225T132 234Q130 238 130 250Q130 255 130 258T131 264T132 267T134 269T139 272T144 275Q207 308 256 367Q310 436 323 519Q324 529 325 851Q326 1124 326 1154T332 1205Q369 1358 566 1443L582 1450H612L618 1444V1429Q618 1413 616 1411L608 1406Q599 1402 585 1393T552 1372T515 1343T479 1305T449 1257T429 1200Q425 1180 425 1152T423 851Q422 579 422 549T416 498Q407 459 388 424T346 364T297 318T250 284T214 264T197 254L188 251L205 242Q290 200 345 138T416 3Q421 -18 421 -48T423 -349Q423 -397 423 -472Q424 -677 428 -694Q429 -697 429 -699Q434 -722 443 -743T465 -782T491 -816T519 -845T548 -868T574 -886T595 -899T610 -908L616 -910Q618 -912 618 -928V-943Z"></path><path id="MJX-3-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-3-TEX-N-A0" d></path><path id="MJX-3-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-3-TEX-N-22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path><path id="MJX-3-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-3-TEX-N-3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><use data-c="66" xlink:href="#MJX-3-TEX-N-66"></use><use data-c="61" xlink:href="#MJX-3-TEX-N-61" transform="translate(306,0)"></use><use data-c="63" xlink:href="#MJX-3-TEX-N-63" transform="translate(806,0)"></use><use data-c="74" xlink:href="#MJX-3-TEX-N-74" transform="translate(1250,0)"></use><use data-c="6F" xlink:href="#MJX-3-TEX-N-6F" transform="translate(1639,0)"></use><use data-c="72" xlink:href="#MJX-3-TEX-N-72" transform="translate(2139,0)"></use><use data-c="69" xlink:href="#MJX-3-TEX-N-69" transform="translate(2531,0)"></use><use data-c="61" xlink:href="#MJX-3-TEX-N-61" transform="translate(2809,0)"></use><use data-c="6C" xlink:href="#MJX-3-TEX-N-6C" transform="translate(3309,0)"></use></g><g data-mml-node="mo" transform="translate(3587,0)"><use data-c="28" xlink:href="#MJX-3-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(3976,0)"><use data-c="1D45B" xlink:href="#MJX-3-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(4576,0)"><use data-c="29" xlink:href="#MJX-3-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(5242.8,0)"><use data-c="3D" xlink:href="#MJX-3-TEX-N-3D"></use></g><g data-mml-node="mrow" transform="translate(6298.6,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="7B" xlink:href="#MJX-3-TEX-S3-7B"></use></g><g data-mml-node="mtable" transform="translate(750,0)"><g data-mml-node="mtr" transform="translate(0,600)"><g data-mml-node="mtd"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-3-TEX-N-31"></use></g></g><g data-mml-node="mtd" transform="translate(9009.9,0)"><g data-mml-node="mtext"><use data-c="69" xlink:href="#MJX-3-TEX-N-69"></use><use data-c="66" xlink:href="#MJX-3-TEX-N-66" transform="translate(278,0)"></use><use data-c="A0" xlink:href="#MJX-3-TEX-N-A0" transform="translate(584,0)"></use></g><g data-mml-node="mi" transform="translate(834,0)"><use data-c="1D45B" xlink:href="#MJX-3-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(1711.8,0)"><use data-c="3D" xlink:href="#MJX-3-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(2767.6,0)"><use data-c="30" xlink:href="#MJX-3-TEX-N-30"></use></g></g></g><g data-mml-node="mtr" transform="translate(0,-600)"><g data-mml-node="mtd"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-3-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(822.2,0)"><use data-c="22C5" xlink:href="#MJX-3-TEX-N-22C5"></use></g><g data-mml-node="mtext" transform="translate(1322.4,0)"><use data-c="66" xlink:href="#MJX-3-TEX-N-66"></use><use data-c="61" xlink:href="#MJX-3-TEX-N-61" transform="translate(306,0)"></use><use data-c="63" xlink:href="#MJX-3-TEX-N-63" transform="translate(806,0)"></use><use data-c="74" xlink:href="#MJX-3-TEX-N-74" transform="translate(1250,0)"></use><use data-c="6F" xlink:href="#MJX-3-TEX-N-6F" transform="translate(1639,0)"></use><use data-c="72" xlink:href="#MJX-3-TEX-N-72" transform="translate(2139,0)"></use><use data-c="69" xlink:href="#MJX-3-TEX-N-69" transform="translate(2531,0)"></use><use data-c="61" xlink:href="#MJX-3-TEX-N-61" transform="translate(2809,0)"></use><use data-c="6C" xlink:href="#MJX-3-TEX-N-6C" transform="translate(3309,0)"></use></g><g data-mml-node="mo" transform="translate(4909.4,0)"><use data-c="28" xlink:href="#MJX-3-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(5298.4,0)"><use data-c="1D45B" xlink:href="#MJX-3-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(6120.7,0)"><use data-c="2212" xlink:href="#MJX-3-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(7120.9,0)"><use data-c="31" xlink:href="#MJX-3-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(7620.9,0)"><use data-c="29" xlink:href="#MJX-3-TEX-N-29"></use></g></g><g data-mml-node="mtd" transform="translate(9009.9,0)"><g data-mml-node="mtext"><use data-c="69" xlink:href="#MJX-3-TEX-N-69"></use><use data-c="66" xlink:href="#MJX-3-TEX-N-66" transform="translate(278,0)"></use><use data-c="A0" xlink:href="#MJX-3-TEX-N-A0" transform="translate(584,0)"></use></g><g data-mml-node="mi" transform="translate(834,0)"><use data-c="1D45B" xlink:href="#MJX-3-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(1711.8,0)"><use data-c="3E" xlink:href="#MJX-3-TEX-N-3E"></use></g><g data-mml-node="mn" transform="translate(2767.6,0)"><use data-c="30" xlink:href="#MJX-3-TEX-N-30"></use></g></g></g></g><g data-mml-node="mo" transform="translate(13027.4,0) translate(0 250)"></g></g></g></g></svg></mjx-container><p><!--[-->这是函数逐步调用的展开过程, 最后通过 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="39.958ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 17661.2 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-4-TEX-N-66" d="M273 0Q255 3 146 3Q43 3 34 0H26V46H42Q70 46 91 49Q99 52 103 60Q104 62 104 224V385H33V431H104V497L105 564L107 574Q126 639 171 668T266 704Q267 704 275 704T289 705Q330 702 351 679T372 627Q372 604 358 590T321 576T284 590T270 627Q270 647 288 667H284Q280 668 273 668Q245 668 223 647T189 592Q183 572 182 497V431H293V385H185V225Q185 63 186 61T189 57T194 54T199 51T206 49T213 48T222 47T231 47T241 46T251 46H282V0H273Z"></path><path id="MJX-4-TEX-N-61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z"></path><path id="MJX-4-TEX-N-63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path id="MJX-4-TEX-N-74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z"></path><path id="MJX-4-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-4-TEX-N-72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z"></path><path id="MJX-4-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-4-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-4-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-4-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-4-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-4-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-4-TEX-N-22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path><path id="MJX-4-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-4-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-4-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-4-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><use data-c="66" xlink:href="#MJX-4-TEX-N-66"></use><use data-c="61" xlink:href="#MJX-4-TEX-N-61" transform="translate(306,0)"></use><use data-c="63" xlink:href="#MJX-4-TEX-N-63" transform="translate(806,0)"></use><use data-c="74" xlink:href="#MJX-4-TEX-N-74" transform="translate(1250,0)"></use><use data-c="6F" xlink:href="#MJX-4-TEX-N-6F" transform="translate(1639,0)"></use><use data-c="72" xlink:href="#MJX-4-TEX-N-72" transform="translate(2139,0)"></use><use data-c="69" xlink:href="#MJX-4-TEX-N-69" transform="translate(2531,0)"></use><use data-c="61" xlink:href="#MJX-4-TEX-N-61" transform="translate(2809,0)"></use><use data-c="6C" xlink:href="#MJX-4-TEX-N-6C" transform="translate(3309,0)"></use></g><g data-mml-node="mo" transform="translate(3587,0)"><use data-c="28" xlink:href="#MJX-4-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(3976,0)"><use data-c="1D45B" xlink:href="#MJX-4-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(4576,0)"><use data-c="29" xlink:href="#MJX-4-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(5242.8,0)"><use data-c="3D" xlink:href="#MJX-4-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(6298.6,0)"><use data-c="1D45B" xlink:href="#MJX-4-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(7120.8,0)"><use data-c="22C5" xlink:href="#MJX-4-TEX-N-22C5"></use></g><g data-mml-node="mo" transform="translate(7621,0)"><use data-c="28" xlink:href="#MJX-4-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(8010,0)"><use data-c="1D45B" xlink:href="#MJX-4-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(8832.2,0)"><use data-c="2212" xlink:href="#MJX-4-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(9832.4,0)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(10332.4,0)"><use data-c="29" xlink:href="#MJX-4-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(10943.7,0)"><use data-c="22C5" xlink:href="#MJX-4-TEX-N-22C5"></use></g><g data-mml-node="mo" transform="translate(11443.9,0)"><use data-c="28" xlink:href="#MJX-4-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(11832.9,0)"><use data-c="1D45B" xlink:href="#MJX-4-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(12655.1,0)"><use data-c="2212" xlink:href="#MJX-4-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(13655.3,0)"><use data-c="32" xlink:href="#MJX-4-TEX-N-32"></use></g><g data-mml-node="mo" transform="translate(14155.3,0)"><use data-c="29" xlink:href="#MJX-4-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(14766.6,0)"><use data-c="22C5" xlink:href="#MJX-4-TEX-N-22C5"></use></g><g data-mml-node="mo" transform="translate(15266.8,0)"><use data-c="22EF" xlink:href="#MJX-4-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(16661,0)"><use data-c="22C5" xlink:href="#MJX-4-TEX-N-22C5"></use></g><g data-mml-node="mn" transform="translate(17161.2,0)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use></g></g></g></svg></mjx-container> 从基准情况开始 <strong><!--[-->逐步向上计算结果，将子问题的解组合成最终解。<!--]--></strong> 他对应了 <code class=""><!--[-->Result is N * SubResult.<!--]--></code> 这一部分，在 <strong><!--[-->结果返回时<!--]--></strong> 调用。<strong><!--[-->将子问题的结果（SubResult）与当前层的值（N）相乘，逐层合并结果。<!--]--></strong><!--]--></p><p><!--[-->之后，更多的是数据结构的范畴。通过递归和不同数据结构的搭配，以解决复杂的问题。这个过程称之为 <strong><!--[-->算法<!--]--></strong>，而数据结构的魅力在于，<strong><!--[-->组织和管理数据<!--]--></strong>。<!--]--></p><p><!--[-->我打算看完这本书后，会看一些数据结构类的书籍。之前我认为数据结构就是存储、组织数据的方式。现在我觉得数据结构是语言的基础，和功能、性能息息相关，语言操控着数据如何利用，例如 <strong><!--[-->存储、修改、遍历、删除<!--]--></strong>，以实现各类效果和功能。<!--]--></p><h3 id="不仅是连接-2"><a href="#不仅是连接-2"><!--[-->不仅是连接 2<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>不仅是连接</p></main></div><p><!--[-->在我了解 <code class=""><!--[-->append<!--]--></code> 的时候。我只是单纯的认为他就是普通的连接数据，比如连接数组之类的，然后连接起来输出、还可以拆分。感觉没什么特别重要的，很不解为什么作者将它加入到本章节中。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>?-append([1, 2], [3, 4], What).
---
What = [1, 2, 3, 4].

?-append(Part1, Part2, [1, 2, 3, 4]).
---
Part1 = [],
Part2 = [1, 2, 3, 4] ;
Part1 = [1],
Part2 = [2, 3, 4] ;
Part1 = [1, 2],
Part2 = [3, 4] ;
</code><!--]--></pre><!--]--><p><!--[-->后来，我可能觉得这是递归的经典应用之一。它展示了通过简单规则，递归地<strong><!--[-->将复杂问题分解成小问题的过程<!--]--></strong>, 例如可以应用于：<!--]--></p><ul><!--[--><li><!--[-->分治法：将一个大问题拆分成多个小问题（例如合并排序）<!--]--></li><li><!--[-->树和图的遍历：通过递归规则遍历复杂数据结构。<!--]--></li><!--]--></ul><h3 id="数据结构不仅是结构-1"><a href="#数据结构不仅是结构-1"><!--[-->数据结构不仅是结构 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>数据结构不仅是数据结构</p></main></div><p><!--[-->在此之前，我一直认为数据结构仅仅是存储数据的一种方法。但之后和 <a href="https://dragove.site/" rel="nofollow"><!--[-->dragove<!--]--></a> 聊天后才意识到，数据的结构决定了如何 <strong><!--[-->操作数据<!--]--></strong> 以及 <strong><!--[-->使用数据的方式<!--]--></strong>，以及用什么样的写法，才能方便的操纵、使用这些数据。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>class Cons {
  constructor(h, t) {
    this.h = h
    this.t = t
  }
  toString() {
    function iter(that) {
      if (that.t == null) return that.h
      return that.h + &quot;, &quot; + iter(that.t)
    }
    return &quot;[&quot; + iter(this) + &quot;]&quot;
  }

  // 通过递归的方式遍历链表，并将一个函数 f 应用到每一个元素上，生成一个新的链表。
  map(f) {
    if (this.t == null) return new Cons(f(this.h), null)
    return new Cons(f(this.h), this.t.map(f))
  }

  //  通过循环遍历整个链表，直接修改每个元素。
  // 展示了操作数据的不同策略：递归与迭代。
  map2(f) {
    let it = this
    while (it != null) {
      it.h = f(it.h)
      it = it.t
    }
  }
}

const cons = (h, t) =&gt; new Cons(h, t)
const list = (...args) =&gt; {
  if (args.length == 0) return null
  return cons(args[0], list(...args.slice(1)))
}

const c = list(2, 3, 4, 5, 6)
console.log(list(2, 5, 8).map(x =&gt; x * 2).toString())
c.map2(x =&gt; x + 8)
console.log(c.toString())
</code><!--]--></pre><!--]--><p><!--[-->在这几十行 code 中，不仅实现了 <strong><!--[-->链表<!--]--></strong> 结构，同时还定义了 <code class=""><!--[-->map<!--]--></code> 和 <code class=""><!--[-->map2<!--]--></code> 方法来操控这些数据。<!--]--></p><hr><h2 id="逻辑谜题-3"><a href="#逻辑谜题-3"><!--[-->逻辑谜题 3<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>逻辑谜题</p></main></div><br><main class="text-tip big"><!--[--><p><!--[-->不写“怎么做”，要写“什么是对的”。<!--]--></p><!--]--></main><p><!--[--><a href="https://en.wikipedia.org/wiki/Sudoku" rel="nofollow"><!--[-->数独（Sudoku）<!--]--></a> 和 <a href="https://en.wikipedia.org/wiki/Eight_queens_puzzle" rel="nofollow"><!--[-->八皇后问题（Eight Queens）<!--]--></a> 是一个经典的逻辑谜题。前者貌似有很多在初中阶段的培训班拿出来讲，后者就不知道了。但有一个共同点就是 <strong><!--[-->他们都是数学计算能解出的谜题<!--]--></strong>。我之前没有接触到这方面的，貌似只有那些大佬会喜欢然后经常去做这种类似的问题(可以有机会玩大佬玩过的小游戏了)：<!--]--></p><h3 id="数独-1"><a href="#数独-1"><!--[-->数独 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>数独</p></main></div><br><p><!--[--><strong><!--[-->规则：<!--]--></strong><!--]--></p><ol><!--[--><li><!--[-->每行、每列、每个小方格（2x2）（在4x4的情况下为4个2x2的方块）都必须包含 1~4 的数字<!--]--></li><li><!--[-->不允许有重复数字（我觉得数独的中文翻译就体现出了这个意思）<!--]--></li><!--]--></ol><!--[--><pre class="" style=""><!--[--><code>+---+---+---+---+
|   | 2 |   | 4 |
+---+---+---+---+
|   |   | 1 |   |
+---+---+---+---+
| 4 |   |   |   |
+---+---+---+---+
| 2 |   |   | 1 |
+---+---+---+---+
</code><!--]--></pre><!--]--><p><!--[-->数独矩阵的维度为 4 行 4 列，它被分成 4 个 2x2 的小方格。我们要做的就是将数字填上去，但有需要符合规则，即 <strong><!--[-->每行不允许有重复数字<!--]--></strong>:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>:- use_module(library(clpfd)).

sudoku4x4(Puzzle) :-
    Puzzle = [A1, A2, A3, A4,
              B1, B2, B3, B4,
              C1, C2, C3, C4,
              D1, D2, D3, D4],
    
    Puzzle ins 1..4,

    % 每行不重复
    all_different([A1, A2, A3, A4]),
    all_different([B1, B2, B3, B4]),
    all_different([C1, C2, C3, C4]),
    all_different([D1, D2, D3, D4]),

    % 每列不重复
    all_different([A1, B1, C1, D1]),
    all_different([A2, B2, C2, D2]),
    all_different([A3, B3, C3, D3]),
    all_different([A4, B4, C4, D4]),

    % 每个 2x2 小格子不重复
    all_different([A1, A2, B1, B2]),
    all_different([A3, A4, B3, B4]),
    all_different([C1, C2, D1, D2]),
    all_different([C3, C4, D3, D4]),

    labeling([], Puzzle),
    print_sudoku([A1, A2, A3, A4,
                  B1, B2, B3, B4,
                  C1, C2, C3, C4,
                  D1, D2, D3, D4]).

print_sudoku([]).
print_sudoku([A, B, C, D | Rest]) :-
    format(&#39;+---+---+---+---+\n&#39;),
    format(&#39;| ~w | ~w | ~w | ~w |\n&#39;, [A, B, C, D]),
    print_sudoku(Rest).


---

?-sudoku4x4(P).

+---+---+---+---+
| 1 | 2 | 3 | 4 |
+---+---+---+---+
| 3 | 4 | 1 | 2 |
+---+---+---+---+
| 2 | 1 | 4 | 3 |
+---+---+---+---+
| 4 | 3 | 2 | 1 |
</code><!--]--></pre><!--]--><h3 id="八皇后谜题-1"><a href="#八皇后谜题-1"><!--[-->八皇后谜题 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>八皇后问题</p></main></div><p><!--[-->要理解八皇后谜题，首先需要了解国际象棋的基本规则和玩法。（不知道为什么 Windows 和 macOS 基本上都会自带一个国际象棋游戏，有些 Linux 也会预装，好像在国外国际象棋就跟斗地主一样人人都会吧），首先，国际象棋一般是这样的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>   a b c d e f g h           
  +-+-+-+-+-+-+-+-+          
8 |♜|♞|♝|♛|♚|♝|♞|♜| ← Black  
7 |♟|♟|♟|♟|♟|♟|♟|♟|          
6 | | | | | | | | |          
5 | | | | | | | | |          
4 | | | | | | | | |          
3 | | | | | | | | |          
2 |♙|♙|♙|♙|♙|♙|♙|♙|          
1 |♖|♘|♗|♕|♔|♗|♘|♖|  ← White 
  +-+-+-+-+-+-+-+-+          
   a b c d e f g h           

---

皇后长这样：♕ ♛

♔   王   King    ♚
♕   后   Queen   ♛
♖   车   Rook    ♜
♗   象   Bishop  ♝
♘   马   Knight  ♞
♙   兵   Pawn    ♟

*建议放大看
</code><!--]--></pre><!--]--><br><main class="text-tip"><!--[--><p><!--[-->八皇后问题的核心就是:<br>
在 8×8 的棋盘上，放置 8 个皇后，使得 任何两个皇后都不会互相攻击。<!--]--></p><!--]--></main><p><!--[--><strong><!--[-->皇后的规则：<!--]--></strong>
皇后是棋盘上 最强的棋子，她的移动规则是：<!--]--></p><ol><!--[--><li><!--[-->可以横向、纵向、斜向任意距离走<!--]--></li><li><!--[-->不能跳过其他棋子<!--]--></li><!--]--></ol><p><!--[--><strong><!--[-->皇后可以攻击<!--]--></strong>:<!--]--></p><ol><!--[--><li><!--[-->同一行<!--]--></li><li><!--[-->同一列<!--]--></li><li><!--[-->所有对角线<!--]--></li><!--]--></ol><p><!--[--><strong><!--[-->所以我们要确保：<!--]--></strong><!--]--></p>




















<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->不同皇后之间<!--]--></th><th><!--[-->意义<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->不在同一行<!--]--></td><td><!--[-->每一行只放一个皇后（数组表示）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->不在同一列<!--]--></td><td><!--[-->所有列数字不重复（all_different）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->不在同一对角线<!--]--></td><td><!--[-->行差 ≠ 列差<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->在这个过程中需要保证:<!--]--></p><ol><!--[--><li><!--[-->保证列表中的数互不相同（列不同）<!--]--></li><li><!--[-->保证没有两个数的对角线关系成立：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="25.53ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 11284.4 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-5-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-5-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-5-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-5-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-5-TEX-I-1D444" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path><path id="MJX-5-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-5-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-5-TEX-I-1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path><path id="MJX-5-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-5-TEX-N-2260" d="M166 -215T159 -215T147 -212T141 -204T139 -197Q139 -190 144 -183L306 133H70Q56 140 56 153Q56 168 72 173H327L406 327H72Q56 332 56 347Q56 360 70 367H426Q597 702 602 707Q605 716 618 716Q625 716 630 712T636 703T638 696Q638 692 471 367H707Q722 359 722 347Q722 336 708 328L451 327L371 173H708Q722 163 722 153Q722 140 707 133H351Q175 -210 170 -212Q166 -215 159 -215Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-5-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(529,0)"><use data-c="1D44F" xlink:href="#MJX-5-TEX-I-1D44F"></use></g><g data-mml-node="mi" transform="translate(958,0)"><use data-c="1D460" xlink:href="#MJX-5-TEX-I-1D460"></use></g><g data-mml-node="mo" transform="translate(1427,0)"><use data-c="28" xlink:href="#MJX-5-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1816,0)"><use data-c="1D444" xlink:href="#MJX-5-TEX-I-1D444"></use></g><g data-mml-node="mi" transform="translate(2607,0)"><use data-c="1D456" xlink:href="#MJX-5-TEX-I-1D456"></use></g><g data-mml-node="mo" transform="translate(3174.2,0)"><use data-c="2212" xlink:href="#MJX-5-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(4174.4,0)"><use data-c="1D444" xlink:href="#MJX-5-TEX-I-1D444"></use></g><g data-mml-node="mi" transform="translate(4965.4,0)"><use data-c="1D457" xlink:href="#MJX-5-TEX-I-1D457"></use></g><g data-mml-node="mo" transform="translate(5377.4,0)"><use data-c="29" xlink:href="#MJX-5-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(6044.2,0)"><use data-c="2260" xlink:href="#MJX-5-TEX-N-2260"></use></g><g data-mml-node="mi" transform="translate(7100,0)"><use data-c="1D44E" xlink:href="#MJX-5-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(7629,0)"><use data-c="1D44F" xlink:href="#MJX-5-TEX-I-1D44F"></use></g><g data-mml-node="mi" transform="translate(8058,0)"><use data-c="1D460" xlink:href="#MJX-5-TEX-I-1D460"></use></g><g data-mml-node="mo" transform="translate(8527,0)"><use data-c="28" xlink:href="#MJX-5-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(8916,0)"><use data-c="1D456" xlink:href="#MJX-5-TEX-I-1D456"></use></g><g data-mml-node="mo" transform="translate(9483.2,0)"><use data-c="2212" xlink:href="#MJX-5-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(10483.4,0)"><use data-c="1D457" xlink:href="#MJX-5-TEX-I-1D457"></use></g><g data-mml-node="mo" transform="translate(10895.4,0)"><use data-c="29" xlink:href="#MJX-5-TEX-N-29"></use></g></g></g></svg></mjx-container><!--]--></li><!--]--></ol><!--[--><pre class="" style=""><!--[--><code>% 引入约束逻辑编程库 clpfd（Constraint Logic Programming over Finite Domains）
:- use_module(library(clpfd)).

% 主谓词：寻找一个满足八皇后条件的解，并打印棋盘
eight_queens(Qs) :-
    % Qs 是一个列表，表示每一行皇后所在的列位置（索引是行，值是列）
    Qs = [Q1,Q2,Q3,Q4,Q5,Q6,Q7,Q8],

    % 每个皇后只能放在第 1 到 8 列之间
    Qs ins 1..8,

    % 所有列都必须不同（确保没有皇后在同一列）
    all_different(Qs),

    % 检查所有皇后是否安全（不互相攻击）
    safe_queens(Qs),

    % 求出一个满足所有条件的解（进行求值）
    labeling([], Qs),

    % 打印最终的棋盘结果
    print_board(Qs, 1).

% 空列表是安全的（递归终止条件）
safe_queens([]).

% 递归检查当前皇后与后续皇后是否安全
safe_queens([Q|Qs]) :-
    % 先递归检查后面的皇后是否安全
    safe_queens(Qs),
    % 再检查当前皇后 Q 是否与后续的每个皇后构成攻击
    no_attack(Q, Qs, 1).

% 当前皇后 Q 和空列表当然不会攻击（递归终止）
no_attack(_, [], _).

% 判断当前皇后 Q 是否不攻击 Q1（行距为 D），然后递归检查其余
no_attack(Q, [Q1|Qs], D) :-
    % Q 不能与 Q1 在同一列
    Q #\= Q1,
    % Q 不能与 Q1 在同一对角线（行距 = 列距）
    abs(Q - Q1) #\= D,
    % 增加行距后递归继续检查
    D1 #= D + 1,
    no_attack(Q, Qs, D1).

% ========== 打印棋盘部分 ==========

% 打印完成，空列表停止递归
print_board([], _).

% 打印每一行（即每个皇后）
print_board([Q|Rest], _) :-
    % 打印当前行，Q 表示皇后在第几列
    print_row(Q, 1),
    nl,  % 换行
    % 递归打印下一行
    print_board(Rest, _).

% 超过8列就停止打印该行
print_row(_, 9) :- !.

% 打印棋盘一行：如果当前位置是皇后所在列，就打印 &quot;Q&quot;，否则打印 &quot;.&quot;
print_row(Q, Col) :-
    (Q =:= Col -&gt; write(&#39; Q &#39;) ; write(&#39; . &#39;)),
    Col1 is Col + 1,
    print_row(Q, Col1).


---
?-eight_queens(Qs).

 Q  .  .  .  .  .  .  . 
 .  .  .  .  Q  .  .  . 
 .  .  .  .  .  .  .  Q 
 .  .  .  .  .  Q  .  . 
 .  .  Q  .  .  .  .  . 
 .  .  .  .  .  .  Q  . 
 .  Q  .  .  .  .  .  . 
 .  .  .  Q  .  .  .  . 
Qs = [1, 5, 8, 6, 3, 7, 2, 4]
</code><!--]--></pre><!--]--><p><!--[-->最后得出了这个结果。你会发现一个规律即 <strong><!--[-->每个行的皇后最后放在一起都不会重叠<!--]--></strong>，严谨点的来说是 <a href="https://en.wikipedia.org/wiki/No-three-in-line_problem" rel="nofollow"><!--[-->无三共线点<!--]--></a> 翻译的可能不是那么准确，但详细了解后得知：<!--]--></p><h3 id="无三线共点-3"><a href="#无三线共点-3"><!--[-->无三线共点 3<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>无三线共点</p></main></div><p><!--[-->这是问题是我在八皇后谜题了解到的，同时还涉及到一个 <a href="https://en.wikipedia.org/wiki/List_of_unsolved_problems_in_mathematics" rel="nofollow"><!--[-->数学中未解决的问题<!--]--></a>，即<!--]--></p><main class="text-tip big"><!--[--><p><!--[-->在 n × n 的网格中可以放置多少个点，使得其中任何三个点都不位于一条线上？<!--]--></p><!--]--></main><p><!--[-->在此之前，需要了解 <strong><!--[-->不共线、三个点共线<!--]--></strong><!--]--></p><!--[--><pre class="" style=""><!--[--><code>无三点共线
    C
   / \
  /   \
 A-----B

三点共线
A---B---C
</code><!--]--></pre><!--]--><p><!--[-->那么很明显，八皇后问题最后的计算答案是 <strong><!--[-->无三线共点<!--]--></strong> 的。因此维基百科才会在更多解法中列举了这个.<!--]--></p><!--[--><pre class="language-1" style=""><!--[--><code>. Q . .     列: 2        1 . Q . .   ← Q1 在第1行第2列
. . . Q     列: 4        2 . . . Q   ← Q2 在第2行第4列
Q . . .     列: 1        3 Q . . .   ← Q3 在第3行第1列
. . Q .     列: 3        4 . . Q .   ← Q4 在第4行第3列
</code><!--]--></pre><!--]--><hr><h1 id="scala-1"><!--[-->Scala 1<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Scala</p></main></div><p><!--[-->对 Scala 印象比较深的就是 Scala 社区主要的维护者<a href="https://github.com/lihaoyi" rel="nofollow"><!--[-->李浩毅<!--]--></a>,竟然是新加坡前总理李显龙的次子。还是 <a href="https://www.handsonscala.com/" rel="nofollow"><!--[-->Hands-on Scala Programming<!--]--></a> 一书的作者（这本书还免费观看章节部分的内容，对引导学习 scala 很有帮助）。我第一次看到 Scala 这个名字，还以为是某个数据库，毕竟 LOGO 不太像是一个 lang。<!--]--></p><h2 id="编程范式-3"><a href="#编程范式-3"><!--[-->编程范式 3<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>编程范式</p></main></div><p><!--[-->在此之前，作者通过 Ruby, IO lang, Prolog 介绍了 起码三种编程范式，每一种编程范式都会掀起一场腥风血雨。而 Scala 是函数式和面向对象的一种桥梁，本书作者称之为 “混合语言”。目的是 <strong><!--[-->架起 Java 和 Haskell<!--]--></strong> 之间的鸿沟连接起来<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->2009: 作者的总结<br>
随着程序需求的增加，编程语言也在不断进化。每二十年左右，旧的编程范式无法满足新的需求，新的范式必须出现。每个新的范式都会诞生一批编程语言，最初可能效率高但不实用（如 Smalltalk 和 Lisp）。最终，某些混合语言（如 C++）成为“桥梁”，然后是商业化语言（如 Java 或 C#），最终成熟的语言会实现新的范式。<!--]--></p><br><p><!--[-->2025: 说的太对了<!--]--></p><!--]--></main><!--]--><p><!--[-->例如 Scala 是 OOP × FP 混合的编程范式，所以有面向对象和函数式范式的应用:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>case class 咖啡机(品牌: String) {
  // OOP
  def 制作咖啡(类型: String): String = 
    // FP
    val 配方 = 类型 match {
      case &quot;拿铁&quot; =&gt; (咖啡量: Int) =&gt; s&quot;${咖啡量}ml咖啡+200ml奶&quot;
      case _ =&gt; (咖啡量: Int) =&gt; s&quot;${咖啡量}ml纯咖啡&quot;
    }
    配方(30)
}

val 我的机器 = 咖啡机(&quot;Nespresso&quot;)
println(我的机器.制作咖啡(&quot;拿铁&quot;)) // 30ml咖啡+200ml奶
</code><!--]--></pre><!--]--><main class="text-tip"><!--[--><p><!--[-->没想到用中文定义的对象和函数竟然可以输出<!--]--></p><!--]--></main><p><!--[-->你可以理解为面向对象是将一个东西描述成对象，然后函数是具体的行为，例如：<!--]--></p>












<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->OOP<!--]--></th><th><!--[-->FP<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->杯子(300, &quot;玻璃&quot;)<!--]--></td><td><!--[-->水量 =&gt; 水量 * 2<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->不过由于我看这本书是总结语言的学习思路，所以我不会再本机装 lang，基本上用在线环境来运行。这里我推荐使用 Scala 提供的在线环境 <a href="https://scastie.scala-lang.org/" rel="nofollow"><!--[-->Scastie<!--]--></a> 对于 Scala 给我的直接映像就是输出 Hello 有很多种方法，比如：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>object Main extends App{print(&quot;Hello, World!&quot;)}

@main
def hello(): Unit =
  println(&quot;Hello, World!&quot;)

println(&quot;Hello, World&quot;)
</code><!--]--></pre><!--]--><p><!--[-->如你所见起码有三种方式可以输出 <code class=""><!--[-->Hello, World<!--]--></code>， 这三种方式体现了 Scala 灵活性：<!--]--></p><ol><!--[--><li><!--[-->使用 object 和 App，继承 App trait，简化主程序结构<!--]--></li><li><!--[-->Scala 3 的 @main 注解,不需要显式声明类和方法。<!--]--></li><li><!--[-->不依赖类或对象结构<!--]--></li><!--]--></ol><p><!--[-->不过和 Java 相比，那也是非常的直观明了的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>public class HelloWorld {
    public static void main(String[] args) {
        System.out.println(&quot;Hello, World!&quot;);
    }
}
</code><!--]--></pre><!--]-->




















<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->LANG<!--]--></th><th><!--[-->TYPE<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->Ruby<!--]--></td><td><!--[-->面向对象<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->IO<!--]--></td><td><!--[-->原型式编程<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Prolog<!--]--></td><td><!--[-->声明式编程<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><h2 id="类型-1"><a href="#类型-1"><!--[-->类型 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>类型</p></main></div><p><!--[-->Scala 是可以推断出类型的，比如 <code class=""><!--[-->1 + 1<!--]--></code>，IDE 会在旁边显示 <code class=""><!--[-->2: scala.Int<!--]--></code>, 例如下面的类型转换（String 真方便啊）<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->在 Scala 2 的某个小版本中，Int + String 之类的 <strong><!--[-->插值<!--]--></strong> 被废弃掉了，需要使用 <code class=""><!--[-->$<!--]--></code> 进行插值，反正最后都会被归类到 <code class=""><!--[-->String<!--]--></code> type。（String 和 Json 以及 Object 是我最喜欢的类型）:
<code class=""><!--[-->val pi = 3.14159; println(f&quot;Pi is approximately $pi%1.2f&quot;)<!--]--></code><!--]--></p><!--]--></main><!--]--><!--[--><pre class="" style=""><!--[--><code>val x = 4 + &quot;abc&quot;
println(x.getClass) 

val s = &quot;abc&quot; + 4
println(s.getClass) // class java.lang.String
</code><!--]--></pre><!--]--><p><!--[-->Scala 2 和 3 version 的语法可能略有不同。所以这就是我读本书的理由，语言和语法结构是会变的。无论多么熟悉，过个两三年和四五年就会改变很多，但如果根据语言的基础来学，则很快就能上手。<!--]--></p><h3 id="ast-2"><a href="#ast-2"><!--[-->AST 2<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>AST</p></main></div><p><!--[-->AST 是抽象语法树（AST, Abstract Syntax Tree）的简称。当你写一段 Scala 代码时，Scala 编译器会将其转换为抽象语法树（AST），然后再进行后续的编译阶段（如类型检查、优化、字节码生成）。可以 <strong><!--[-->查看该代码在编译阶段形成的 AST 结构:<!--]--></strong>。<!--]--></p><p><!--[-->在 Scala 中，可以使用 <a href="https://scalameta.org/ast-explorer/#" rel="nofollow"><!--[-->Scala AST explorer<!--]--></a> 来进行查看。例如上面我说 <strong><!--[-->反正最后都要归类到 String<!--]--></strong> 其实很不严谨，可以将 Copy 放进去查看在编译的时候都做了什么：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>val x = 4 + &quot;abc&quot;
println(x.getClass) 

---

Source [0;38]
├── Defn.Val [0;17]
│   ├── Pat.Var [4;5]
│   │   └── Term.Name [4;5]   // x
│   └── Term.ApplyInfix [8;17]
│       ├── Lit.Int [8;9]     // 4
│       ├── Term.Name [10;11] // +
│       ├── Type.ArgClause [12;12]
│       └── Term.ArgClause [12;17]
│           └── Lit.String [12;17] // &quot;abc&quot;
└── Term.Apply [18;37]
    ├── Term.Name [18;25]     // println
    └── Term.ArgClause [25;37]
        └── Term.Select [26;36]
            ├── Term.Name [26;27]   // x
            └── Term.Name [28;36]   // getClass
</code><!--]--></pre><!--]--><p><!--[-->也就是说 <code class=""><!--[-->4<!--]--></code> 是被编译器推理到了是 <code class=""><!--[-->Int<!--]--></code> 类型的，<code class=""><!--[-->abc<!--]--></code> 是 <code class=""><!--[-->String<!--]--></code> 虽然最后组合成了 <code class=""><!--[-->4abc<!--]--></code> 也还是 <code class=""><!--[-->String<!--]--></code> 但你不觉得看到了编译过程不还是很酷的吗？<!--]--></p><hr><h3 id="泛型-1"><a href="#泛型-1"><!--[-->泛型 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>泛型</p></main></div><p><!--[-->泛型（Generics）类型是一个 <strong><!--[-->在程序设计中用于定义可以处理不同类型的类、特质或函数<!--]--></strong> 方式。泛型类型的基本概念：<!--]--></p><ol><!--[--><li><!--[-->类型参数：可以为类、特质或函数提供一个占位符类型，这个类型在使用时会被实际的类型所替代。<!--]--></li><li><!--[-->类型推断：Scala 会根据您传递的具体类型自动推断出类型参数。<!--]--></li><!--]--></ol><p><!--[-->简单点来说，其作用在于 <strong><!--[-->在定义类、特质、或方法时，使用类型参数来使其可以处理不同类型的数据<!--]--></strong>。让方法或类处理不同类型的数据，而不需要为每种类型都写一个单独的实现。<!--]--></p><!--[--><pre class="" style=""><!--[--><code>// 定义一个泛型类 Box
class Box[A](val value: A) {
  def getValue: A = value
}

val intBox = new Box(10)       // A 被推断为 Int
val stringBox = new Box(&quot;Hello&quot;) // A 被推断为 String

println(intBox.getValue)    // 输出: 10
println(stringBox.getValue) // 输出: Hello
</code><!--]--></pre><!--]--><p><!--[-->泛型很像 TypeScript 中 <code class=""><!--[-->Interface<!--]--></code>, ：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>// 定义一个泛型接口
interface Box&lt;T&gt; {
  value: T;
  getValue(): T;
}

// 实现泛型接口
class NumberBox implements Box&lt;number&gt; {
  constructor(public value: number) {}
  getValue(): number {
    return this.value;
  }
}

class StringBox implements Box&lt;string&gt; {
  constructor(public value: string) {}
  getValue(): string {
    return this.value;
  }
}

const numBox = new NumberBox(42);
console.log(numBox.getValue()); // 输出: 42

const strBox = new StringBox(&quot;Hello&quot;);
console.log(strBox.getValue()); // 输出: Hello
</code><!--]--></pre><!--]--><hr><h4 id="eventbus-2"><a href="#eventbus-2"><!--[-->EventBus 2<!--]--></a></h4><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>EventBus</p></main></div><p><!--[-->EventBus 是一个类型安全的概念，有点像是 Vue 中的 <a href="https://v3-migration.vuejs.org/zh/breaking-changes/events-api.html" rel="nofollow"><!--[-->Events<!--]--></a>。不过类型安全好像远没有 <strong><!--[-->内存安全<!--]--></strong> 那么让人感到欣喜，仿佛是必须的？<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->一个类型安全的“事件通道”——你可以向里面发送（emit）事件，其他组件可以监听（subscribe）这些事件并作出反应。<!--]--></p><!--]--></main><!--]--><!--[--><pre class="" style=""><!--[--><code>enum CopyEvent:
  case CopyWholeTree
  case CopyNode(id: Int)

... 
val copyEvents = EventBus[CopyEvent]()
...
onClick.mapToStrict(CopyEvent.CopyWholeTree) --&gt; copyEvents
...
// in app scope: div(
copyEvents --&gt; { 
  case CopyEvent.CopyWholeTree =&gt;  ...
  case CopyEvent.CopyNode(id) =&gt; ...
}
// ...)
</code><!--]--></pre><!--]--><h5 id="adt-3"><!--[-->ADT 3<!--]--></h5><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>代数数据类型</p></main></div><p><!--[-->密封的代数数据类型（Algebraic Data Types, ADTs）是函数式编程核心的类型系统之一，通常包括了：<!--]--></p><ol><!--[--><li><!--[-->积类型（Product Type） = A 和 B 一起出现（“组合”数据）<!--]--></li><li><!--[-->和类型（Sum Type） = A 或 B 之一出现（“选择”数据）<!--]--></li><!--]--></ol><p><!--[-->例如上面的 Code 就用到了 ADT 中的 <code class=""><!--[-->Sum Types<!--]--></code> :<!--]--></p><!--[--><pre class="" style=""><!--[--><code>enum PaymentMethod:
  case CreditCard(number: String)
  case Cash
  case PayPal(email: String)
// 这表示付款方式只能是三种之一 —— 你不能“同时”用信用卡 + PayPal。
</code><!--]--></pre><!--]--><p><!--[-->如果是 Product type，那就是：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>case class Person(name: String, age: Int)
// Person 拥有 name 和 age，你无法只给其中一个，必须两个都有 —— 这就是积类型。
</code><!--]--></pre><!--]--><hr><h3 id="trait-2"><a href="#trait-2"><!--[-->trait 2<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>trait</p></main></div><p><!--[-->Trait (特质)，trait 和泛型几乎同时出没，所以要理解 trait 之前需要理解泛型。Trait 和接口很像，我觉得中文翻译成“特质”不太理解，“特征、特点”倒是很符合 Trait 实现的逻辑：<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->我觉得这里可以参考下 Rust 的文档 <a href="https://doc.rust-lang.org/book/ch10-02-traits.html" rel="nofollow"><!--[-->Traits<!--]--></a>: <strong><!--[-->Trait:定义共同行为<!--]--></strong>。<!--]--></p><p><!--[-->Trait 在心理学中是一个理论，即 <a href="https://en.wikipedia.org/wiki/Trait_theory" rel="nofollow"><!--[-->特质理论<!--]--></a>。是研究人类个性的一种方法，所以 Rust 的文档更符合 Trait 的意思。<!--]--></p><!--]--></main><!--]--><p><!--[-->比如下面 Code 就实现了一个 <code class=""><!--[-->动物(Animal)<!--]--></code> 的 <code class=""><!--[-->Trait<!--]--></code> 即它们都会 <code class=""><!--[-->speak<!--]--></code><!--]--></p><!--[--><pre class="" style=""><!--[--><code>// 定义 trait
trait Animal:
  def speak(): String

// 定义实现 trait 的类
class Dog extends Animal:
  def speak(): String = &quot;Woof!&quot;

class Cat extends Animal:
  def speak(): String = &quot;Meow!&quot;

// 创建实例
val dog = new Dog()
val cat = new Cat()

// 调用方法
println(dog.speak()) // 输出: Woof!
println(cat.speak()) // 输出: Meow!
</code><!--]--></pre><!--]--><p><!--[-->如果用 <code class=""><!--[-->interface<!--]--></code> 的话，比如 Java:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>interface Animal {
    String speak();
}

class Dog implements Animal {
    public String speak() {
        return &quot;Woof!&quot;;
    }
}

class Cat implements Animal {
    public String speak() {
        return &quot;Meow!&quot;;
    }
}

public class Main {
    public static void main(String[] args) {
        Animal dog = new Dog();
        Animal cat = new Cat();
        System.out.println(dog.speak());  // Woof!
        System.out.println(cat.speak());  // Meow!
    }
}
</code><!--]--></pre><!--]--><hr><h3 id="隐式类型-3"><a href="#隐式类型-3"><!--[-->隐式类型 3<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>隐式类型</p></main></div>




























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->机制类型<!--]--></th><th><!--[-->英文名<!--]--></th><th><!--[-->主要作用<!--]--></th><th><!--[-->示例作用<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->隐式转换<!--]--></td><td><!--[-->Implicit Conversion<!--]--></td><td><!--[-->当类型不匹配时，自动将一个类型转换为另一个类型<!--]--></td><td><!--[-->Int → String / 自定义类型转化<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->隐式参数<!--]--></td><td><!--[-->Implicit Parameter<!--]--></td><td><!--[-->自动填入函数所需的上下文参数<!--]--></td><td><!--[-->注入默认值、依赖注入、上下文控制<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->隐式类<!--]--></td><td><!--[-->Implicit Class<!--]--></td><td><!--[-->为已有类型添加新方法（类似扩展方法）<!--]--></td><td><!--[-->给 Int 添加 <code class=""><!--[-->squared<!--]--></code> 方法<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><h4 id="隐式类型转换-2"><a href="#隐式类型转换-2"><!--[-->隐式类型转换 2<!--]--></a></h4><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>隐式类型转换</p></main></div><p><!--[-->如果要学习一个语言，那么类型系统无非是重要的。在 Scala 中是支持类型推断的，也就是不像静态语言那样需要自己指定类型 <code class=""><!--[-->let x: number = 42;<!--]--></code>。<a href="https://en.wikipedia.org/wiki/Type_conversion#Implicit_type_conversion" rel="nofollow"><!--[-->隐式类型(Implicit type conversion)<!--]--></a>转换, <strong><!--[-->是由编译器自动执行的类型转换。<!--]--></strong><!--]--></p><p><!--[-->也就是说，当一个类型不符合预期时，编译器会尝试通过一个标记为 <code class=""><!--[-->implicit<!--]--></code> 的函数将其自动转换为所需的类型。如果你将之前的插值放到 AST 里面，就会看到 <code class=""><!--[-->implicit<!--]--></code>:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>val pi = 3.14159
println(f&quot;Pi is approximately $pi%1.2f&quot;)

---

Source [0;57]
├── Defn.Val [0;16]
│   ├── Pat.Var [4;6]
│   │   └── Term.Name [4;6]         // pi
│   └── Lit.Double [9;16]           // 3.14159
└── Term.Apply [17;57]
    ├── Term.Name [17;24]           // println
    └── Term.ArgClause [24;57]
        └── Term.Interpolate [25;56]
            ├── Term.Name [25;26]       // f (interpolator)
            ├── Lit.String [27;47]      // &quot;Pi is approximately &quot;
            ├── Term.Name [48;50]       // pi (in interpolation)
            └── Lit.String [50;55]      // &quot;%1.2f&quot;
</code><!--]--></pre><!--]--><h4 id="隐式类型参数-1"><a href="#隐式类型参数-1"><!--[-->隐式类型参数 1<!--]--></a></h4><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>隐式类型参数</p></main></div><p><!--[-->隐式类型参数我的理解就是一种 <strong><!--[-->类型<!--]--></strong> 安全的注入机制，例如：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>implicit val defaultGreeting: String = &quot;Hello&quot;

def greet(name: String)(implicit greeting: String) = println(s&quot;$greeting, $name&quot;)

greet(&quot;Alice&quot;) // Alice, Hello 
</code><!--]--></pre><!--]--><p><!--[-->通过 <a href="https://scalameta.org/ast-explorer/#" rel="nofollow"><!--[-->Scala AST explorer<!--]--></a> 可以看到，<code class=""><!--[-->$greeting<!--]--></code> 在编译的时候，是会被 <code class=""><!--[-->Interpolate<!--]--></code> 占位的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>- Term.Interpolate [109;128]
    Term.Name [109;110]
    Lit.String [111;111]
    Lit.String [120;122]
    Lit.String [127;127]
    Term.Name [112;120]
    Term.Name [123;127]
</code><!--]--></pre><!--]--><p><!--[-->如果不依赖隐式类型参数来写，那么就会是这样的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>def greet(name: String, greeting: String) = println(s&quot;$greeting, $name&quot;)

val defaultGreeting = &quot;Hello&quot;

greet(&quot;Alice&quot;, defaultGreeting) // Hello, Alice
</code><!--]--></pre><!--]--><h4 id="隐式类-1"><a href="#隐式类-1"><!--[-->隐式类 1<!--]--></a></h4><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>隐式类</p></main></div><p><!--[-->隐式类非常好理解，很像 JavaScript 中的 <code class=""><!--[-->prototype<!--]--></code> 例如：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>implicit class RichInt(val x: Int) {
  def squared: Int = x * x
}

println(4.squared)  // 16
</code><!--]--></pre><!--]--><p><!--[-->在 Javascript 中就是：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>Number.prototype.square = function() {
  return this * this;
};

console.log((5).square()); // 25
</code><!--]--></pre><!--]--><hr><h2 id="不可变性-2"><a href="#不可变性-2"><!--[-->不可变性 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>不可变性</p></main></div><p><!--[-->感觉这本书上讲的一些 Scala 特性，在 2025 年的现在好像都是现代语言的必需品了(可能当时确实是比较新颖的)。对于不可变性好像函数式语言都支持？起码 JavaScript 是这样的。在 English 中，<a href="https://en.wikipedia.org/wiki/Immutable_object" rel="nofollow"><!--[-->不可变性（Immutability）<!--]--></a> 通常会在后面加一个 <code class=""><!--[-->object<!--]--></code>，组合起来就是 <strong><!--[-->不可变对象<!--]--></strong>。<!--]--></p><p><!--[-->所以不可变性包含了 <strong><!--[-->不可变对象<!--]--></strong> 和 <strong><!--[-->不可变函数/变量<!--]--></strong>, 比如在 scala 中，<code class=""><!--[-->var<!--]--></code> 是可变的，<code class=""><!--[-->val<!--]--></code> 就不可变:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>var a = &quot;mutable&quot;
a = &quot;changed&quot;   // OK

val b = &quot;immutable&quot;
b = &quot;change&quot;     // 编译错误
</code><!--]--></pre><!--]--><p><!--[-->Scala 明确区分了可变（mutable）对象和不可变（immutable）类，具体可以参考 <a href="https://docs.scala-lang.org/overviews/collections-2.13/concrete-mutable-collection-classes.html" rel="nofollow"><!--[-->Concrete Mutable Collection Classes<!--]--></a>, <strong><!--[-->也就是将可变的和不可变的都弄了个类型<!--]--></strong>：<!--]--></p>














































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->集合类型<!--]--></th><th><!--[-->不可变版本（immutable）<!--]--></th><th><!--[-->可变版本（mutable）<!--]--></th><th><!--[-->特点说明<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->序列（seq）<!--]--></td><td><!--[--><code class=""><!--[-->list<!--]--></code>, <code class=""><!--[-->vector<!--]--></code><!--]--></td><td><!--[--><code class=""><!--[-->arraybuffer<!--]--></code>, <code class=""><!--[-->listbuffer<!--]--></code>, <code class=""><!--[-->queue<!--]--></code><!--]--></td><td><!--[-->list 是不可变链表，vector 性能更平衡，arraybuffer 可变、适合追加<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->集合（set）<!--]--></td><td><!--[--><code class=""><!--[-->set<!--]--></code>, <code class=""><!--[-->sortedset<!--]--></code><!--]--></td><td><!--[--><code class=""><!--[-->hashset<!--]--></code><!--]--></td><td><!--[-->不可变集合默认使用 hash 实现，可变集合有更多实现<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->映射（map）<!--]--></td><td><!--[--><code class=""><!--[-->map<!--]--></code>,<code class=""><!--[-->SortedMap<!--]--></code><!--]--></td><td><!--[--><code class=""><!--[-->hashmap<!--]--></code> , <code class=""><!--[-->weakhashmap<!--]--></code><!--]--></td><td><!--[-->不可变 map 默认使用 hashmap，可变版本适合高性能需求<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->栈 / 队列<!--]--></td><td><!--[--><!--]--></td><td><!--[--><code class=""><!--[-->queue<!--]--></code>, <code class=""><!--[-->stack<!--]--></code>, <code class=""><!--[-->arraydeque<!--]--></code><!--]--></td><td><!--[-->可变和不可变队列同名，但位于不同包中<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->数组<!--]--></td><td><!--[--><code class=""><!--[-->array<!--]--></code><!--]--></td><td><!--[--><code class=""><!--[-->arraybuffer<!--]--></code><!--]--></td><td><!--[--><code class=""><!--[-->array<!--]--></code> 不是集合框架成员，但常用<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->特殊集合<!--]--></td><td><!--[--><code class=""><!--[-->range<!--]--></code>, <code class=""><!--[-->emptyset<!--]--></code><!--]--></td><td><!--[--><!--]--></td><td><!--[-->用于构造或默认空集合值<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->(真的是太多了，可能不是很全，大致了解下)<!--]--></p><hr><h2 id="并发-2"><a href="#并发-2"><!--[-->并发 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>并发</p></main></div><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->一个语言对可变性和不可变性的支持程度，直接影响它在并发编程中的优势与设计难度。<!--]--></p><!--]--></main><!--]--><p><!--[-->上面这句话基本上就可以衡量一个语言在并发上的优势。例如不可变结构在多线程共享、无锁共享数据结构使用场景。但在此之前，我可以借助 scala 了解下一些并发模型，这样可以更加理解并发，同时适应于其他语言(毕竟模型一样，只不过语法变了)。<!--]--></p><h3 id="future-promise-1"><a href="#future-promise-1"><!--[-->Future / Promise 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>Future / Promise</p></main></div><p><!--[--><a href="https://en.wikipedia.org/wiki/Futures_and_promises" rel="nofollow"><!--[-->Future / Promise<!--]--></a> 一般他们是同时出现的，中文直译就是 “未来与承诺”。但是在 CS 中，有很多关于并发的专业名字，例如：<!--]--></p>





























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Name<!--]--></th><th><!--[-->Desc<!--]--></th><th><!--[-->Chinese<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->future<!--]--></td><td><!--[-->值将在未来某时可用。通常由系统或框架执行任务并返回。<!--]--></td><td><!--[-->未来<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->promise<!--]--></td><td><!--[-->手动控制 Future 的完成。开发者显式 resolve/reject<!--]--></td><td><!--[-->承诺<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->delay<!--]--></td><td><!--[-->尚未开始执行的任务（延迟计算），强调“推迟”<!--]--></td><td><!--[-->延迟<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->deferred<!--]--></td><td><!--[-->一种控制句柄，表示延迟+手动完成的组合<!--]--></td><td><!--[-->推迟<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->在 Scala 文档的 <a href="https://docs.scala-lang.org/scala3/book/concurrency.html" rel="nofollow"><!--[-->Concurrency<!--]--></a> 部分中，介绍了 <code class=""><!--[-->scala.concurrent.Future<!--]--></code> 并且也有社区写的文档，例如 <a href="https://docs.scala-lang.org/overviews/core/futures.html" rel="nofollow"><!--[-->Future and Promise<!--]--></a>:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>import scala.concurrent.{Future, Promise}
import scala.concurrent.ExecutionContext.Implicits.global
import scala.util.{Success, Failure}
import scala.concurrent.Await
import scala.concurrent.duration._

object Main {
  def main(args: Array[String]): Unit = {
    // Future
    val future = Future {
      Thread.sleep(1000)
      &quot;Hello from Future!&quot;
    }
    
    future.onComplete {
      case Success(msg) =&gt; println(msg)
      case Failure(e) =&gt; println(s&quot;Error: ${e.getMessage}&quot;)
    }
    
    // Promise
    val promise = Promise[String]()
    val futureFromPromise = promise.future
    
    futureFromPromise.foreach(msg =&gt; println(msg))
    
    Future {
      Thread.sleep(800)
      promise.success(&quot;Hello from Promise!&quot;)
    }
 
    // 最多等待 3ms
    Await.result(Future.sequence(Seq(future, futureFromPromise)), 3.seconds)
    println(&quot;END&quot;)
  }
}
</code><!--]--></pre><!--]--><p><!--[-->这个流程其实非常简单，主打一个 <code class=""><!--[-->Future / Promise<!--]--></code>, 他的流程是这样的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>[主线程]
  │
  ├─ 创建Future → 后台线程执行计算 → 完成后触发回调
  │
  └─ 创建Promise → 获取关联Future → 设置回调
        │
        └─ 另一个线程完成Promise → 触发关联Future的回调
</code><!--]--></pre><!--]--><p><!--[-->所以这个模型的核心思想是 <strong><!--[-->将结果的产生和消费解耦，让主线程不被阻塞。<!--]--></strong> 通过回调处理异步结果。想象一下这样的场景：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>Future 就像你的外卖订单：
你下单后(Future { ... })继续做自己的事
设置回调(foreach)相当于告诉外卖员：&quot;送到后打电话给我&quot;

---

Promise 就像餐厅的接单系统：
餐厅收到订单创建了一个承诺(Promise)
厨房工作完成后调用promise.success(餐品)
与你关联的外卖订单(futureFromPromise)会自动更新状态

---

Delay 就是明确告诉你预计 30 分钟后取餐
(Thread.sleep)

---

Deferred 就是给你个订单号，告诉你商家正在准备中…… 弄好了再告诉你

import scala.concurrent.{Future, Promise}
import scala.concurrent.ExecutionContext.Implicits.global
import scala.util.{Success, Failure}

class Deferred[T] {
  private val promise = Promise[T]()
  val future: Future[T] = promise.future
  
  def complete(value: T): Unit = promise.success(value)
  def fail(ex: Throwable): Unit = promise.failure(ex)
}

object DeferredDemo extends App {
  // Deferred
  val deferredResult = new Deferred[String]()
  
  println(&quot;哈哈外卖提醒您！商家正在备货中~&quot;)
  
  // 2. 回调
  deferredResult.future.onComplete {
    case Success(value) =&gt; println(s&quot;收到结果: $value&quot;)
    case Failure(ex)    =&gt; println(s&quot;操作失败: ${ex.getMessage}&quot;)
  }
  
  // 模拟异步操作完成后完成Deferred
  Future {
    Thread.sleep(2000) 
    deferredResult.complete(&quot;完成啦！!&quot;)
  }
  
  Thread.sleep(3000)
  println(&quot;演示结束&quot;)
}
</code><!--]--></pre><!--]--><hr><h3 id="akka-actor-1"><a href="#akka-actor-1"><!--[-->Akka Actor 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>Akka Actor</p></main></div><p><!--[-->要理解 Akka Actor，首先要理解 <a href="https://en.wikipedia.org/wiki/Actor_model" rel="nofollow"><!--[-->Actor Model<!--]--></a>。在维基百科中，描述了 Actor 的一个理解：<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->万物皆可 Actor<br>
everything is an actor<!--]--></p><!--]--></main><!--]--><p><!--[-->类似于面向对象中的 “万物皆可对象”，Actor 应该是：“角色扮演”，例如你有一家快递公司：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>[快递公司运作流程]
  顾客 → 快递员 → 分拣中心 → 配送站 → 收件人
</code><!--]--></pre><!--]--><p><!--[-->那么上面的流程中，每个角色都是一个 Actor，所以可以划分为：<!--]--></p>


































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->角色<!--]--></th><th><!--[-->Actor<!--]--></th><th><!--[-->特点<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->快递员<!--]--></td><td><!--[-->单个 Actor<!--]--></td><td><!--[-->只负责自己片区，不知道其他快递员在干嘛<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->快递包裹<!--]--></td><td><!--[-->消息（Message）<!--]--></td><td><!--[-->只有包裹里的信息（不能直接打电话问快递员&quot;你在哪&quot;）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->快递柜<!--]--></td><td><!--[-->邮箱（Mailbox）<!--]--></td><td><!--[-->快递员只有送到柜子里的包裹才会处理<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->片区经理<!--]--></td><td><!--[-->父级 Supervisor<!--]--></td><td><!--[-->快递员生病了（崩溃）由经理决定是否换人<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->公司总部<!--]--></td><td><!--[-->Actor System<!--]--></td><td><!--[-->整个快递网络的基础框架<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->如果你要映射到 Code， 可以这么想，假设现在有100个包裹要配送：<!--]--></p>


































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->方式<!--]--></th><th><!--[-->传统多线程做法<!--]--></th><th><!--[-->Actor mode<!--]--></th><th><!--[-->VS<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->资源分配<!--]--></td><td><!--[-->创建100个快递员（线程）<!--]--></td><td><!--[-->固定10个快递员轮流处理<!--]--></td><td><!--[-->线程太多会崩溃<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->沟通方式<!--]--></td><td><!--[-->快递员互相打电话问路（共享内存）<!--]--></td><td><!--[-->只通过包裹上的地址（消息传递）<!--]--></td><td><!--[-->避免&quot;堵车死锁&quot;<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->错误处理<!--]--></td><td><!--[-->一个快递员车祸导致整个系统瘫痪<!--]--></td><td><!--[-->该快递员路线由经理重新分配（监督策略）<!--]--></td><td><!--[-->局部故障不影响整体<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->状态管理<!--]--></td><td><!--[-->所有快递员共享实时地图<!--]--></td><td><!--[-->每个快递员有自己的笔记本记录<!--]--></td><td><!--[-->避免地图被同时修改出错<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->所以 Actor 有点像是反应式的设计思路，例如其核心就是：<!--]--></p><ol><!--[--><li><!--[-->绝不共享：就像快递员不会共用同一辆货车（每个Actor有自己的状态）<!--]--></li><li><!--[-->只认包裹：就像快递员只按包裹信息送货（只通过消息通信）<!--]--></li><li><!--[-->各司其职：就像快递员不会突然去帮客服接电话（单一职责）<!--]--></li><!--]--></ol><h4 id="akka-actor-2"><a href="#akka-actor-2"><!--[-->Akka Actor 2<!--]--></a></h4><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>Akka Actor</p></main></div><p><!--[-->了解完了 Actor mode ，可以了解 <a href="https://en.wikipedia.org/wiki/Akka_(toolkit)" rel="nofollow"><!--[-->akka<!--]--></a>，akka 是一个公司，也是一个包。最早实现于 2006 年，感觉这种并发一般会和分布式、微服务之类的架构建立联系，所以详情可以去看 <a href="https://doc.akka.io/libraries/akka-core/current/typed/actors.html" rel="nofollow"><!--[-->akka docs<!--]--></a> 写的还是很全的。在 Scala 中可以  <code class=""><!--[-->import akka.actor<!--]--></code> 来使用 Akka actor<!--]--></p><!--[--><pre class="" style=""><!--[--><code>import akka.actor.typed.{ActorRef, ActorSystem, Behavior}
import akka.actor.typed.scaladsl.Behaviors

object Main {
  // 消息协议
  final case class Greet(whom: String, replyTo: ActorRef[Greeted])
  final case class Greeted(whom: String, from: ActorRef[Greet])

  // HelloWorld Actor
  def helloWorld(): Behavior[Greet] = Behaviors.receive { (context, message) =&gt;
    println(s&quot;Hello ${message.whom}!&quot;)
    message.replyTo ! Greeted(message.whom, context.self)
    Behaviors.same
  }

  // main Actor
  def mainBehavior(): Behavior[Greeted] = Behaviors.setup { context =&gt;
    // create HelloWorld Actor
    val greeter = context.spawn(helloWorld(), &quot;helloWorld&quot;)
    
    // send
    greeter ! Greet(&quot;Akka&quot;, context.self)

    Behaviors.receiveMessage { message =&gt;
      println(s&quot;${message.from.path.name} 已问候 ${message.whom}&quot;)
      Behaviors.stopped
    }
  }

  def main(args: Array[String]): Unit = {
    // create Actor system
    val system = ActorSystem(mainBehavior(), &quot;DemoSystem&quot;)
    
    Thread.sleep(1000)
    system.terminate()
  }
}
</code><!--]--></pre><!--]--><hr><h3 id="zio-2"><a href="#zio-2"><!--[-->ZIO 2<!--]--></a></h3><div class="text-title-color" typo="2" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>ZIO</p></main></div><p><!--[-->ZIO 是一个 <strong><!--[-->类型安全、可组合异步和并发编程<!--]--></strong> 的一个框架，其和新的是 ZIO 数据类型。分为了 R、E、A 三种，分别代表：<!--]--></p>




















<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Type<!--]--></th><th><!--[-->Info<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->R<!--]--></td><td><!--[-->环境类型参数，表示需要的上下文值。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->E<!--]--></td><td><!--[-->错误类型参数，表示可能出现的错误类型。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->A<!--]--></td><td><!--[-->成功值类型参数，表示成功结果的类型。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->当然还有很多类型别名啊，可以根据 <a href="https://zio.dev/overview/summary" rel="nofollow"><!--[-->zio docs<!--]--></a> 来进行学习，例如 <code class=""><!--[-->UIO[A]<!--]--></code>、<code class=""><!--[-->URIO[R, A]<!--]--></code> 什么的。也就是说啊：<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->它需要一个环境类型参数 R，并产生一个失败的类型 E 或一个成功值的类型 A。<br><b>这就很哲学，例如你做一个产品<span>R</span>，可能会赚到 money<span>A</span>，也可能没有赚到 money<span>E</span></b><!--]--></p><p><!--[-->你还可以把一些类型别名带进去，例如 <code class=""><!--[-->IO[E, A]<!--]--></code> 那就是 “这个项目可能因为 <code class=""><!--[-->E<!--]--></code> 没有赚到 money，或者因为 <code class=""><!--[-->A<!--]--></code> 而赚到 money”<!--]--></p><!--]--></main><!--]--><p><!--[-->ZIO 这个框架的核心还是很方便代入的，例如 <code class=""><!--[-->ZIO[R, E, A]<!--]--></code>:<!--]--></p>
























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Type<!--]--></th><th><!--[-->Vs<!--]--></th><th><!--[-->Tech<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->R<!--]--></td><td><!--[-->你创业需要的初始资源（办公场地<span>R=Office</span>、启动资金<span>R=Capital</span>）<!--]--></td><td><!--[-->执行所需的环境依赖（数据库连接、配置等）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->E<!--]--></td><td><!--[-->可能遭遇的失败类型（资金断裂<span>E=Bankrupt</span>、政策风险<span>E=Regulation</span>）<!--]--></td><td><!--[-->可能发生的错误类型（IOException、TimeoutException等）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->A<!--]--></td><td><!--[-->最终获得的成功成果（上市<span>A=IPO</span>、盈利<span>A=Profit</span>）<!--]--></td><td><!--[-->计算成功返回的结果（用户数据、交易ID等）<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->大致看了下文档，可惜在 scastie 上跑有些问题，自己又不想弄本地的 ZIO 环境，所以还是算了。以后用到的时候在仔细体验，但这个框架理解起来还是蛮简单的。<!--]--></p><hr><h3 id="模式匹配-2"><a href="#模式匹配-2"><!--[-->模式匹配 2<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>模式匹配</p></main></div><p><!--[--><a href="https://en.wikipedia.org/wiki/Pattern_matching" rel="nofollow"><!--[-->模式匹配(Pattern matching)<!--]--></a>是函数式、并发的核心之一。有点像是 ADT，但又不是，毕竟 ADT 是类型的一种，不过有类型模式匹配。可能跟模式匹配比较像的就是 if/else(不完全是)，可以讲 if/else 和模式匹配比做成：<!--]--></p><p><!--[-->IF/ELSE: 逐个拆箱检查内容物<!--]--></p><ul><!--[--><li><!--[--><em><!--[-->&quot;如果是盒子A，打开看是不是红色物品；如果是盒子B，摇晃听声音...&quot;<!--]--></em><!--]--></li><!--]--></ul><p><!--[-->模式匹配: 用智能扫描仪直接识别包装特征<!--]--></p><ul><!--[--><li><!--[--><em><!--[-->&quot;匹配‘红色立方体盒子’ → 送往区域X；匹配‘圆柱体包裹’ → 送往区域Y&quot;<!--]--></em><!--]--></li><!--]--></ul><br><!--[--><pre class="" style=""><!--[--><code>object PatternMatchingDemo extends App {
  // 基础值
  def explainNumber(num: Int): String = num match {
    case 0 =&gt; &quot;零&quot;
    case 1 =&gt; &quot;壹&quot;
    case _ =&gt; &quot;其他数字&quot;  // default
  }
  println(explainNumber(1))  // 壹

  // 结构匹配 
  val nums = List(1, 2, 3)
  nums match {
    case head :: tail =&gt; println(s&quot;头部: $head, 尾部: $tail&quot;)  // 头部: 1, 尾部: List(2, 3)
    case Nil =&gt; println(&quot;空列表&quot;)
  }

  // 类型匹配
  val any: Any = &quot;hello&quot;
  any match {
    case s: String =&gt; println(s&quot;字符串长度: ${s.length}&quot;)  // 字符串长度: 5
    case i: Int    =&gt; println(s&quot;数字: $i&quot;)
  }
}
</code><!--]--></pre><!--]--><p><!--[-->(感觉没 py 的那种写法简洁，不过 scala 对比 java 感觉 lang style 也挺不错的)<!--]--></p><hr><h1 id="erlang-1"><!--[-->Erlang 1<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Erlang</p></main></div><p><!--[-->Erlang 我比较有印象，因为我了解过 <a href="https://en.wikipedia.org/wiki/Elixir_(programming_language)" rel="nofollow"><!--[-->Elixir<!--]--></a> 它是构建在 Erlang 之上的(我觉得 Elixir 的 Logo 比 Erlang 的好看) 不过这两个的特性都在于并发和分布式，所以我会了解和分布式相关的，看看和前面的 Scala 的并发有什么区别，是不是和 Scala 的静态类型和动态类型一样复杂。<!--]--></p><p><!--[-->Erlang 是一个函数式、并发的语言，他的运行时就是为了<strong><!--[-->分布式、容错、高可用不间断、实时计算、热插拔<!--]--></strong>而设计的。因为为了这些而设计，所以 Erlang 具有不可变类型。<!--]--></p><hr><h2 id="模块-1"><a href="#模块-1"><!--[-->模块 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>模块</p></main></div><p><!--[-->由于我只是学习目的，所以我尝试在线的环境来学习 Erlang。体验了一翻 <a href="https://replit.com/" rel="nofollow"><!--[-->Replit<!--]--></a> 感觉还是很不错的。如果要在 Erlang 中输出 Hello,world，那么需要使用 <a href="https://www.erlang.org/doc/system/seq_prog#writing-output-to-a-terminal" rel="nofollow"><!--[-->io:format<!--]--></a>(有一说一官方文档写的还是很不错的，很方便学习和理解):<!--]--></p><!--[--><pre class="" style=""><!--[--><code>
--- filename: main.ert
-module(main).
-export([start/0]).

start() -&gt;
    io:format(&quot;Hello,world&quot;).
</code><!--]--></pre><!--]--><p><!--[-->在 Erlang 中，文件相当于一个模块，也就是你看到的 <code class=""><!--[-->-module(main)<!--]--></code> 之后需要导出 <code class=""><!--[-->-export([start/0, add/1])<!--]--></code> 这里的 <code class=""><!--[-->0<!--]--></code> 表示需要导出的是 0 个参数，如果需要导出，就是这样：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>-module(main).
-export([start/0, add/1]).
start() -&gt;
  io:format(&quot;Hello,world&quot;).

add(X) -&gt;
  2 * X.
</code><!--]--></pre><!--]--><p><!--[-->如果是 ES6 或者 Python，那就是这样的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>--- ES6
export function hello() { ... }
export default function () { ... }

// CommonJS
module.exports = {
  hello,
  add
}

--- Python 3
# Declare some variables
app = 10
ball = True
cat = &#39;kitten&#39;
dog = 100.0

# Define variables to be imported
# when module is imported
__all__ = [&#39;app&#39;, &#39;ball&#39;]
</code><!--]--></pre><!--]--><p><!--[-->如果要运行我们刚才写的 <code class=""><!--[-->add<!--]--></code> 函数，可以通过进入 Erlang 的 REPL 执行：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>&gt; c(main).
{ok,main}
&gt; main:add(10).
20
</code><!--]--></pre><!--]--><p><!--[-->如果要退出只需要输入 <code class=""><!--[-->halt().<!--]--></code>，其中，输入的 <code class=""><!--[-->c<!--]--></code> 表示编译，也就是 <a href="https://en.wikipedia.org/wiki/BEAM_(Erlang_virtual_machine)" rel="nofollow"><!--[-->BEAM,Bogdan&#39;s Erlang Abstract Machine<!--]--></a>，这是 Erlang 的虚拟机，跟 Java 的 JVM 差不多，都是有虚拟机运行的。<!--]--></p><h2 id="数据类型-2"><a href="#数据类型-2"><!--[-->数据类型 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>数据类型</p></main></div>






































































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->类型<!--]--></th><th><!--[-->独特性说明<!--]--></th><th><!--[-->其他语言近似替代<!--]--></th><th><!--[-->典型应用场景<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><strong><!--[-->Atom<!--]--></strong><!--]--></td><td><!--[-->全局唯一不可变常量，小写开头，直接用于模式匹配<!--]--></td><td><!--[-->Ruby <code class=""><!--[-->Symbol<!--]--></code>, Python <code class=""><!--[-->Enum<!--]--></code><!--]--></td><td><!--[-->状态标签、消息类型标识<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Pid<!--]--></strong><!--]--></td><td><!--[-->轻量级进程的唯一标识符，支持跨节点通信 (<code class=""><!--[-->!<!--]--></code> 操作符)<!--]--></td><td><!--[-->Akka <code class=""><!--[-->ActorRef<!--]--></code> (库实现)<!--]--></td><td><!--[-->分布式进程寻址<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Reference<!--]--></strong><!--]--></td><td><!--[-->运行时生成的全局唯一引用 (<code class=""><!--[-->make_ref()<!--]--></code>)<!--]--></td><td><!--[-->Java <code class=""><!--[-->UUID<!--]--></code> (需库)<!--]--></td><td><!--[-->异步消息去重、RPC 回调标识<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Port Identifier<!--]--></strong><!--]--></td><td><!--[-->与外部进程通信的句柄，内置跨语言支持<!--]--></td><td><!--[-->Python <code class=""><!--[-->subprocess.Popen<!--]--></code> (OS 依赖)<!--]--></td><td><!--[-->调用 C/Python 等外部程序<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Bit Strings<!--]--></strong><!--]--></td><td><!--[-->原生位操作语法 (<code class=""><!--[-->&lt;&lt;1:3, 2:5&gt;&gt;<!--]--></code>)，无需手动位移<!--]--></td><td><!--[-->C++ <code class=""><!--[-->std::bitset<!--]--></code> (需手动处理)<!--]--></td><td><!--[-->协议解析、二进制数据压缩<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Sigil<!--]--></strong><!--]--></td><td><!--[-->语法糖简化字符串/正则处理 (如 <code class=""><!--[-->~s(RAW)<!--]--></code>)<!--]--></td><td><!--[-->无直接等价，需函数调用<!--]--></td><td><!--[-->模板生成、正则表达式构建<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Fun<!--]--></strong><!--]--></td><td><!--[-->可序列化的不可变函数对象 (<code class=""><!--[-->fun(X) -&gt; X*2 end<!--]--></code>)<!--]--></td><td><!--[-->JavaScript 闭包 (但携带可变状态)<!--]--></td><td><!--[-->分布式传递计算逻辑<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Tuple<!--]--></strong><!--]--></td><td><!--[-->定长异构集合，匹配时需完全一致 (<code class=""><!--[-->{ok, Value}<!--]--></code> vs <code class=""><!--[-->{error, Reason}<!--]--></code>)<!--]--></td><td><!--[-->Python 元组 (但无模式匹配语义)<!--]--></td><td><!--[-->多返回值、结构化消息<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->List<!--]--></strong><!--]--></td><td><!--[-->链表结构，<code class=""><!--[-->[Head/Tail]<!--]--></code> 解构，字符串即整数列表 (<code class=""><!--[-->[72,101]<!--]--></code> → <code class=""><!--[-->&quot;He&quot;<!--]--></code>)<!--]--></td><td><!--[-->大多数语言的链表 (但无自动字符转换)<!--]--></td><td><!--[-->递归处理、文本解析<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><strong><!--[-->Map<!--]--></strong><!--]--></td><td><!--[-->动态 K-V 存储 (类似字典)，但匹配时需完全匹配键<!--]--></td><td><!--[-->Java <code class=""><!--[-->HashMap<!--]--></code>, Python <code class=""><!--[-->dict<!--]--></code><!--]--></td><td><!--[-->动态配置、JSON 交互<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><h3 id="pid-2"><a href="#pid-2"><!--[-->pid 2<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>PID</p></main></div><p><!--[-->这里面有很多有趣的，例如 <code class=""><!--[-->Pid<!--]--></code>。你可能会有一个疑问，为什么 PID 是一个单独的数据类型，而不是某个库提供的方法？感觉其他的 Lang 的数据类型都很常见，什么 Tuple、String、Int、List 之类的，但 PID 可能作为一个数据类型单独拿出来。<!--]--></p><p><!--[-->显然 PID 是一个专门为多线程操作设计的一个类型，其主要方便的一点是保证 <strong><!--[-->原子化<!--]--></strong>, 简单的来说就是给每个节点分配一个唯一的 ID（有点像是在学 spring cloud 的内容）总结来说 PID 类型在于：<!--]--></p><ol><!--[--><li><!--[-->原子性（atomicity）：每个 Pid 是唯一且不可变的，保证了进程间通信时不会混淆目标。<!--]--></li><li><!--[-->分布式唯一性：即便是在多节点（Node）之间通信，每个进程仍能通过 Pid 被唯一标识。<!--]--></li><li><!--[-->安全发送：Pid ! Message 是 Erlang 的基础通信语法，而你无法伪造一个 Pid 给系统发送消息。<!--]--></li><!--]--></ol><p><!--[-->例如在创建新的进程或者两者之间需要收发消息的时候就需要用到 PID，可以参考 <a href="https://www.erlang.org/doc/system/ref_man_processes#process-creation" rel="nofollow"><!--[-->Process Creation<!--]--></a><!--]--></p><!--[--><pre class="" style=""><!--[--><code>-module(main).

-export([start/0, ping/2, pong/0]).

ping(0, Pong_PID) -&gt;
    Pong_PID ! finished,
    io:format(&quot;ping finished~n&quot;, []);
ping(N, Pong_PID) -&gt;
    Pong_PID ! {ping, self()},
    receive
        pong -&gt;
            io:format(&quot;Ping received pong~n&quot;, [])
    end,
    ping(N - 1, Pong_PID).

pong() -&gt;
    receive
        finished -&gt;
            io:format(&quot;Pong finished~n&quot;, []);
        {ping, Ping_PID} -&gt;
            io:format(&quot;Pong received ping~n&quot;, []),
            Ping_PID ! pong,
            pong()
    end.

start() -&gt;
    Pong_PID = spawn(main, pong, []),
    spawn(main, ping, [3, Pong_PID]).

---
Pong received ping
Ping received pong
Pong received ping
Ping received pong
Pong received ping
Ping received pong
ping finished
Pong finished
</code><!--]--></pre><!--]--><hr><h2 id="并发与设计哲学-2"><a href="#并发与设计哲学-2"><!--[-->并发与设计哲学 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Erlang 核心操作与设计哲学</p></main></div><div class="wise-layout" data-v-0d8bf124><div class="wise-box" data-v-0d8bf124><p data-v-0d8bf124>Concurrent Programming <svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-0d8bf124 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg></p><div class="content" data-v-0d8bf124><!--[--><p><!--[-->使用 Erlang 而不是其他函数式语言的主要原因之一是 Erlang 处理并发和分布式编程的能力<!--]--></p><!--]--></div></div><span class="by" data-v-0d8bf124>Getting Started with Erlang</span></div><p><!--[-->这句话很有底气。在 Erlang 中，有一个并发的三要素，也就是：<!--]--></p><ol><!--[--><li><!--[--><code class=""><!--[-->spawn<!--]--></code>: 用于创建新进程;<!--]--></li><li><!--[--><code class=""><!--[-->!<!--]--></code>: 消息传递；<!--]--></li><li><!--[--><code class=""><!--[-->receive<!--]--></code>: 模式匹配处理消息:<br> 队列中的第一条消息将与 中的  <code class=""><!--[-->receive<!--]--></code> 第一个模式进行匹配。如果匹配，则从队列中删除消息并执行与模式对应的作。<!--]--></li><!--]--></ol><div class="wise-layout" data-v-0d8bf124><div class="wise-box" data-v-0d8bf124><p data-v-0d8bf124>Programming Erlang <svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-0d8bf124 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg></p><div class="content" data-v-0d8bf124><!--[--><p><!--[-->let it crash<!--]--></p><!--]--></div></div><span class="by" data-v-0d8bf124>Joe Armstrong</span></div><p><!--[-->毫无疑问的是，这一句话广为流传。有点像火箭中的 &quot;Blow it up&quot;。当然这不是我说的，对于这个设计哲学的讨论实在是太多了。我更倾向于 <a href="https://ferd.ca/the-zen-of-erlang.html" rel="nofollow"><!--[-->The Zen of Erlang<!--]--></a> 这一篇演讲。举了很多例子，比如：<!--]--></p>


































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Erlang<!--]--></th><th><!--[-->E.g<!--]--></th><th><!--[--><!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->Let it Crash<!--]--></td><td><!--[-->火箭科学（Blow it Up）​<!--]--></td><td><!--[-->火箭推进本质是控制爆炸（燃烧燃料），而非避免爆炸。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->森林防火<!--]--></td><td><!--[-->通过“受控燃烧”清除易燃物，防止更大火灾。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Processes<!--]--></td><td><!--[-->蜜蜂群<!--]--></td><td><!--[-->蜂群中每只蜜蜂独立工作，死亡不影响整体。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->登山队<!--]--></td><td><!--[-->登山者用绳索相连，但一人坠落可能拖累全队。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Message Passing<!--]--></td><td><!--[-->邮递、旗语<!--]--></td><td><!--[-->旗语、邮差送信是异步的，发信后无需等待回复。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><hr><h2 id="bohrbug-and-heisenbug-2"><a href="#bohrbug-and-heisenbug-2"><!--[-->Bohrbug and Heisenbug 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Bohrbug and Heisenbug</p></main></div><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->&#39;Bohrbug&#39; 和 &#39;Heisenbug&#39; 由 Jim Gray 于 1985 年创造（我建议您尽可能多地阅读 Jim Gray 的论文，它们几乎都很棒！）<!--]--></p><!--]--></main><!--]--><p><!--[-->虽然我没有兴趣看论文，但我在看 wikipedia 的时候找到了 Bohrbug 的参考文献即 <a href="http://catb.org/jargon/html/B/Bohr-bug.html" rel="nofollow"><!--[-->&quot;catb.org&quot;(
Eric S. Raymond&#39;s Home Page)<!--]--></a> 很有趣。看了他的个人介绍发现也是一位很有故事的人：<!--]--></p><div class="wise-layout" data-v-0d8bf124><div class="wise-box" data-v-0d8bf124><p data-v-0d8bf124>Views on open source <svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-0d8bf124 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg></p><div class="content" data-v-0d8bf124><!--[--><p><!--[-->Given enough eyeballs, all bugs are shallow.<br>
只要有足够多的眼睛，所有Bug都是浅显的<!--]--></p><!--]--></div></div><span class="by" data-v-0d8bf124>Eric S. Raymond</span></div><p><!--[-->(好像很契合这一部分的章节) 突然对这本书很有兴趣，毕竟是 <a href="https://en.wikipedia.org/wiki/Jargon_File" rel="nofollow"><!--[-->《Jargon File》行话文件<!--]--></a> 以后和群u萌水群的时候也可以拽几句俚语和上古行话了（后仰。让我意外的是 <a href="http://catb.org/jargon/html/B/Bohr-bug.html" rel="nofollow"><!--[-->Bohrbug<!--]--></a> 竟然来自量子物理学，<!--]--></p>












































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Type<!--]--></th><th><!--[-->Desc<!--]--></th><th><!--[-->Jargon_File<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->Bohrbug<!--]--></td><td><!--[-->稳定可复现​​：在相同条件下必然复现<!--]--></td><td><!--[-->一种可重复出现的错误；在一组可能未知但定义明确的条件下可靠地出现<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->易于调试​​：可通过日志、断点或单元测试定位。<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Heisenbug<!--]--></td><td><!--[-->难以复现​​：仅在特定条件下偶然出现（如高并发、特定硬件状态）。<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->牵一发而动全身：尝试修复它们常导致更多意外行为<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Mandelbug<!--]--></td><td><!--[-->问题根源深藏于系统复杂交互中<!--]--></td><td><!--[-->一种底层原因极其复杂且晦涩的bug，其行为看似混沌甚至非确定性。该术语暗示说话者认为它是一个 ​​Bohr bug​​（稳定可复现的bug），而非 ​​Heisenbug​​<!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><!--]--></td><td><!--[-->行为难以预测，但一旦复现则稳定存在<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Schroedinbug<!--]--></td><td><!--[-->类比量子物理中的“薛定谔的猫”思想实验<!--]--></td><td><!--[-->程序中的设计或实现bug，平时潜伏不发作，直到有人阅读源代码或以非常规方式使用程序时，突然发现“这代码根本不该工作！”——随后程序立即对所有人失效，直到修复。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><hr><h1 id="clojure-1"><!--[-->Clojure 1<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Clojure</p></main></div><p><!--[-->我对 Clojure 的印象就是 lisp(LISt Processing) 的 logo 很像 ☯  (阴阳) 除此之外没了。在本书中，作者强调了 Clojure 像是《星球大战》中的​​尤达大师​​——看似古怪（语法反直觉），实则蕴含深厚智慧（并发模型、JVM生态）。而 Lisp 的双重性比如 195 8年诞生，是第二古老的高级语言。同时又兼顾了 宏（macro）和代码即数据（homoiconicity）等特性,又现代了那么一点点。<!--]--></p><p><!--[-->要理解 Clojure 还需要先了解 LISt Processing 、Code as Data 这些 lisp 的核心特性。从输出 Hello,world 的方式来看，两者都是差不多的：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>Common Lisp:
(format t &quot;Hello, World!&quot;)
---

Clojure
(println &quot;Hello, World!&quot;)
</code><!--]--></pre><!--]--><!--[--><pre class="" style=""><!--[--><code>--- Clojure

;;    name   params         body
;;    -----  ------  -------------------
(defn greet [name]   (println (str &quot;Hello, &quot; name &quot;!&quot;)))

(greet &quot;John&quot;)
(greet &quot;Alla&quot;)

--- Common Lisp
(defun fib (n)
  &quot;Return the nth Fibonacci number.&quot;
  (if (&lt; n 2)
      n
      (+ (fib (- n 1))
         (fib (- n 2)))))

(format t &quot;Fibonacci of 30: ~D&quot; (fib 30))
</code><!--]--></pre><!--]--><p><!--[-->你别说你还真别说，Clojure 这个文档写的还是很通俗易懂的，很简洁，<a href="https://lisp-lang.org/" rel="nofollow"><!--[-->Common Lisp<!--]--></a> 的文档也很简洁，不过 Common Lisp 是上古时期 Lisp 的改良版，因此要体验原汁原味的历史厚重感，要通过 <a href="https://interlisp.org/" rel="nofollow"><!--[-->The Medley Interlisp Project<!--]--></a> 这个伟大的项目。<!--]--></p><p><!--[-->虽然不是最原始的 lisp，是 <a href="https://en.wikipedia.org/wiki/Lisp_(programming_language)" rel="nofollow"><!--[-->Interlisp<!--]--></a> 但这也在 lisp 历史时间线中靠前的，并发挥了重要的作用。有兴趣的话可以阅读下 <a href="https://interlisp.org/history/timeline/" rel="nofollow"><!--[-->Interlisp Timeline<!--]--></a> 记录了 1960 至今的时间线。<!--]--></p><h2 id="clojure-hosted-2"><a href="#clojure-hosted-2"><!--[-->Clojure Hosted 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Clojure JVM</p></main></div><p><!--[-->这一章算是让我意外的，我看到了作者在 Scala 篇章中没有写的内容，比如 Scala 和 Clojure 都是 JVM 生态。他们都可以使用 Java 的生态构建项目(有一说一我还是挺喜欢 scala 的，Code 看起来确实比 <code class=""><!--[-->(<!--]--></code> 好看多了)：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>--- Scala

import java.time.LocalDate

def addWeek(date: LocalDate): LocalDate =
  date.plusDays(7)

def dayToStr(date: LocalDate): String =
  s&quot;${date.getMonth} ${date.getDayOfMonth}, ${date.getYear}&quot;

// Infinite lazy list of weekly dates from today
val futureWeeks: LazyList[LocalDate] =
  LazyList.iterate(LocalDate.now())(addWeek)

// Take first 4 and print
futureWeeks
  .take(4)
  .map(dayToStr)
  .foreach(println)

--- Clojure
(import &#39;[java.time LocalDate])

(defn add-week ^LocalDate [^LocalDate date]
  (.plusDays date 7))

(defn day-&gt;str [^LocalDate date]
  (format &quot;%s %s, %s&quot; (.getMonth date) (.getDayOfMonth date) (.getYear date)))

;; infinite sequence of weekly dates, starting from today
(def future-weeks (iterate add-week (LocalDate/now)))

(doseq [s (map day-&gt;str (take 4 future-weeks))]
  (println s))


Output:
JULY 21, 2025
JULY 28, 2025
AUGUST 4, 2025
AUGUST 11, 2025
</code><!--]--></pre><!--]--><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->clojure-CLR（Common Language Runtime） 是 .NET 平台的核心运行时环境。不过我还没写过 .NET。给我的映像就是以前装什么软件会提示缺少 .NET Framework 3.x\4.x 环境什么的，一度认为是 .NET 域名有深厚联系。<!--]--></p><!--]--></main><!--]--><p><!--[-->不过作者成书的时候比较早，Clojure 目前将这个特性称之为 <a href="https://clojure.org/about/jvm_hosted" rel="nofollow"><!--[-->Hosted<!--]--></a> 除了 JVM 还有 <a href="https://clojurescript.org/" rel="nofollow"><!--[-->ClojureScript<!--]--></a>、<a href="https://github.com/clojure/clojure-clr" rel="nofollow"><!--[-->ClojureCLR<!--]--></a><!--]--></p><h2 id="homoiconicity-2"><a href="#homoiconicity-2"><!--[-->Homoiconicity 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Homoiconicity</p></main></div><p><!--[-->Homoiconicity（同像性）同常被视作为 &quot;代码视为数据&quot; 但貌似并没有达成共识。因此我更倾向于在大多数语言中（比如 Python、Java、C），你写的代码和数据结构是两回事，代码是“语言语法”，而数据是运行时的值。<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->这里的 “代码即数据” 并不严谨，更多的是方便理解，其真正的核心是 <strong><!--[-->同像性（homoiconicity来自希腊语单词，homo-意为相同，icon含义表像）<!--]--></strong> 这个单词组合：<!--]--></p><p><!--[-->Homoiconicity 是代码和数据的表示形式高度统一，语言的基本数据结构也是代码的语法结构，而不仅仅是代码“可以”被当数据处理。<!--]--></p><!--]--></main><!--]--><p><!--[-->但在 Clojure（或 Lisp） 中，代码的结构本身 就是数据结构（一般是列表 list）。所以你可以像操作数据一样，读取、修改、构造、执行代码。<!--]--></p><h3 id="macros-2"><a href="#macros-2"><!--[-->Macros 2<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Macros</p></main></div><p><!--[-->在此之前，作者阐述了语言的五个核心，其中在 “语言有哪些独特的核心特性” 里，并发支持、宏系统、虚拟机等成为主要的衡量因素。而上述的 Homoiconicity 体现之一，就是宏 (Macros) 宏实现了 Homoiconicity 中的 <strong><!--[-->代码即数据<!--]--></strong>。<!--]--></p><p><!--[-->可以通过 <code class=""><!--[-->macroexpand<!--]--></code> 函数来展开宏，例如 Clojure Docs 在 Macros 这一章给出的例子（可以丢进 <a href="https://www.tryclojure.com/" rel="nofollow"><!--[-->Try Clojure
<!--]--></a> 这个在线的 REPL 上看看，不过最近一次更新已经是 10 years ago 了 ：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>user=&gt; (-&gt; {} (assoc :a 1) (assoc :b 2))
{:b 2, :a 1}

user=&gt; (macroexpand &#39;(-&gt; {} (assoc :a 1) (assoc :b 2)))
(assoc (assoc {} :a 1) :b 2)

---
(list &#39;assoc
      (list &#39;assoc {} :a 1)
      :b 2)
</code><!--]--></pre><!--]--><p><!--[-->这就是代码和数据的统一性（同源性），既是 代码，也是一个 列表数据结构。（可以像操作普通数据一样，操作这段代码），因此宏可以用代码来生成代码。<!--]--></p><h2 id="destructuring-1"><a href="#destructuring-1"><!--[-->Destructuring 1<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Destructuring</p></main></div><p><!--[-->解构（Destructuring），我的理解就是匹配，严谨来说就是 <strong><!--[-->一种将名称简洁地绑定到数据结构内的值的方法<!--]--></strong>。例如 MDN 的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring" rel="nofollow"><!--[-->Destructuring<!--]--></a> 例子非常的简洁明了，而 Clojure 给出的例子就很直观：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>(def my-line [[5 10] [10 20]])

(let [p1 (first my-line)
      p2 (second my-line)
      x1 (first p1)
      y1 (second p1)
      x2 (first p2)
      y2 (second p2)]
  (println &quot;Line from (&quot; x1 &quot;,&quot; y1 &quot;) to (&quot; x2 &quot;, &quot; y2 &quot;)&quot;))
;= &quot;Line from ( 5 , 10 ) to ( 10 , 20 )&quot;
</code><!--]--></pre><!--]--><p><!--[-->Clojure 用的是显式(explicit)。同样是函数式的 py 则是 隐式(implicit)，就显得很简洁：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>head, *middle, tail = [1, 2, 3, 4, 5]

print(head)    # 1
print(middle)  # [2, 3, 4]
print(tail)    # 5
</code><!--]--></pre><!--]--><p><!--[-->如果要了解 <span>Explicit Pattern and Implicit Pattern</span> 两种设计哲学，还是非常复杂的，虽然很多 lang 的 docs 中都有这个名词。但真正能介绍的很少，但我觉得可以看看 <a href="https://en.wikipedia.org/wiki/Explicit_and_implicit_methods" rel="nofollow"><!--[-->Explicit and implicit methods<!--]--></a> 的介绍，总的来说就是字面理解：<!--]--></p><ul><!--[--><li><!--[-->explicit：来自拉丁文 explicare，意为“展开、解释清楚”<!--]--></li><li><!--[-->implicit：来自拉丁文 implicare，意为“卷入、含而不露”<!--]--></li><!--]--></ul><p><!--[-->不过在数学中，是反过来的，也就是正如下面两个式子一样。“显式”强调的是计算是“明确”的,而“隐式”是：你不知道下一步状态具体怎么求，需要解个方程。:<!--]--></p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="30.327ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 13404.6 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-6-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-6-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-6-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-6-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-6-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-6-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path><path id="MJX-6-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-6-TEX-N-3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-6-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-6-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-6-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-6-TEX-N-394" d="M51 0Q46 4 46 7Q46 9 215 357T388 709Q391 716 416 716Q439 716 444 709Q447 705 616 357T786 7Q786 4 781 0H51ZM507 344L384 596L137 92L383 91H630Q630 93 507 344Z"></path><path id="MJX-6-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-6-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-6-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-6-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(466,0)"><use data-c="1D465" xlink:href="#MJX-6-TEX-I-1D465"></use></g><g data-mml-node="mi" transform="translate(1038,0)"><use data-c="1D45D" xlink:href="#MJX-6-TEX-I-1D45D"></use></g><g data-mml-node="mi" transform="translate(1541,0)"><use data-c="1D459" xlink:href="#MJX-6-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(1839,0)"><use data-c="1D456" xlink:href="#MJX-6-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(2184,0)"><use data-c="1D450" xlink:href="#MJX-6-TEX-I-1D450"></use></g><g data-mml-node="mi" transform="translate(2617,0)"><use data-c="1D456" xlink:href="#MJX-6-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(2962,0)"><use data-c="1D461" xlink:href="#MJX-6-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(3600.8,0)"><use data-c="3A" xlink:href="#MJX-6-TEX-N-3A"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4156.6,0)"><g data-mml-node="mstyle"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-6-TEX-I-1D44C"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-6-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1152,0)"><use data-c="1D461" xlink:href="#MJX-6-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(1735.2,0)"><use data-c="2B" xlink:href="#MJX-6-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(2735.4,0)"><use data-c="394" xlink:href="#MJX-6-TEX-N-394"></use></g><g data-mml-node="mi" transform="translate(3568.4,0)"><use data-c="1D461" xlink:href="#MJX-6-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(3929.4,0)"><use data-c="29" xlink:href="#MJX-6-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(4596.2,0)"><use data-c="3D" xlink:href="#MJX-6-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(5652,0)"><use data-c="1D439" xlink:href="#MJX-6-TEX-I-1D439"></use></g><g data-mml-node="mo" transform="translate(6401,0)"><use data-c="28" xlink:href="#MJX-6-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(6790,0)"><use data-c="1D44C" xlink:href="#MJX-6-TEX-I-1D44C"></use></g><g data-mml-node="mo" transform="translate(7553,0)"><use data-c="28" xlink:href="#MJX-6-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(7942,0)"><use data-c="1D461" xlink:href="#MJX-6-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(8303,0)"><use data-c="29" xlink:href="#MJX-6-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(8692,0)"><use data-c="29" xlink:href="#MJX-6-TEX-N-29"></use></g><g data-mml-node="mstyle" transform="translate(9081,0)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg></mjx-container><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.469ex;" xmlns="http://www.w3.org/2000/svg" width="33.53ex" height="4.07ex" role="img" focusable="false" viewBox="0 -1149.5 14820.2 1799" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-7-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-7-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-7-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-7-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-7-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path><path id="MJX-7-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-7-TEX-N-3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-7-TEX-I-1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path><path id="MJX-7-TEX-LO-28" d="M180 96T180 250T205 541T266 770T353 944T444 1069T527 1150H555Q561 1144 561 1141Q561 1137 545 1120T504 1072T447 995T386 878T330 721T288 513T272 251Q272 133 280 56Q293 -87 326 -209T399 -405T475 -531T536 -609T561 -640Q561 -643 555 -649H527Q483 -612 443 -568T353 -443T266 -270T205 -41Z"></path><path id="MJX-7-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-7-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-7-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-7-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-7-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-7-TEX-N-394" d="M51 0Q46 4 46 7Q46 9 215 357T388 709Q391 716 416 716Q439 716 444 709Q447 705 616 357T786 7Q786 4 781 0H51ZM507 344L384 596L137 92L383 91H630Q630 93 507 344Z"></path><path id="MJX-7-TEX-LO-29" d="M35 1138Q35 1150 51 1150H56H69Q113 1113 153 1069T243 944T330 771T391 541T416 250T391 -40T330 -270T243 -443T152 -568T69 -649H56Q43 -649 39 -647T35 -637Q65 -607 110 -548Q283 -316 316 56Q324 133 324 251Q324 368 316 445Q278 877 48 1123Q36 1137 35 1138Z"></path><path id="MJX-7-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-7-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-7-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(345,0)"><use data-c="1D45A" xlink:href="#MJX-7-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(1223,0)"><use data-c="1D45D" xlink:href="#MJX-7-TEX-I-1D45D"></use></g><g data-mml-node="mi" transform="translate(1726,0)"><use data-c="1D459" xlink:href="#MJX-7-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(2024,0)"><use data-c="1D456" xlink:href="#MJX-7-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(2369,0)"><use data-c="1D450" xlink:href="#MJX-7-TEX-I-1D450"></use></g><g data-mml-node="mi" transform="translate(2802,0)"><use data-c="1D456" xlink:href="#MJX-7-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(3147,0)"><use data-c="1D461" xlink:href="#MJX-7-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(3785.8,0)"><use data-c="3A" xlink:href="#MJX-7-TEX-N-3A"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4341.6,0)"><g data-mml-node="mstyle"><g data-mml-node="mi"><use data-c="1D43A" xlink:href="#MJX-7-TEX-I-1D43A"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(786,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="28" xlink:href="#MJX-7-TEX-LO-28"></use></g></g></g><g data-mml-node="mi" transform="translate(1383,0)"><use data-c="1D44C" xlink:href="#MJX-7-TEX-I-1D44C"></use></g><g data-mml-node="mo" transform="translate(2146,0)"><use data-c="28" xlink:href="#MJX-7-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(2535,0)"><use data-c="1D461" xlink:href="#MJX-7-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(2896,0)"><use data-c="29" xlink:href="#MJX-7-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(3285,0)"><use data-c="2C" xlink:href="#MJX-7-TEX-N-2C"></use></g><g data-mml-node="mi" transform="translate(3729.7,0)"><use data-c="1D44C" xlink:href="#MJX-7-TEX-I-1D44C"></use></g><g data-mml-node="mo" transform="translate(4492.7,0)"><use data-c="28" xlink:href="#MJX-7-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(4881.7,0)"><use data-c="1D461" xlink:href="#MJX-7-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(5464.9,0)"><use data-c="2B" xlink:href="#MJX-7-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(6465.1,0)"><use data-c="394" xlink:href="#MJX-7-TEX-N-394"></use></g><g data-mml-node="mi" transform="translate(7298.1,0)"><use data-c="1D461" xlink:href="#MJX-7-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(7659.1,0)"><use data-c="29" xlink:href="#MJX-7-TEX-N-29"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(8048.1,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="29" xlink:href="#MJX-7-TEX-LO-29"></use></g></g></g><g data-mml-node="mo" transform="translate(8922.9,0)"><use data-c="3D" xlink:href="#MJX-7-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(9978.7,0)"><use data-c="30" xlink:href="#MJX-7-TEX-N-30"></use></g></g></g></g></g></svg></mjx-container><p><!--[-->而在 lang 中则是，<strong><!--[-->显式写出（显式） vs 编译器自动推导（隐式）<!--]--></strong>（突然理解了为什么 Haskell 会在 docs 上写推导了。<!--]--></p><blockquote><!--[--><p><!--[-->Kind inference checks the validity of type expressions in a similar way that type inference checks the validity of value expressions. However, unlike types, kinds are entirely implicit and are not a visible part of the language. Kind inference is discussed in Section 4.6.<!--]--></p><!--]--></blockquote><hr><h2 id="原力-2"><a href="#原力-2"><!--[-->原力 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>原力</p></main></div><p><!--[-->作者很有意思，会在每个章节的开头用影视剧的剧情来描述本章节可能带来的一些内容，比如本章节就以星球大战中的剧情为例子体现出 在 Clojure 中，​​序列（Sequences）​​、​​惰性求值（Lazy Evaluation）​​和​​宏（Macros）是原力的体现<!--]--></p><h3 id="sequences-2"><a href="#sequences-2"><!--[-->Sequences 2<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Sequences</p></main></div><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->在数学中， 序列是允许重复且顺序很重要的对象的枚举集合。与集合一样，它包含成员 （也称为元素或术语 ）。元素的数量（可能是无限的）称为序列的长度 。与集合不同，相同的元素可以在序列中的不同位置多次出现，并且与集合不同，顺序确实很重要。<!--]--></p><p><!--[--><strong><!--[-->有限和无限序列<!--]--></strong><!--]--></p><p><!--[-->序列的长度定义为序列中的项数。限长度的序列是有限序列 。长度为 n 的有限序列也称为 n 元组 。有限序列包括没有元素的空序列 ，表示为 （ ）。<!--]--></p><p><!--[-->限序列是指在一个方向上是无限的，在另一个方向上是有限的序列;这样的序列有第一个元素，但没有最终元素，当需要消歧义时称为单无限序列或单侧无限序列 。<!--]--></p><p><!--[-->在两个方向上都是无限的序列——即既没有第一个元素也没有最后一个元素——称为双无限序列 、 双向无限序列或双无限序列 。<!--]--></p><blockquote><!--[--><p><!--[-->例如所有偶数整数的序列 （ ...， −4， −2， 0， 2， 4， 6， 8， ... ），是双无限的。（建议看维基百科的介绍)<!--]--></p><!--]--></blockquote><!--]--></main><!--]--><p><!--[--><a href="https://en.wikipedia.org/wiki/Sequence" rel="nofollow"><!--[-->序列（Sequences）<!--]--></a> 我的理解就是操作数据结构的一种方式，在计算机科学中，有限序列通常称为字符串 、 单词或列表(而无限序列被称之为流)。这也就是为什么 Clojure 会在这一章接描述中写了一句 “seq 是一个逻辑列表” 的原因，而 ISeq 大概就是 Interface for Sequence 的缩写？<!--]--></p><p><!--[-->因此这就抛出了一个 Clojure 特性之一的 <a href="https://en.wikipedia.org/wiki/Lazy_evaluation" rel="nofollow"><!--[-->“Lazy Evaluation” 即惰性求值<!--]--></a>。是 <a href="https://en.wikipedia.org/wiki/Programming_language_theory" rel="nofollow"><!--[-->Programming language theory<!--]--></a> 讨论的范畴，而 <strong><!--[-->λ<!--]--></strong> 属于编程语言理论(PLT) 的非官方符号（怪不得 Haskell website 上能看到这个符号）值得注意的是这个符号还是 <a href="https://en.wikipedia.org/wiki/Scheme_(programming_language)" rel="nofollow"><!--[-->Scheme<!--]--></a> 的 logo，他是 Lisp 系列编程语言的一种方言之一，诞生于 1970 年代。<!--]--></p><p><!--[--><strong><!--[-->惰性求值的优点是能够创建可计算的无限列表<!--]--></strong>，怪不得很多 lang 都喜欢 <a href="https://en.wikipedia.org/wiki/Fibonacci_sequence" rel="nofollow"><!--[-->斐波那契数列<!--]--></a> 做特性展示。原来是 show lang 的序列特性哇:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>(def fib-seq
  (-&gt;&gt; [0 1]                      
       (iterate (fn [[a b]] [b (+ a b)])) 
       (map first)))       
       
(println (take 20 fib-seq))
;;  (0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181)
</code><!--]--></pre><!--]--><br><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -3.507ex;" xmlns="http://www.w3.org/2000/svg" width="38.61ex" height="8.145ex" role="img" focusable="false" viewBox="0 -2050 17065.4 3600" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-8-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path><path id="MJX-8-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-8-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-8-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-8-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-8-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-8-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-8-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-8-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-8-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-8-TEX-N-A0" d></path><path id="MJX-8-TEX-N-2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0,1300)"><g data-mml-node="mtd" transform="translate(100,0)"><g data-mml-node="mi"><use data-c="1D439" xlink:href="#MJX-8-TEX-I-1D439"></use></g><g data-mml-node="mo" transform="translate(749,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(1138,0)"><use data-c="30" xlink:href="#MJX-8-TEX-N-30"></use></g><g data-mml-node="mo" transform="translate(1638,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g></g><g data-mml-node="mtd" transform="translate(2127,0)"><g data-mml-node="mi"></g><g data-mml-node="mo" transform="translate(277.8,0)"><use data-c="3D" xlink:href="#MJX-8-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1333.6,0)"><use data-c="30" xlink:href="#MJX-8-TEX-N-30"></use></g></g></g><g data-mml-node="mtr" transform="translate(0,0)"><g data-mml-node="mtd" transform="translate(100,0)"><g data-mml-node="mi"><use data-c="1D439" xlink:href="#MJX-8-TEX-I-1D439"></use></g><g data-mml-node="mo" transform="translate(749,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(1138,0)"><use data-c="31" xlink:href="#MJX-8-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1638,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g></g><g data-mml-node="mtd" transform="translate(2127,0)"><g data-mml-node="mi"></g><g data-mml-node="mo" transform="translate(277.8,0)"><use data-c="3D" xlink:href="#MJX-8-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1333.6,0)"><use data-c="31" xlink:href="#MJX-8-TEX-N-31"></use></g></g></g><g data-mml-node="mtr" transform="translate(0,-1300)"><g data-mml-node="mtd"><g data-mml-node="mi"><use data-c="1D439" xlink:href="#MJX-8-TEX-I-1D439"></use></g><g data-mml-node="mo" transform="translate(749,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1138,0)"><use data-c="1D45B" xlink:href="#MJX-8-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(1738,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g></g><g data-mml-node="mtd" transform="translate(2127,0)"><g data-mml-node="mi"></g><g data-mml-node="mo" transform="translate(277.8,0)"><use data-c="3D" xlink:href="#MJX-8-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(1333.6,0)"><use data-c="1D439" xlink:href="#MJX-8-TEX-I-1D439"></use></g><g data-mml-node="mo" transform="translate(2082.6,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(2471.6,0)"><use data-c="1D45B" xlink:href="#MJX-8-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(3293.8,0)"><use data-c="2212" xlink:href="#MJX-8-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(4294,0)"><use data-c="31" xlink:href="#MJX-8-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(4794,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(5405.2,0)"><use data-c="2B" xlink:href="#MJX-8-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(6405.4,0)"><use data-c="1D439" xlink:href="#MJX-8-TEX-I-1D439"></use></g><g data-mml-node="mo" transform="translate(7154.4,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(7543.4,0)"><use data-c="1D45B" xlink:href="#MJX-8-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(8365.7,0)"><use data-c="2212" xlink:href="#MJX-8-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(9365.9,0)"><use data-c="32" xlink:href="#MJX-8-TEX-N-32"></use></g><g data-mml-node="mo" transform="translate(9865.9,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g><g data-mml-node="mstyle" transform="translate(10254.9,0)"><g data-mml-node="mspace"></g></g><g data-mml-node="mtext" transform="translate(11254.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">当</text><use data-c="A0" xlink:href="#MJX-8-TEX-N-A0" transform="translate(1000,0)"></use></g><g data-mml-node="mi" transform="translate(12504.9,0)"><use data-c="1D45B" xlink:href="#MJX-8-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(13382.7,0)"><use data-c="2265" xlink:href="#MJX-8-TEX-N-2265"></use></g><g data-mml-node="mn" transform="translate(14438.4,0)"><use data-c="32" xlink:href="#MJX-8-TEX-N-32"></use></g></g></g></g></g></g></svg></mjx-container><p><!--[-->比如这里我们就展示到了 Clojure 的惰性求值特性也就是 <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/iterate" rel="nofollow"><!--[-->iterate<!--]--></a> 方法。Clojure 文档介绍的很详细：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>iterate
function

Usage: (iterate f x)
Returns a lazy (infinite!) sequence of x, (f x), (f (f x)) etc.
f must be free of side-effects
</code><!--]--></pre><!--]--><h3 id="iseq-1"><a href="#iseq-1"><!--[-->ISeq 1<!--]--></a></h3><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>ISeq</p></main></div><p><!--[-->ISeq(Interface for Sequence, Sequences)，在这一章节中，ISeq 和 Seq 的区别在于，所有 Interface 都必须满足两个条件，即​​不可变（Immutable）、持久化（Persistent） 。<code class=""><!--[-->for<!--]--></code>、<code class=""><!--[-->while<!--]--></code> 这些循环获取数据的，叫 <strong><!--[-->迭代器（Iterator）<!--]--></strong><!--]--></p><p><!--[-->使用 ISeq 不仅原生支持 <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/lazy-seq" rel="nofollow"><!--[-->lazy-seq<!--]--></a>，同时还用有不可变不可变性（Immutability）增加了线程安全性, BTW 有一说一，Clojure docs 还挺全的。比如上面我们演示 斐波那契数列所使用的 <a href="https://github.com/clojure/clojure/blob/clojure-1.11.1/src/clj/clojure/core.clj#L3030" rel="nofollow"><!--[-->iterate<!--]--></a> 函数算是隐式依赖 ISeq 接口：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>Give me some Clojure:
&gt; (instance? clojure.lang.ISeq s)
true
</code><!--]--></pre><!--]--><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->不可变性看似线程安全很小众，实则避免了传统语言中 90% 的并发的 Bug（如竞态条件、死锁）<!--]--></p><!--]--></main><!--]--><h4 id="声明式-2"><a href="#声明式-2"><!--[-->声明式 2<!--]--></a></h4><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>声明式编程</p></main></div><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[-->声明式编程是一个总称， 包括许多更知名的编程范例 。<!--]--></p><!--]--></main><!--]--><p><!--[--><a href="https://en.wikipedia.org/wiki/Declarative_programming" rel="nofollow"><!--[-->​​声明式编程​​	(Declarative Programming)<!--]--></a> 有一说一我还挺喜欢这个范式的，不过他竟然还有个子范式，大名鼎鼎的 Functional programming  函数式编程 没想到也是在这个范式里面的。总的来说声明式的特点是 <strong><!--[-->关注“做什么”（What）<!--]--></strong>:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>┌───────────────────────┐                                                        
│    Clojure vs Java    │                                                        
└───────────────────────┤                                                        
                        │                                                        
&gt; (-&gt;&gt; [1 2 3 4 5 6]    │   import java.util.*;                                  
     (filter even?)     │                                                        
     (map #(* % %))     │   public class Main {                                  
     (reduce +))        │     public static void main(String[] args) {           
56                      │       int sum = 0;                                     
                        │       for (int num : Arrays.asList(1, 2, 3, 4, 5, 6)) {
                        │         if (num % 2 == 0) {                            
                        │           System.out.println(sum += num * num);        
                        │         }                                              
                        │       }                                                
                        │     }                                                  
                        │   }                                                    
                        │                                                        
</code><!--]--></pre><!--]--><p><!--[-->数据像流水线一样通过转换规则，​​无需关心中间步骤如何实现​​。而命令式则是需自行实现迭代、过滤、计算和累加，​​每一步都暴露细节​​。BTW, THIS Thread safety<!--]--></p><h4 id="命令式-2"><a href="#命令式-2"><!--[-->命令式 2<!--]--></a></h4><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>命令式编程</p></main></div><p><!--[--><a href="https://en.wikipedia.org/wiki/Imperative_programming" rel="nofollow"><!--[-->​​命令式编程​​	(Imperative Programming	)<!--]--></a> 正如维基百科所介绍的 <strong><!--[-->“命令式编程侧重于描述程序如何逐步运行”<!--]--></strong> 我觉得这句话很精髓，也就是关注 <strong><!--[-->如何做”（How）<!--]--></strong>，不过有一说一两种方式跟思维习惯有很大的关系。两者的区别是 <strong><!--[-->过程导向​​ or 目标导向​<!--]--></strong>。酱紫好像声明式更适合我，但命令式貌似上限更高？命令式更接近底层​的感觉，比如直接操作内存、寄存器、指针\手动实现循环展开、内存预分配<!--]--></p><p><!--[-->就像是选择系统时，是想选择 Windows 还是 Linux 甚至是 macOS 的感觉一样。如果选择了 Linux，那就会接触到各种各样的技术栈，比如打包、构建、包管理、桌面管理将时间花在自定义和 Linux 生态上，每次更新都能遇到一大堆 warning 甚至是引导错误，随处可见的 Bug 等着你的 PR。<!--]--></p><p><!--[-->macOS 则偏向“开箱即用”（Out-of-the-Box Experience），大多数功能都已经封装得很好，适合直接“做事”而不是“折腾”。虽然可自定义性有限，但开发者可以在其封闭但统一的环境中获得一致性体验（Consistent Developer Environment）。当然，如果你乐于突破沙箱限制，说不定还能邂逅一个 0day CVE（笑）。<!--]--></p><p><!--[-->Windows 则更像是一个多元宇宙。无论是进行商业软件开发、跑各种奇怪的 GUI 工具，还是畅玩 3A 大作，它都能胜任。这个系统更倾向于广度而非深度，提供了一个丰富而包容的生态，适合“想怎么玩就怎么玩”。<!--]--></p><hr><h2 id="protocols-2"><a href="#protocols-2"><!--[-->Protocols 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Protocols</p></main></div><p><!--[-->有一说一这个 Protocols 一眼让我联想到了 <a href="https://en.wikipedia.org/wiki/Internet_protocol_suite" rel="nofollow"><!--[-->Internet protocol suite<!--]--></a>。还想着 Clojure 竟然还能写协议？不过仔细看了下 <a href="https://clojure.org/reference/protocols" rel="nofollow"><!--[-->Clojure Protocols<!--]--></a> 章节发现只能是 <strong><!--[-->定义“什么能做什么”（如 Movable 协议要求实现 move 方法）。而隔壁的 <a href="https://docs.rs/protocol/latest/protocol/" rel="nofollow"><!--[-->​​Rust protocol crate<!--]--></a> 则是实打实的 Protocols<!--]--></strong>:<!--]--></p>
























<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Code<!--]--></th><th><!--[-->Info<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->(defprotocol Greet)<!--]--></td><td><!--[-->定义“打招呼”的标准（如挥手、微笑、说“Hi”）。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->(defrecord Person)<!--]--></td><td><!--[-->人类实现：用语言打招呼。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->(defrecord Robot)<!--]--></td><td><!--[-->机器人实现：用电子音打招呼。<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->(extend-type String)<!--]--></td><td><!--[-->让纸条（String）也能“打招呼”（打印文字）。<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><!--[--><pre class="" style=""><!--[--><code>Protocol  │ (defprotocol Greet                                           
          │   (say-hi [this]))                                           
                                                                         
                                                                         
Defrecord │ (defrecord Person [name]                                     
          │   Greet                                                      
          │   (say-hi [this] (println (str &quot;Hi, I&#39;m &quot; (:name this)))))   
          │                                                              
          │ (defrecord Robot [id]                                        
          │   Greet                                                      
          │   (say-hi [this] (println (str &quot;Beep &quot; (:id this)))))        
                                                                         
                                                                         
            (def alice (-&gt;Person &quot;Alice&quot;))                               
            (def bot (-&gt;Robot 42))                                       
                                                                         
            (say-hi alice)  ;&quot;Hi, I&#39;m Alice&quot;                             
            (say-hi bot)    ;Beep 42&quot;                                    
                                                                         
                                                                         
extend-ty │ (extend-type String                                          
pe        │   Greet                                                      
          │   (say-hi [this] (println (str &quot;Hello from string: &quot; this))))
          │                                                              
          │ (say-hi &quot;Clojure&quot;) ;&quot;Hello from string: Clojure&quot;             
</code><!--]--></pre><!--]--><hr><h2 id="stm-2"><a href="#stm-2"><!--[-->STM 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>STM</p></main></div><p><!--[--><a href="https://en.wikipedia.org/wiki/Software_transactional_memory" rel="nofollow"><!--[-->STM(software transactional memory, 软件事务内存)<!--]--></a> 在最后一个章节中，作者讲述的是 Clojure 的并发控制。以体现出与 Io、Scala、Erlang 的不同之处。上述大多是采用 Actor，而 Clojure 则内建了 STM。（有一说一真的很像是学 spring cloud 时候的感觉<!--]--></p><!--[--><main data-v-5afc3f96><!--[--><!----><!--]--></main><main class="tip" data-v-5afc3f96><svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-5afc3f96 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg><!--[--><p><!--[--><code class=""><!--[-->Var<!--]--></code> 通过线程隔离确保安全使用可变存储位置，而事务引用 （<code class=""><!--[-->Refs<!--]--></code>） 确保通过软件事务内存 （STM） 系统安全共享可变存储位置。<!--]--></p><!--]--></main><!--]-->





































































<table><!--[--><thead><!--[--><tr><!--[--><th><!--[-->NAME<!--]--></th><th><!--[-->DESC<!--]--></th><th><!--[-->TIP<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->alter<!--]--></td><td><!--[-->标准修改，基于当前值<!--]--></td><td><!--[-->STM 提供的三种方式<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->commute<!--]--></td><td><!--[-->可交换（commutative）操作，适合并发较高场景<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->ref-set<!--]--></td><td><!--[-->直接替换整个值<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->ensure<!--]--></td><td><!--[-->用于读取但不修改的 Ref，它的值不能被其他事务修改，否则当前事务失败<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->nvecs<!--]--></td><td><!--[-->有多少个向量（Ref）<!--]--></td><td><!--[--><code class=""><!--[-->run [nvecs nitems nthreads niters]<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->nitems<!--]--></td><td><!--[-->每个向量有多少个元素<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->nthreads<!--]--></td><td><!--[-->启动多少线程<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->niters<!--]--></td><td><!--[-->每个线程执行多少次交换操作<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->有序<!--]--></td><td><!--[-->元素有固定的顺序，按插入顺序排列<!--]--></td><td><!--[-->向量（Vector）<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->可索引<!--]--></td><td><!--[-->可以通过索引访问某个位置的元素（和数组类似）<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->不可变<!--]--></td><td><!--[-->向量一旦创建，原始值不会被修改（更新会返回一个新的向量）<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->高效结构共享<!--]--></td><td><!--[-->修改后的向量共享结构，效率高，适合并发和持久化操作<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><p><!--[-->多说无益，Clojure Docs 给了一个很好的例子诠释其哲学：<!--]--></p><!--[--><pre class="" style=""><!--[--><code>; 
(defn run [nvecs nitems nthreads niters]
  (let [vec-refs (vec (map (comp ref vec)
                           (partition nitems (range (* nvecs nitems)))))
        swap #(let [v1 (rand-int nvecs)
                    v2 (rand-int nvecs)
                    i1 (rand-int nitems)
                    i2 (rand-int nitems)]
                (dosync
                 (let [temp (nth @(vec-refs v1) i1)]
                   (alter (vec-refs v1) assoc i1 (nth @(vec-refs v2) i2))
                   (alter (vec-refs v2) assoc i2 temp))))
        report #(do
                 (prn (map deref vec-refs))
                 (println &quot;Distinct:&quot;
                          (count (distinct (apply concat (map deref vec-refs))))))]
    (report)
    (dorun (apply pcalls (repeat nthreads #(dotimes [_ niters] (swap)))))
    (report)))
    (run 100 10 10 100000)
---
([0 1 2 3 4 5 6 7 8 9] [10 11 12 13 14 15 16 17 18 19] ...
 [990 991 992 993 994 995 996 997 998 999])
Distinct: 1000
</code><!--]--></pre><!--]--><blockquote><!--[--><p><!--[-->你有很多盒子，每个盒子里装着不重复的数字（连续编号）<br>
你派出好多工人（线程），每个人不停地随机去两个盒子里拿数字换来换去<br>
这个换数字的过程用了一套“事务系统”保证不会打架（线程安全）<br>
换来换去之后，数字的总数和唯一性不会丢失（不会丢数字，也不会重复数字）<br>
最终打印开始和结束时盒子里的数字，证明所有数字依旧完整且没错乱。 <br><!--]--></p><!--]--></blockquote><p><!--[-->你有一排盒子，每个盒子里装着一组连续的数字。所有盒子按顺序排列成一个大箱子。然后随机找两个盒子，从每个盒子里随机拿出一个数字，把这两个数字交换。整个交换过程是原子的，不会被其他线程打断，最后打印当前所有盒子里的数字状态，然后检查有没有数字丢失或者重复。<!--]--></p><hr><h1 id="haskell-1"><!--[-->Haskell 1<!--]--></h1><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="title" data-v-f0803dcc>Haskell</p></main></div><div class="wise-layout" data-v-0d8bf124><div class="wise-box" data-v-0d8bf124><p data-v-0d8bf124>Haskell History <svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-0d8bf124 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg></p><div class="content" data-v-0d8bf124><!--[--><p><!--[-->1985 年 Research Software Ltd. 发布 Miranda 后，人们对惰性函数式语言的兴趣与日俱增。<!--]--></p><p><!--[-->到 1987 年，已经存在了十几种非严格的、纯函数式编程语言。Miranda 是使用最广泛的，但它是专有软件 。<!--]--></p><p><!--[--><strong><!--[-->在俄勒冈州波特兰市举行的函数式编程语言和计算机体系结构 （FPCA &#39;87） 会议上，人们达成了强烈共识，即成立一个委员会来定义此类语言的开放标准 。<!--]--></strong><!--]--></p><p><!--[-->该委员会的目的是将现有的函数式语言整合为通用语言，作为未来函数式语言设计研究的基础。<!--]--></p><!--]--></div></div><span class="by" data-v-0d8bf124>Wikipedia</span></div><p><!--[-->要想了解一个 Programming Language，很多时候会敲一个 <code class=""><!--[-->Hello,world!<!--]--></code>。而可以与前者相提并论的就是斐波那契数列，在 Haskell wiki 中写到：<!--]--></p><div class="wise-layout" data-v-0d8bf124><div class="wise-box" data-v-0d8bf124><p data-v-0d8bf124>The Fibonacci sequence <svg width="20px" height="20px" viewbox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon tip-quto" data-v-0d8bf124 data-v-2b6644a8><path d="M3.80031 6H0V3.10843C0 2.62651 0.0936037 2.19277 0.280811 1.80723C0.468019 1.42169 0.723869 1.09639 1.04836 0.831325C1.38534 0.554217 1.77223 0.349398 2.20905 0.216867C2.64587 0.0722892 3.11388 0 3.6131 0H5.44774V1.62651C5.0858 1.62651 4.79251 1.63855 4.56786 1.66265C4.35569 1.6747 4.19345 1.72892 4.08112 1.8253C3.9688 1.92169 3.89392 2.07229 3.85647 2.27711C3.81903 2.46988 3.80031 2.74699 3.80031 3.10843V6ZM10.3526 6H6.57098V3.10843C6.57098 2.62651 6.66459 2.19277 6.85179 1.80723C7.039 1.42169 7.29485 1.09639 7.61934 0.831325C7.94384 0.554217 8.32449 0.349398 8.76131 0.216867C9.19813 0.0722892 9.66615 0 10.1654 0H12V1.62651C11.6381 1.62651 11.3448 1.63855 11.1201 1.66265C10.908 1.6747 10.7457 1.72892 10.6334 1.8253C10.5211 1.92169 10.4462 2.07229 10.4087 2.27711C10.3713 2.46988 10.3526 2.74699 10.3526 3.10843V6Z" fill="black"></path></svg></p><div class="content" data-v-0d8bf124><!--[--><p><!--[-->Implementing the Fibonacci sequence is considered the &quot;Hello, world!&quot; of Haskell programming.<br>
斐波那契数列被认为是 Haskell 编程的“你好，世界！<!--]--></p><!--]--></div></div><span class="by" data-v-0d8bf124>Haskell wiki</span></div><!--[--><pre class="" style=""><!--[--><code>fib 0 = 0
fib 1 = 1
fib n = fib (n-1) + fib (n-2)

main = do
    let n = 10
    print [fib i | i &lt;- [0..n-1]]

--- Output:
[0,1,1,2,3,5,8,13,21,34]

</code><!--]--></pre><!--]--><p><!--[-->在这一章中 wiki 给了很多中实现 fib 的方式，而我选择最基础的普通递归（naive recursion）。直接实现了斐波那契数列的定义，没有做任何优化。但我知道有更好的实现，例如尾递归、动态规划、矩阵幂。这就跟推箱子游戏一样，无论如何都可以通关，一开始大家追求的只是通关，而慢慢的就开始追求最小步数、更快的通关方式。<!--]--></p><p><!--[-->可能这就是我与那些大佬之间的区别，没有对一件事情的极致追求以及偏执。就跟魂类游戏一样，有的人享受即使挂了很多次也可以重新开始拿起武器挥舞。而我可能会选择关闭不玩，转而去看电视。<!--]--></p><h2 id="guards-2"><a href="#guards-2"><!--[-->Guards 2<!--]--></a></h2><div class="text-title-color" data-v-f0803dcc><main data-v-f0803dcc><p class="h2" data-v-f0803dcc>Guards</p></main></div><p><!--[-->作为一个将 <code class=""><!--[-->λ<!--]--></code> 体现在 Logo 上的 Language 来说，我认为学术风格必然会占很大的比例（从文档上也能直接看出是很纯粹的 tech style）。感觉第一章的内容和 Haskell website 上的那个 “Try it!” 很像，内容相近。不过最让我好奇的是 <code class=""><!--[-->Guards<!--]--></code>(pattern guard) 的条件表达式，类比于其他语言中的 <code class=""><!--[-->if-else<!--]--></code> or <code class=""><!--[-->switch-case<!--]--></code>:<!--]--></p><!--[--><pre class="" style=""><!--[--><code>f x
  | pat &lt;- exp
  , condition
  = result

--- Exp

addMaybe :: Maybe Int -&gt; Maybe Int -&gt; Int
addMaybe x y
  | Just a &lt;- x
  , Just b &lt;- y
  = a + b
addMaybe _ _ = 0 

main = do
  print (addMaybe (Just 1) (Just 1)) 
  print (addMaybe (Just 1) Nothing)
  print (addMaybe Nothing (Just 1))

---&gt; Output
2
0
0
</code><!--]--></pre><!--]--><p><!--[-->例如上述的 <code class=""><!--[-->pat &lt;- exp<!--]--></code> 就相当于一个模式守卫(pattern guards)，如果 <code class=""><!--[-->x<!--]--></code> 和 <code class=""><!--[-->y<!--]--></code> 都是 <code class=""><!--[-->Just<!--]--></code>。比较有趣的是，Haskell 貌似有点语义化？比如 <code class=""><!--[-->Maybe<!--]--></code> 类型和他的 <code class=""><!--[-->Just<!--]--></code> 构造函数，都是能从字面意义上理解的。对于这两个的理解我还挺喜欢这篇  <a href="https://stackoverflow.com/questions/18808258/what-does-the-just-syntax-mean-in-haskell" rel="nofollow"><!--[-->What does the &quot;Just&quot; syntax mean in Haskell?<!--]--></a> 回答的内容。<!--]--></p><!--]--></div></div></main><style>
mjx-container[jax=&quot;SVG&quot;] {
  direction: ltr;
}

mjx-container[jax=&quot;SVG&quot;] &gt; svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax=&quot;SVG&quot;] &gt; svg a {
  fill: blue;
  stroke: blue;
}

mjx-container[jax=&quot;SVG&quot;][display=&quot;true&quot;] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax=&quot;SVG&quot;][display=&quot;true&quot;][width=&quot;full&quot;] {
  display: flex;
}

mjx-container[jax=&quot;SVG&quot;][justify=&quot;left&quot;] {
  text-align: left;
}

mjx-container[jax=&quot;SVG&quot;][justify=&quot;right&quot;] {
  text-align: right;
}

g[data-mml-node=&quot;merror&quot;] &gt; g {
  fill: red;
  stroke: red;
}

g[data-mml-node=&quot;merror&quot;] &gt; rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node=&quot;mtable&quot;] &gt; line[data-line], svg[data-table] &gt; g &gt; line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node=&quot;mtable&quot;] &gt; rect[data-frame], svg[data-table] &gt; g &gt; rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node=&quot;mtable&quot;] &gt; .mjx-dashed, svg[data-table] &gt; g &gt; .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node=&quot;mtable&quot;] &gt; .mjx-dotted, svg[data-table] &gt; g &gt; .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node=&quot;mtable&quot;] &gt; g &gt; svg {
  overflow: visible;
}

[jax=&quot;SVG&quot;] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax=&quot;SVG&quot;] mjx-tool &gt; mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool &gt; mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node=&quot;maction&quot;][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax=&quot;SVG&quot;] path[data-c], mjx-container[jax=&quot;SVG&quot;] use[data-c] {
  stroke-width: 3;
}
</style></div><!--]--><!--]--></div></div><div id="teleports"></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true" data-src="/book/seven-languages-in-seven-weeks-bruce-a-tate/_payload.json?d90db294-fbea-4072-8341-d6777bd10b3e">[{"state":1,"once":12,"_errors":14,"serverRendered":5,"path":17,"prerenderedAt":18},["Reactive",2],{"$scolor-mode":3,"$sicons":7,"$ssite-config":8},{"preference":4,"value":4,"unknown":5,"forced":6},"system",true,false,{},{"env":9,"name":10,"url":11},"production","iusx","https://m.ritsu.jiangxue.org/",["Reactive",13],["Set"],["Reactive",15],{"content-query-EF220RG78d":16},null,"/book/seven-languages-in-seven-weeks-bruce-a-tate",1755684869565]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1755684843707,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:false,wsUrl:"",documentDriven:false,host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>